<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Version</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Version </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The version of Elektra is handled with the kdb.h macros <code>KDB_VERSION</code> which is a string and <code>KDB_VERSION_MAJOR</code>, <code>KDB_VERSION_MINOR</code> and <code>KDB_VERSION_PATCH</code> which are numbers for the publicly announced versions.</p>
<p>The version can also be retrieved at run-time from KDB:</p>
<div class="fragment"><div class="line">system/elektra/version/constants/KDB_VERSION</div>
<div class="line">system/elektra/version/constants/KDB_VERSION_MAJOR</div>
<div class="line">system/elektra/version/constants/KDB_VERSION_MINOR</div>
<div class="line">system/elektra/version/constants/KDB_VERSION_PATCH</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2865"></a>
Scope</h1>
<p>The version applies to following parts of Elektra:</p>
<ul>
<li>the API for programs using Elektra. Its interface is declared in src/include/kdb.h. Both applications and plugins use this API.</li>
<li>the high-level API as declared in <a href="/home/mpranj/workspace/libelektra/src/include/elektra.h">src/include/elektra.h</a>.</li>
<li>the API to plugins as declared in <a href="/home/mpranj/workspace/libelektra/src/plugins/doc/doc.h">src/plugins/doc/doc.h</a>.</li>
<li>the API to <a href="/home/mpranj/workspace/libelektra/src/include/kdbease.h">libease</a></li>
<li>the API to <a href="/home/mpranj/workspace/libelektra/src/include/kdbmeta.h">libmeta</a></li>
<li>the API to <a href="/home/mpranj/workspace/libelektra/src/include/kdbmerge.h">libmerge</a></li>
<li>the API to <a href="/home/mpranj/workspace/libelektra/src/include/kdbmodule.h">module loading</a></li>
<li>the API to <a href="/home/mpranj/workspace/libelektra/src/include/kdbnotification.h">libnotification</a></li>
<li>the API to <a href="/home/mpranj/workspace/libelektra/src/include/kdbopts.h">libopts</a></li>
<li>plugins that have <code>infos/status</code> of <code>compatible</code>.</li>
<li>the CLI tool <code>kdb</code> with its command-line arguments, KDB access and its return values.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2866"></a>
Behavior</h1>
<p>The following order defines the behavior of Elektra:</p>
<ol type="1">
<li>ABI test cases</li>
<li>Non-ABI test cases (including Shell Recorder)</li>
<li>The <a href="https://doc.libelektra.org/api/latest/html/">API documentation</a></li>
<li>The man pages</li>
<li>Tutorials (excluding Shell Recorder)</li>
<li>Examples</li>
</ol>
<p>Any inconsistency within this artifacts within each other or with the implementation constitutes a bug.</p>
<h1><a class="anchor" id="autotoc_md2867"></a>
Compatibility</h1>
<p>This section describes under which circumstances API and ABI incompatibilities may occur. As Elektra developer your mission is to avoid any unwanted incompatibilities. The tool icheck which checks the interfaces mentioned in the Scope may help you.</p>
<p>Elektra uses a stricter version of <a href="https://semver.org/">Semantic Versioning 2.0.0</a>, with the extensions explained here.</p>
<p>In <code>1.0.*</code> the API and ABI must be always forward-compatible and backwards-compatible. That means that Elektra's libraries may be upgraded and downgraded without any effect on applications, only bug or docu fixes are allowed.</p>
<p>In minor or patch version updates the API and ABI must be always forward-compatible, but not backwards-compatible. That means that a program written and compiled against 1.0.0 compiles and links against 1.1.0. But because it is not necessarily backwards-compatible a program written for 1.1.0 may not link or compile against Elektra 1.0.0 (but it compiles if you use the compatible subset, maybe by using #ifdefs). Also here applications must continue to work as originally intended.</p>
<p>When you add a new function you break ABI and API backward- compatibility (but not forward). You are only allowed to do so in a <code>1.*</code> change.</p>
<p>In the signature you are only allowed to add const to any parameter. You are <em>not</em> allowed to use subtypes to the objects, in C means you are not allowed to call any functions of an object which appear new. C does <em>not</em> type check that, it's your responsibility.</p>
<p>What C also does not check are the pre and postconditions. That means you are not allowed to demand more client code (e.g. first accept a NULL pointer and in the next version you crash on it) and you are not allowed to return values that the previous version did not return. It is a complex topic, so better don't underestimate it, but generally said the methods should behave on the same data the same way.</p>
<p>As we use <a class="el" href="doc_dev_symbol-versioning_md.html">symbol versioning</a>, the SO_VERSION of Elektra always remains the same, even if the major version changes. That means, if we rename or remove a function in the <code>2.0</code> release, applications that linked against Elektra <code>1.0</code> can still link against Elektra <code>2.0</code> but they do not necessarily compile with Elektra <code>2.0</code> anymore. Once the code is adapted to use <code>2.0</code>, it cannot link against <code>1.0</code> anymore. Note that this feature is only available on platforms that support symbol versioning. For other platforms, all applications need to be recompiled for every major version.</p>
<p>In major upgrades, changes of behavior is possible even if it might break some use cases of some applications. Furthermore, symbols that already have been deprecated before, might be removed. For example, in <code>1.0</code> there is a deprecated method <code>ksNext</code> (not available in <code>kdb.h</code>). Thus in <code>2.0</code> it is subject to be removed.</p>
<p>References: <a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html">http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html</a> <a href="http://packages.debian.org/de/sid/icheck">http://packages.debian.org/de/sid/icheck</a></p>
<h1><a class="anchor" id="autotoc_md2868"></a>
Bindings</h1>
<p>Bindings are in general tied to Elektra's version number except for the patch level. So bindings can only add or change functionality when Elektra's core does. This is a quite severe restriction but makes the version much easier to understand for users. It serves the goal that Elektra does not prefer any programming languages, instead people expect from Elektra version <code>x.y.*</code> identical functionality.</p>
<p>The patch level can be chosen by bindings as wanted. Using the binding <code>x.y.z</code> does not mean that Elektra <code>x.y.z</code> will be used on the target system. Please read the changelog of the binding maintainers to know about which bug fixes are included.</p>
<p>The patch level might also be used to fix bugs within bindings. This means that applications can only introspect the patch level of Elektra by getting <code>system/elektra/version/constants/KDB_VERSION_PATCH</code> but not by static patch levels the binding might provide. This should be no problem, as the patch level is supposed to not change the behavior. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
