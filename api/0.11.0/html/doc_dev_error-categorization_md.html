<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Error Categorization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Error Categorization </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_dev_error_categorization"></a> This document explains how to categorize errors and should act as a form of guideline. The categorization aims to reduce duplicated errors and the maintenance effort for errors.</p>
<h1><a class="anchor" id="autotoc_md2643"></a>
Categorization Mindset</h1>
<p>Errors along with their unique code only primarily exist because they can be <b>reacted differently on programmatically</b>. To get an idea of programmatic reactions take a method call which returns a <code>Timeout</code> error. Naturally a senseful reaction would be to retry at a later point in time. So the reaction here would be to retry with a time based approach. On the other hand it does not make sense to differentiate between <code>No Write Permission</code> and <code>No Read Permission</code> as the application just knows that it simply cannot access the desired resource and tells the user to grant it.</p>
<p>Categories are hierarchically structured. In some categories you cannot put an error such as <code>Permanent errors</code> (see below) because they are too general and developers should choose a more specific category. Even though most categories which allow putting errors into are at the end of the hierarchy (leafs), it may also be the case that a more general category also allows errors to be put in (e.g., <code>Resource Errors</code>). The categories below are marked as <code>concrete</code> or <code>abstract</code>, meaning that you either can or cannot create errors for the category. Please choose the most specific category as possible when trying to assign an error to a category.</p>
<p>If you feel for a new category, please forge a design decision document and make a PR to Elektra's repo.</p>
<h1><a class="anchor" id="autotoc_md2644"></a>
Error categorization Guideline</h1>
<p>Now we will investigate each category in more detail and when to put an error/warning in there.</p>
<p>For a complete structural overview please visit the corresponding <a class="el" href="doc_decisions_6_implemented_error_codes_md.html">design decision document</a></p>
<h2><a class="anchor" id="autotoc_md2645"></a>
Permanent errors ("C01000", abstract)</h2>
<p>The branch category <code>Permanent Errors</code> refer to such errors which cannot be fixed by retry at all. <code>Permanent Errors</code> are subdivided into</p>
<ul>
<li>Resource</li>
<li>Installation</li>
<li>Logical</li>
</ul>
<h3><a class="anchor" id="autotoc_md2646"></a>
Resource ("C01100", concrete)</h3>
<p><code>Resource Errors</code> are all kind of permission, existence and resource errors which are essential for Elektra to operate. Resource errors is a branch category which also allows for errors to be put in. Compared to validation errors this category has its focus the underlying system resources whereas validation errors for usages with specifications. Examples are missing files/ directories or insufficient permission to execute certain commands (e.g. you would require sudo permissions). Reactions are fixing the permissions, remount, creating the file/directory and retry the operation. Compared to validation errors, administrators would change the specification or retry with a different value.</p>
<h4><a class="anchor" id="autotoc_md2647"></a>
Out of Memory ("C01110", concrete)</h4>
<p><code>Out of Memory Errors</code> are special resource errors which come from failed <code>elektraMalloc</code> calls primarily as no more memory could be allocated for the application. Errors with not enough hard disc space do not belong here but into <code>Resource</code>. Such errors will gain special handling in future releases and users cannot deal with such errors as of now.</p>
<h3><a class="anchor" id="autotoc_md2648"></a>
Installation ("C01200", concrete)</h3>
<p><code>Installation Errors</code> are errors that are related to a wrong installation such as wrong plugin names, missing backends, initialization errors, misconfiguration of Elektra etc. Installation errors might also be non-Elektra specific but also from dependent library/applications such as gpg. Also, plugin configuration errors belong to <code>Installation Errors</code> as this happens during mounting. Users will have to reconfigure, reinstall, recompile (with other settings) Elektra in order to get rid of this error or fix the installation of the corresponding library/application.</p>
<h3><a class="anchor" id="autotoc_md2649"></a>
Logical ("C01300", abstract)</h3>
<p><code>Logical Errors</code> is a branch category in which you indicate a logical flaw in the code such as internal errors, not implemented features, passing illegal parameters to functions, plugins which do not behave accordingly (wrong return codes, uncaught exceptions) or errors which should not happen such as going into a <code>default</code> branch when you are assured that all cases are covered. Usually such errors come with a message to report such failures to Elektra's bugtracker. Applications cannot handle such errors themselves.</p>
<h4><a class="anchor" id="autotoc_md2650"></a>
Internal ("C01310", concrete)</h4>
<p><code>Internal Errors</code> are such errors which indicate a flaw or bug in the internal logic of Elektra. Examples are going into a <code>default</code> branch which you do never expect to happen. Another use case is if you use an external library and have to catch a generic exception. If you can however, catch the most specific exceptions and convert them into the appropriate category. If you have to use this error please add a message indicating that this bug should be reported.</p>
<h4><a class="anchor" id="autotoc_md2651"></a>
Interface ("C01320", concrete)</h4>
<p><code>Interface Errors</code> indicate a wrong usage of Elektra's API. Compared to <code>internal</code> errors this category does not indicate a bug but a misuse. An example would be to pass a NULL pointer to <code>kdbGet</code>. Also, violations of the backend belong into this category. Compared to semantic validation errors, this category has its focus on detecting wrong usages of the API instead of a "retry with a
different value" approach. Also, validation errors focus on specifications of configurations whereas this category tries to handle specifications for APIs. Users should investigate the concrete reason and might use a different, more appropriate method or change their passed values before retrying.</p>
<h4><a class="anchor" id="autotoc_md2652"></a>
Plugin Misbehavior ("C01330", concrete)</h4>
<p><code>Plugin Misbehavior Errors</code> indicate that a plugin does not behave in an intended way. Unrecognized commands, unknown return codes, plugin creation errors, etc. belong to this category. Also, uncaught exceptions belong here because Elektra expects all exceptions to be caught. For wrong plugin versions please use <code>Installation</code> errors. Users can try to remount, recompile the plugin under different options or use a different plugin (e.g., switching to <code>mini</code> instead of <code>ini</code>).</p>
<h2><a class="anchor" id="autotoc_md2653"></a>
Conflicting State ("C02000", concrete)</h2>
<p><code>Conflicting State Errors</code> are errors where the current state is incompatible with the attempted operation. These kind of errors are usually in resolver plugins when the state of the file has changed without the system knowing. An example would be to try to push your changes into a Git repository where the remote branch has already changed. Try to synchronize your internal state and retry to get rid of this error. Examples are the need for calling <code>kdbGet</code> before <code>kdbSet</code>.</p>
<h2><a class="anchor" id="autotoc_md2654"></a>
Validation ("C03000", abstract)</h2>
<p><code>Validation Errors</code> are heavily used for Elektra's <code>configuration specification</code> feature and should tell users that their given input does not match a certain pattern/type/expected semantic etc.</p>
<p>Validation errors can either be syntactic or semantic.</p>
<h3><a class="anchor" id="autotoc_md2655"></a>
Syntactic ("C03100", concrete)</h3>
<p><code>Syntactic Errors</code> are errors which tell users or applications that the current format is not valid. Examples are wrong date formats or missing closing brackets <code>]</code> inside of a regular expression when it is checked. Also, path related errors like missing slashes come into this category. Parsing errors are also associated with syntactic errors such as unexpected encounters like missing line endings, illegal characters or wrong encodings. Also, transformation and conversion errors are to be categorizes here because the format of the given input does not allow such actions. Since syntactic errors demand a specific format and structure, also structural validation errors belong here. Users should try a different value/format and retry setting it with Elektra.</p>
<h3><a class="anchor" id="autotoc_md2656"></a>
Semantic ("C03200", concrete)</h3>
<p><code>Semantic Errors</code> are errors which indicate a misunderstanding of the intended meaning between a user's/developer's/administrator's way of seeing a setting and the application's one. The main focus of this category is to enforce specifications compared to other categories. So if users provide input which do not match prespecified criteria even though syntactically everything is valid, this category should be used. Examples are references to non-existent keys (<code>reference</code> plugin), setting values to keys which require to be empty (<code>required</code> plugin), wrong provided values in a specification if you restricted the values (<code>enum</code> plugin), etc.</p>
<p>Users should try a different value or fix the underlying specification and retry again.</p>
<h1><a class="anchor" id="autotoc_md2657"></a>
Underlying design decision document</h1>
<ul>
<li><a class="el" href="doc_decisions_6_implemented_error_codes_md.html">Decision Document</a> The underlying design decision document. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
