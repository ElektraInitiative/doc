\hypertarget{backend_8c}{\section{backend.\+c File Reference}
\label{backend_8c}\index{backend.\+c@{backend.\+c}}
}


Everything related to a backend.  


{\ttfamily \#include $<$kdbinternal.\+h$>$}\\*
Include dependency graph for backend.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{backend_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{backend_8c_aa81c8c0b5a2d0c59ea501f15049699b6}{elektra\+Backend\+Set\+Mountpoint} (Backend $\ast$backend, Key\+Set $\ast$\hyperlink{kdbgetenv_8h_aad028793b12f33ad025bf2bd77aa24a8}{elektra\+Config}, Key $\ast$error\+Key)
\begin{DoxyCompactList}\small\item\em sets mountpoint \end{DoxyCompactList}\item 
Backend $\ast$ \hyperlink{backend_8c_a3ffa89869d6c96e1a1d38c8a88648f9e}{elektra\+Backend\+Open} (Key\+Set $\ast$\hyperlink{kdbgetenv_8h_aad028793b12f33ad025bf2bd77aa24a8}{elektra\+Config}, Key\+Set $\ast$modules, Key $\ast$error\+Key)
\begin{DoxyCompactList}\small\item\em Builds a backend out of the configuration supplied from\+: \end{DoxyCompactList}\item 
Backend $\ast$ \hyperlink{backend_8c_a6b597e57340e29d1ccdd538814530b3a}{elektra\+Backend\+Open\+Missing} (Key $\ast$mp)
\begin{DoxyCompactList}\small\item\em Opens the internal backend that indicates that a backend is missing at that place. \end{DoxyCompactList}\item 
Backend $\ast$ \hyperlink{backend_8c_a9ecb7fc73f33af5353756068d90e7862}{elektra\+Backend\+Open\+Default} (Key\+Set $\ast$modules, const char $\ast$file, Key $\ast$error\+Key)
\begin{DoxyCompactList}\small\item\em Opens a default backend using the plugin named K\+D\+B\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+R\+E\+S\+O\+L\+V\+E\+R and K\+D\+B\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+T\+O\+R\+A\+G\+E. \end{DoxyCompactList}\item 
Backend $\ast$ \hyperlink{backend_8c_a2875836c10c37e9ee4b86847a82f8b77}{elektra\+Backend\+Open\+Modules} (Key\+Set $\ast$modules, Key $\ast$error\+Key)
\item 
Backend $\ast$ \hyperlink{backend_8c_a70e47734bdace223415ecb804d5126c5}{elektra\+Backend\+Open\+Version} (Key $\ast$error\+Key)
\begin{DoxyCompactList}\small\item\em Opens the internal version backend. \end{DoxyCompactList}\item 
int \hyperlink{backend_8c_adf493c5336da5955af376dc1b7cdb264}{elektra\+Backend\+Update\+Size} (Backend $\ast$backend, Key $\ast$parent, int size)
\begin{DoxyCompactList}\small\item\em Update internal size in backend. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Everything related to a backend. 

\begin{DoxyCopyright}{Copyright}
B\+S\+D License (see doc/\+C\+O\+P\+Y\+I\+N\+G or \href{http://www.libelektra.org}{\tt http\+://www.\+libelektra.\+org}) 
\end{DoxyCopyright}


\subsection{Function Documentation}
\hypertarget{backend_8c_a3ffa89869d6c96e1a1d38c8a88648f9e}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Open@{elektra\+Backend\+Open}}
\index{elektra\+Backend\+Open@{elektra\+Backend\+Open}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Open}]{\setlength{\rightskip}{0pt plus 5cm}Backend$\ast$ elektra\+Backend\+Open (
\begin{DoxyParamCaption}
\item[{Key\+Set $\ast$}]{elektra\+Config, }
\item[{Key\+Set $\ast$}]{modules, }
\item[{Key $\ast$}]{error\+Key}
\end{DoxyParamCaption}
)}}\label{backend_8c_a3ffa89869d6c96e1a1d38c8a88648f9e}


Builds a backend out of the configuration supplied from\+: 

\begin{DoxyVerb}system/elektra/mountpoints/<name>
\end{DoxyVerb}


The root key must be like the above example. You do not need to rewind the keyset. But every key must be below the root key.

The internal consistency will be checked in this function. If necessary parts are missing, like no plugins, they cant be loaded or similar 0 will be returned.

\hyperlink{group__keyset_ga6b00cf82b59af4d883a9bad6cf4a4a4a}{ks\+Cut()} is perfectly suitable for cutting out the configuration like needed.

\begin{DoxyNote}{Note}
The given Key\+Set will be deleted within the function, don't use it afterwards.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em elektra\+Config} & the configuration to work with. It is used to build up this backend. \\
\hline
{\em modules} & used to load new modules or get references to existing one \\
\hline
{\em error\+Key} & the key where an error and warnings are added\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a pointer to a freshly allocated backend this could be the requested backend or a so called \char`\"{}missing backend\char`\"{}. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & if out of memory \\
\hline
\end{DoxyRetVals}
\hypertarget{backend_8c_a9ecb7fc73f33af5353756068d90e7862}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Open\+Default@{elektra\+Backend\+Open\+Default}}
\index{elektra\+Backend\+Open\+Default@{elektra\+Backend\+Open\+Default}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Open\+Default}]{\setlength{\rightskip}{0pt plus 5cm}Backend$\ast$ elektra\+Backend\+Open\+Default (
\begin{DoxyParamCaption}
\item[{Key\+Set $\ast$}]{modules, }
\item[{const char $\ast$}]{file, }
\item[{Key $\ast$}]{error\+Key}
\end{DoxyParamCaption}
)}}\label{backend_8c_a9ecb7fc73f33af5353756068d90e7862}


Opens a default backend using the plugin named K\+D\+B\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+R\+E\+S\+O\+L\+V\+E\+R and K\+D\+B\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+T\+O\+R\+A\+G\+E. 


\begin{DoxyParams}{Parameters}
{\em modules} & the modules to work with \\
\hline
{\em error\+Key} & the key to issue warnings and errors to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the fresh allocated default backend or 0 if it failed 
\end{DoxyReturn}
\hypertarget{backend_8c_a6b597e57340e29d1ccdd538814530b3a}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Open\+Missing@{elektra\+Backend\+Open\+Missing}}
\index{elektra\+Backend\+Open\+Missing@{elektra\+Backend\+Open\+Missing}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Open\+Missing}]{\setlength{\rightskip}{0pt plus 5cm}Backend$\ast$ elektra\+Backend\+Open\+Missing (
\begin{DoxyParamCaption}
\item[{Key $\ast$}]{mp}
\end{DoxyParamCaption}
)}}\label{backend_8c_a6b597e57340e29d1ccdd538814530b3a}


Opens the internal backend that indicates that a backend is missing at that place. 

\begin{DoxyReturn}{Returns}
the fresh allocated backend or 0 if no memory 
\end{DoxyReturn}
\hypertarget{backend_8c_a2875836c10c37e9ee4b86847a82f8b77}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Open\+Modules@{elektra\+Backend\+Open\+Modules}}
\index{elektra\+Backend\+Open\+Modules@{elektra\+Backend\+Open\+Modules}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Open\+Modules}]{\setlength{\rightskip}{0pt plus 5cm}Backend$\ast$ elektra\+Backend\+Open\+Modules (
\begin{DoxyParamCaption}
\item[{Key\+Set $\ast$}]{modules, }
\item[{Key $\ast$}]{error\+Key}
\end{DoxyParamCaption}
)}}\label{backend_8c_a2875836c10c37e9ee4b86847a82f8b77}
\begin{DoxyReturn}{Returns}
a backend which gives plugin configuration of the module which is currently point to.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em modules} & the modules to work with \\
\hline
{\em error\+Key} & the key to issue warnings and errors to \\
\hline
\end{DoxyParams}
\hypertarget{backend_8c_a70e47734bdace223415ecb804d5126c5}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Open\+Version@{elektra\+Backend\+Open\+Version}}
\index{elektra\+Backend\+Open\+Version@{elektra\+Backend\+Open\+Version}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Open\+Version}]{\setlength{\rightskip}{0pt plus 5cm}Backend$\ast$ elektra\+Backend\+Open\+Version (
\begin{DoxyParamCaption}
\item[{Key $\ast$}]{error\+Key}
\end{DoxyParamCaption}
)}}\label{backend_8c_a70e47734bdace223415ecb804d5126c5}


Opens the internal version backend. 


\begin{DoxyParams}{Parameters}
{\em error\+Key} & the key to issue warnings and errors to \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the fresh allocated default backend or 0 if it failed 
\end{DoxyReturn}
\hypertarget{backend_8c_aa81c8c0b5a2d0c59ea501f15049699b6}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Set\+Mountpoint@{elektra\+Backend\+Set\+Mountpoint}}
\index{elektra\+Backend\+Set\+Mountpoint@{elektra\+Backend\+Set\+Mountpoint}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Set\+Mountpoint}]{\setlength{\rightskip}{0pt plus 5cm}int elektra\+Backend\+Set\+Mountpoint (
\begin{DoxyParamCaption}
\item[{Backend $\ast$}]{backend, }
\item[{Key\+Set $\ast$}]{elektra\+Config, }
\item[{Key $\ast$}]{error\+Key}
\end{DoxyParamCaption}
)}}\label{backend_8c_aa81c8c0b5a2d0c59ea501f15049699b6}


sets mountpoint 


\begin{DoxyParams}[1]{Parameters}
 & {\em backend} & where the mountpoint should be set \\
\hline
 & {\em elektra\+Config} & the config where the mountpoint can be found \\
\hline
\mbox{\tt out}  & {\em error\+Key} & the name also has the mountpoint set\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
\hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\+Current()} is root key 
\end{DoxyPrecond}
\begin{DoxyPostcond}{Postcondition}
\hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\+Current()} is root key
\end{DoxyPostcond}

\begin{DoxyRetVals}{Return values}
{\em -\/1} & if no mountpoint is found or memory allocation problem \\
\hline
{\em 0} & on success \\
\hline
\end{DoxyRetVals}
\hypertarget{backend_8c_adf493c5336da5955af376dc1b7cdb264}{\index{backend.\+c@{backend.\+c}!elektra\+Backend\+Update\+Size@{elektra\+Backend\+Update\+Size}}
\index{elektra\+Backend\+Update\+Size@{elektra\+Backend\+Update\+Size}!backend.\+c@{backend.\+c}}
\subsubsection[{elektra\+Backend\+Update\+Size}]{\setlength{\rightskip}{0pt plus 5cm}int elektra\+Backend\+Update\+Size (
\begin{DoxyParamCaption}
\item[{Backend $\ast$}]{backend, }
\item[{Key $\ast$}]{parent, }
\item[{int}]{size}
\end{DoxyParamCaption}
)}}\label{backend_8c_adf493c5336da5955af376dc1b7cdb264}


Update internal size in backend. 


\begin{DoxyParams}{Parameters}
{\em backend} & the backend to update \\
\hline
{\em parent} & for parent \\
\hline
{\em size} & to update (-\/1 default, 0 empty, $>$0 otherwise)\\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
parent must be serializable namespace
\end{DoxyPrecond}

\begin{DoxyRetVals}{Return values}
{\em -\/1} & if invalid parent (assert) \\
\hline
{\em 0} & on success \\
\hline
\end{DoxyRetVals}
