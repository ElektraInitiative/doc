<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Multiple File Backends</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.9.14</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Multiple File Backends </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_decisions_6_implemented_multiple_file_backends"></a> A file backend refers to exactly one file per namespace. This file can be returned using <code>kdb file</code>.</p>
<h1><a class="anchor" id="autotoc_md2432"></a>
Problem</h1>
<p>In some situations a single mountpoint refers to more than one file per namespace:</p>
<ul>
<li>For XDG in the <code>system</code> namespace may contain several files (XDG_CONFIG_DIRS).</li>
<li>A fallback file if some data cannot be stored in some format (Idea from @kodebach: writing the same content to several files, merging when reading)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2433"></a>
Constraints</h1>
<h1><a class="anchor" id="autotoc_md2434"></a>
Assumptions</h1>
<h1><a class="anchor" id="autotoc_md2435"></a>
Considered Alternatives</h1>
<h1><a class="anchor" id="autotoc_md2436"></a>
Decision</h1>
<p>Multiple File Backends are not supported in the case of writing files.</p>
<p>Multiple sources in one namespace only work, if the fallback KeySet is part of the mountpoint config. That way any change to the fallback KeySet would essentially make the whole thing a different mountpoint and thereby invalidate all guarantees.</p>
<h1><a class="anchor" id="autotoc_md2437"></a>
Rationale</h1>
<p>Writeable multiple file backends would:</p>
<ul>
<li>make it impossible for admins to modify content of all files using Elektra</li>
<li>do not work atomically (a journal would be needed)</li>
<li>do not work together with mmap (as it only checks one file for cache misses)</li>
</ul>
<h1><a class="anchor" id="autotoc_md2438"></a>
Implications</h1>
<p>See Rationale.</p>
<h1><a class="anchor" id="autotoc_md2439"></a>
Related Decisions</h1>
<h1><a class="anchor" id="autotoc_md2440"></a>
Notes</h1>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
