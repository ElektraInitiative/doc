<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: High-level API Help Message</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">High-level API Help Message </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This decision <em>does not</em> assume code-generation is used. For the case of code-generation see the <a href="#notes">Notes</a> section.</p>
<p>We want to allow to print the help message no matter what errors happened in <code>kdbOpen</code> or <code>kdbGet</code>.</p>
<ul>
<li><code>elektraOpen</code> should not return a broken <code>Elektra</code> instance.</li>
<li>The help message can only be printed, if <code>elektraOpen</code> returns an <code>Elektra</code> instance and no <code>ElektraError</code>.</li>
</ul>
<ul>
<li>We assume that the application in question was correctly installed.</li>
<li>We assume <code>gopts</code> was mounted. This is not the default right now, but the code-generator template <code>highlevel</code> contains code that will mount <code>gopts</code>, if it is missing.</li>
<li>We assume the application was called in <em>help mode</em>, i.e. with <code>--help</code>. Otherwise printing the help message is not possible, anyway.</li>
</ul>
<ul>
<li>Ignore all errors (in help mode): Not a feasible solution, because there may have been problems when reading the storage file and therefore, the help message may be broken or incomplete.</li>
<li>Ignore all errors (in help mode), which occurred after the <code>gopts</code> plugin ran: Complicated to implement (we need to know about plugin order, etc.). Not actually necessary (see <a href="#rationale">Rationale</a>).</li>
</ul>
<p>Ignore missing <code>require</code>d keys (in help mode), but fail for every other error.</p>
<p>Required keys <b>must</b> be provided by the user/admin and cannot come from another source (Elektra, app developer, etc.). Therefore they will be missing until the user makes changes to the KDB. Before that, no other error should occur (we assumed a correct installation). If a user runs <code>app</code> for the first time and receives an error about a missing required key, they will:</p>
<ol type="1">
<li>know what to do and add the key, thereby fixing the problem.</li>
<li>try <code>app -h</code> and see that it doesn't show a help message. They will probably continue with 3.</li>
<li>try <code>app --help</code> to find out more. The help message may or may not contain useful information. If not they may try 4.</li>
<li>read some other documentation to find out more. Ideally this leads them to 1.</li>
</ol>
<p>In any case after this the user definitely know how to interact with the KDB. Since we assumed that there won't be any errors before the KDB was changed, we can assume that the user caused other errors by changing the KDB.</p>
<p>If code-generation is used, the situation is a little different. If the parameter <code>embedHelpFallback</code> is set to <code>1</code>, a fallback help message will be created from the specification originally passed to the code-generator and embedded into the application. The parameter also changes, how help mode is detected and ultimately allows the help message function (<code>printHelpMessage</code> by default) to always print a help message. Although it may not reflect changes, the user made to the specification. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
