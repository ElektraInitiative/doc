<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: blockresolver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.21</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin: blockresolver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the blockresolver plugin is in keys below</li>
<li>infos/author = Thomas Waser <a href="#" onclick="location.href='mai'+'lto:'+'tho'+'ma'+'s.w'+'as'+'er@'+'li'+'bel'+'ek'+'tra'+'.o'+'rg'; return false;">thoma<span style="display: none;">.nosp@m.</span>s.wa<span style="display: none;">.nosp@m.</span>ser@l<span style="display: none;">.nosp@m.</span>ibel<span style="display: none;">.nosp@m.</span>ektra<span style="display: none;">.nosp@m.</span>.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/needs =</li>
<li>infos/provides = resolver</li>
<li>infos/recommends =</li>
<li>infos/placements = rollback getresolver setresolver commit</li>
<li>infos/status = maintained conformant compatible coverage specific unittest tested nodep libc configurable preview experimental difficult unfinished concept</li>
<li>infos/metadata =</li>
<li>infos/description = resolver for parts in a file configuration file</li>
</ul>
<p>The <code>blockresolver</code> can be used to only resolve a tagged block inside a configuration file.</p>
<h3>Implementation details</h3>
<p><code>blockresolver</code> extracts the requested block from the configurations file and writes it into a temporary file. Afterwards Elektra will only work on the temporary file until kdbSet is called. On kdbSet the contents of the temporary file will be merged with parts outside of the requested block from the original file.</p>
<h2>Usage</h2>
<pre class="fragment">`kdb mount -R blockresolver /path/to/my/file /mountpoint -c identifier="identifier-tag"`
</pre><p>where <code>identifier</code> specifies the tag <code>blockresolver</code> will search for in the configuration file.</p>
<p>A block consists of 2 parts:</p><ul>
<li>beginning: the identifier suffixed with <code>start</code></li>
<li>end: the identifier suffixed with <code>stop</code></li>
</ul>
<h2>Limitations</h2>
<p>Currently the identifier must be unique.</p>
<h2>Example</h2>
<div class="fragment"><div class="line"># Backup-and-Restore:system/examples/blockresolver</div><div class="line">sudo kdb mount -R blockresolver /tmp/test.block system/examples/blockresolver -c identifier=&quot;&gt;&gt;&gt; block config&quot; ini</div><div class="line"></div><div class="line"># create testfile</div><div class="line">echo &#39;text&#39;                   &gt;  /tmp/test.block</div><div class="line">echo &#39;more text&#39;              &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;some more text&#39;         &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;&gt;&gt;&gt; block config start&#39; &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;[section1]&#39;             &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;key1 = val1&#39;            &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;[section2]&#39;             &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;key2 = val2&#39;            &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;&gt;&gt;&gt; block config stop&#39;  &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;text again&#39;             &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;and more text&#39;          &gt;&gt; /tmp/test.block</div><div class="line">echo &#39;text&#39;                   &gt;&gt; /tmp/test.block</div><div class="line"></div><div class="line"># check testfile</div><div class="line">cat /tmp/test.block</div><div class="line">#&gt; text</div><div class="line">#&gt; more text</div><div class="line">#&gt; some more text</div><div class="line">#&gt; &gt;&gt;&gt; block config start</div><div class="line">#&gt; [section1]</div><div class="line">#&gt; key1 = val1</div><div class="line">#&gt; [section2]</div><div class="line">#&gt; key2 = val2</div><div class="line">#&gt; &gt;&gt;&gt; block config stop</div><div class="line">#&gt; text again</div><div class="line">#&gt; and more text</div><div class="line">#&gt; text</div><div class="line"></div><div class="line"># only the block between the tags is read!</div><div class="line">kdb export system/examples/blockresolver ini</div><div class="line">#&gt; [section1]</div><div class="line">#&gt; key1 = val1</div><div class="line">#&gt; [section2]</div><div class="line">#&gt; key2 = val2</div><div class="line"></div><div class="line"># add a new key to the resolved block</div><div class="line">kdb set system/examples/blockresolver/section1/key12 val12</div><div class="line"></div><div class="line">cat /tmp/test.block</div><div class="line">#&gt; text</div><div class="line">#&gt; more text</div><div class="line">#&gt; some more text</div><div class="line">#&gt; &gt;&gt;&gt; block config start</div><div class="line">#&gt; [section1]</div><div class="line">#&gt; key1 = val1</div><div class="line">#&gt; key12 = val12</div><div class="line">#&gt; [section2]</div><div class="line">#&gt; key2 = val2</div><div class="line">#&gt; &gt;&gt;&gt; block config stop</div><div class="line">#&gt; text again</div><div class="line">#&gt; and more text</div><div class="line">#&gt; text</div><div class="line"></div><div class="line"># cleanup</div><div class="line">kdb rm -r system/examples/blockresolver</div><div class="line">sudo kdb umount system/examples/blockresolver</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
