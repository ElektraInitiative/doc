<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Elektra: split.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.15</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="dir_e0dd646c39a393cc8e6d3e5e227334a6.html">elektra</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">split.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interna of splitting functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;kdberrors.h&gt;</code><br />
<code>#include &lt;<a class="el" href="kdbinternal_8h.html">kdbinternal.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for split.c:</div>
<div class="dyncontent">
<div class="center"><img src="split_8c__incl.png" border="0" usemap="#split_8c" alt=""/></div>
<map name="split_8c" id="split_8c">
<area shape="rect" id="node3" href="kdbinternal_8h.html" title="Includes most internal header files. " alt="" coords="331,80,434,107"/><area shape="rect" id="node6" href="kdbmodule_8h.html" title="kdbmodule.h" alt="" coords="450,155,550,181"/><area shape="rect" id="node7" href="kdbplugin_8h.html" title="Methods for plugin programing. " alt="" coords="530,229,622,256"/><area shape="rect" id="node8" href="kdbprivate_8h.html" title="Private declarations. " alt="" coords="661,155,760,181"/><area shape="rect" id="node13" href="kdbproposal_8h.html" title="Proposed declarations. " alt="" coords="377,304,487,331"/><area shape="rect" id="node14" href="kdbextension_8h.html" title="Extension functionality. " alt="" coords="266,229,382,256"/><area shape="rect" id="node17" href="kdbobsolete_8h.html" title="Obsolete/Deprecated API. " alt="" coords="123,155,231,181"/><area shape="rect" id="node9" href="kdbtypes_8h.html" title="Elektra&#39;s data types for C and C++11. " alt="" coords="749,304,838,331"/><area shape="rect" id="node10" href="kdbhelper_8h.html" title="Helper for memory management. " alt="" coords="887,229,982,256"/><area shape="rect" id="node15" href="kdbmeta_8h.html" title="metadata functions " alt="" coords="266,304,353,331"/></map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad2245a38809f28e325cd9b32089b4c68"><td class="memItemLeft" align="right" valign="top">Split *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ad2245a38809f28e325cd9b32089b4c68">elektraSplitNew</a> (void)</td></tr>
<tr class="memdesc:ad2245a38809f28e325cd9b32089b4c68"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a new split object.  <a href="#ad2245a38809f28e325cd9b32089b4c68">More...</a><br /></td></tr>
<tr class="separator:ad2245a38809f28e325cd9b32089b4c68"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae569ef1bc4cd8e931b4a7840d8ce48e6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ae569ef1bc4cd8e931b4a7840d8ce48e6">elektraSplitDel</a> (Split *keysets)</td></tr>
<tr class="memdesc:ae569ef1bc4cd8e931b4a7840d8ce48e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a split object.  <a href="#ae569ef1bc4cd8e931b4a7840d8ce48e6">More...</a><br /></td></tr>
<tr class="separator:ae569ef1bc4cd8e931b4a7840d8ce48e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6067083cc1afb5d42180bf75f7f86ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ab6067083cc1afb5d42180bf75f7f86ef">elektraSplitRemove</a> (Split *split, size_t where)</td></tr>
<tr class="memdesc:ab6067083cc1afb5d42180bf75f7f86ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove one part of split.  <a href="#ab6067083cc1afb5d42180bf75f7f86ef">More...</a><br /></td></tr>
<tr class="separator:ab6067083cc1afb5d42180bf75f7f86ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9816931521a6a16bd553c08abb957c62"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a9816931521a6a16bd553c08abb957c62">elektraSplitResize</a> (Split *split)</td></tr>
<tr class="memdesc:a9816931521a6a16bd553c08abb957c62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Doubles the size of how many parts of keysets can be appended.  <a href="#a9816931521a6a16bd553c08abb957c62">More...</a><br /></td></tr>
<tr class="separator:a9816931521a6a16bd553c08abb957c62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c8c5c6c26aa42404d8aa06e6476a0f6"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a0c8c5c6c26aa42404d8aa06e6476a0f6">elektraSplitAppend</a> (Split *split, Backend *backend, Key *parentKey, int syncbits)</td></tr>
<tr class="memdesc:a0c8c5c6c26aa42404d8aa06e6476a0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the size of split and appends a new empty keyset.  <a href="#a0c8c5c6c26aa42404d8aa06e6476a0f6">More...</a><br /></td></tr>
<tr class="separator:a0c8c5c6c26aa42404d8aa06e6476a0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a887dd183bf21c635c6993cd480ff3b21"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a887dd183bf21c635c6993cd480ff3b21">elektraSplitSearchBackend</a> (Split *split, Backend *backend, Key *parent)</td></tr>
<tr class="memdesc:a887dd183bf21c635c6993cd480ff3b21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines if the backend is already inserted or not.  <a href="#a887dd183bf21c635c6993cd480ff3b21">More...</a><br /></td></tr>
<tr class="separator:a887dd183bf21c635c6993cd480ff3b21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb25e1f946f07e5490a962a42320a0cc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#afb25e1f946f07e5490a962a42320a0cc">elektraSplitSearchRoot</a> (Split *split, Key *parentKey)</td></tr>
<tr class="separator:afb25e1f946f07e5490a962a42320a0cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabebbc4b0e47527f59942fcf95b9fcb5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#aabebbc4b0e47527f59942fcf95b9fcb5">elektraSplitBuildup</a> (Split *split, KDB *kdb, Key *parentKey)</td></tr>
<tr class="memdesc:aabebbc4b0e47527f59942fcf95b9fcb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Walks through kdb-&gt;split and adds all backends below parentKey to split.  <a href="#aabebbc4b0e47527f59942fcf95b9fcb5">More...</a><br /></td></tr>
<tr class="separator:aabebbc4b0e47527f59942fcf95b9fcb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a447e430a045cef7b107762171fbdc104"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a447e430a045cef7b107762171fbdc104">elektraSplitDivide</a> (Split *split, KDB *handle, KeySet *ks)</td></tr>
<tr class="memdesc:a447e430a045cef7b107762171fbdc104"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splits up the keysets and search for a sync bit in every key.  <a href="#a447e430a045cef7b107762171fbdc104">More...</a><br /></td></tr>
<tr class="separator:a447e430a045cef7b107762171fbdc104"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dde14941040fe97dd036555e858bb69"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a5dde14941040fe97dd036555e858bb69">elektraSplitUpdateFileName</a> (Split *split, KDB *handle, Key *key)</td></tr>
<tr class="memdesc:a5dde14941040fe97dd036555e858bb69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the (configuration) file name for the parent key.  <a href="#a5dde14941040fe97dd036555e858bb69">More...</a><br /></td></tr>
<tr class="separator:a5dde14941040fe97dd036555e858bb69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afee68d5935a6875ece69945e32242895"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#afee68d5935a6875ece69945e32242895">elektraSplitAppoint</a> (Split *split, KDB *handle, KeySet *ks)</td></tr>
<tr class="memdesc:afee68d5935a6875ece69945e32242895"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appoints all keys from ks to yet unsynced splits.  <a href="#afee68d5935a6875ece69945e32242895">More...</a><br /></td></tr>
<tr class="separator:afee68d5935a6875ece69945e32242895"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9abad2c6146816e966976d9f18f0c88"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ab9abad2c6146816e966976d9f18f0c88">elektraSplitGet</a> (Split *split, Key *warningKey, KDB *handle)</td></tr>
<tr class="memdesc:ab9abad2c6146816e966976d9f18f0c88"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does some work after getting of backends is finished.  <a href="#ab9abad2c6146816e966976d9f18f0c88">More...</a><br /></td></tr>
<tr class="separator:ab9abad2c6146816e966976d9f18f0c88"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603c8c0fce6da478623a68367e2c7175"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a603c8c0fce6da478623a68367e2c7175">elektraSplitCheckSize</a> (Split *split)</td></tr>
<tr class="memdesc:a603c8c0fce6da478623a68367e2c7175"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if any of the split is uninitialized.  <a href="#a603c8c0fce6da478623a68367e2c7175">More...</a><br /></td></tr>
<tr class="separator:a603c8c0fce6da478623a68367e2c7175"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7619472c17c782befa93d2e029bc328"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#af7619472c17c782befa93d2e029bc328">elektraSplitUpdateSize</a> (Split *split)</td></tr>
<tr class="memdesc:af7619472c17c782befa93d2e029bc328"><td class="mdescLeft">&#160;</td><td class="mdescRight">Also update sizes after <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> to recognize multiple <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> attempts.  <a href="#af7619472c17c782befa93d2e029bc328">More...</a><br /></td></tr>
<tr class="separator:af7619472c17c782befa93d2e029bc328"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b1e5f1810964dddc3bd3a00822bca6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#af3b1e5f1810964dddc3bd3a00822bca6">elektraSplitMerge</a> (Split *split, KeySet *dest)</td></tr>
<tr class="memdesc:af3b1e5f1810964dddc3bd3a00822bca6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges together all parts of split into dest.  <a href="#af3b1e5f1810964dddc3bd3a00822bca6">More...</a><br /></td></tr>
<tr class="separator:af3b1e5f1810964dddc3bd3a00822bca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3176eff9c1b5a9bfcf3d2e648f537993"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a3176eff9c1b5a9bfcf3d2e648f537993">elektraSplitSync</a> (Split *split)</td></tr>
<tr class="memdesc:a3176eff9c1b5a9bfcf3d2e648f537993"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add sync bits everywhere keys were removed/added.  <a href="#a3176eff9c1b5a9bfcf3d2e648f537993">More...</a><br /></td></tr>
<tr class="separator:a3176eff9c1b5a9bfcf3d2e648f537993"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44f9f801daa8ff1b29e48e31e49752f7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a44f9f801daa8ff1b29e48e31e49752f7">elektraSplitPrepare</a> (Split *split)</td></tr>
<tr class="memdesc:a44f9f801daa8ff1b29e48e31e49752f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares for <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> mainloop afterwards.  <a href="#a44f9f801daa8ff1b29e48e31e49752f7">More...</a><br /></td></tr>
<tr class="separator:a44f9f801daa8ff1b29e48e31e49752f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interna of splitting functionality. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>BSD License (see doc/COPYING or <a href="http://www.libelektra.org">http://www.libelektra.org</a>) </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0c8c5c6c26aa42404d8aa06e6476a0f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t elektraSplitAppend </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Backend *&#160;</td>
          <td class="paramname"><em>backend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>parentKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>syncbits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increases the size of split and appends a new empty keyset. </p>
<p>Initializes the element with the given parameters at size-1 to be used.</p>
<p>Will automatically resize split if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">backend</td><td>the backend which should be appended </td></tr>
    <tr><td class="paramname">parentKey</td><td>the parentKey which should be appended </td></tr>
    <tr><td class="paramname">syncbits</td><td>the initial syncstate which should be appended</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if no split is found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the position of the new element: size-1 </dd></dl>

</div>
</div>
<a class="anchor" id="afee68d5935a6875ece69945e32242895"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitAppoint </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>ks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appoints all keys from ks to yet unsynced splits. </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="split_8c.html#aabebbc4b0e47527f59942fcf95b9fcb5" title="Walks through kdb->split and adds all backends below parentKey to split. ">elektraSplitBuildup()</a> need to be executed before.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">handle</td><td>to determine to which backend a key belongs </td></tr>
    <tr><td class="paramname">ks</td><td>the keyset to appoint to split</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>if no backend was found for a key </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aabebbc4b0e47527f59942fcf95b9fcb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitBuildup </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>parentKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Walks through kdb-&gt;split and adds all backends below parentKey to split. </p>
<p>Sets syncbits to 2 if it is a default or root backend (which needs splitting). The information is copied from kdb-&gt;split.</p>
<dl class="section pre"><dt>Precondition</dt><dd>split needs to be empty, directly after creation with <a class="el" href="split_8c.html#ad2245a38809f28e325cd9b32089b4c68" title="Allocates a new split object. ">elektraSplitNew()</a>.</dd>
<dd>
there needs to be a valid defaultBackend but its ok not to have a trie inside KDB.</dd>
<dd>
parentKey must be a valid key! (could be implemented more generally, but that would require splitting up of keysets of the same backend)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>will get all backends appended </td></tr>
    <tr><td class="paramname">kdb</td><td>the handle to get information about backends </td></tr>
    <tr><td class="paramname">parentKey</td><td>the information below which key the backends are from interest</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>always </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a603c8c0fce6da478623a68367e2c7175"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitCheckSize </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if any of the split is uninitialized. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if size is wrong </td></tr>
    <tr><td class="paramname">1</td><td>if everything is ok </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae569ef1bc4cd8e931b4a7840d8ce48e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void elektraSplitDel </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>keysets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a split object. </p>
<p>Will free all allocated resources of a split keyset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keysets</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a447e430a045cef7b107762171fbdc104"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitDivide </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>ks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Splits up the keysets and search for a sync bit in every key. </p>
<p>It does not check if there were removed keys, see <a class="el" href="split_8c.html#a3176eff9c1b5a9bfcf3d2e648f537993" title="Add sync bits everywhere keys were removed/added. ">elektraSplitSync()</a> for the next step.</p>
<p>It does not create new backends, this has to be done by buildup before.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="split_8c.html#aabebbc4b0e47527f59942fcf95b9fcb5" title="Walks through kdb->split and adds all backends below parentKey to split. ">elektraSplitBuildup()</a> need to be executed before.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">handle</td><td>to get information where the individual keys belong </td></tr>
    <tr><td class="paramname">ks</td><td>the keyset to divide</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if there were no sync bits </td></tr>
    <tr><td class="paramname">1</td><td>if there were sync bits </td></tr>
    <tr><td class="paramname">-1</td><td>if no backend was found for any key </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab9abad2c6146816e966976d9f18f0c88"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitGet </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>warningKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does some work after getting of backends is finished. </p>
<ul>
<li>Update sizes</li>
<li>Removal of wrong keys</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="split_8c.html#afee68d5935a6875ece69945e32242895" title="Appoints all keys from ks to yet unsynced splits. ">elektraSplitAppoint()</a> needs to be executed before.</dd></dl>
<ul>
<li>check if keys are in correct backend</li>
<li>remove syncbits</li>
<li>update sizes in the backends</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">warningKey</td><td>postcondition violations are reported here </td></tr>
    <tr><td class="paramname">handle</td><td>the handle to preprocess the keys </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>if no backend was found for a key or split-&gt;parents has invalid namespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af3b1e5f1810964dddc3bd3a00822bca6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitMerge </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges together all parts of split into dest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">dest</td><td>the destination keyset where all keysets are appended. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad2245a38809f28e325cd9b32089b4c68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Split* elektraSplitNew </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a new split object. </p>
<p>Splits up a keyset into multiple keysets where each of them will passed to the correct <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a>.</p>
<p>Initially the size is 0 and alloc is APPROXIMATE_NR_OF_BACKENDS.</p>
<dl class="section return"><dt>Returns</dt><dd>a fresh allocated split object</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="split_8c.html#ae569ef1bc4cd8e931b4a7840d8ce48e6" title="Delete a split object. ">elektraSplitDel()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a44f9f801daa8ff1b29e48e31e49752f7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void elektraSplitPrepare </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares for <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> mainloop afterwards. </p>
<p>All splits which do not need sync are removed and a deep copy of the remaining keysets is done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab6067083cc1afb5d42180bf75f7f86ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void elektraSplitRemove </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove one part of split. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">where</td><td>the position to cut away</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>where must be within the size of the split </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>split will be removed </dd></dl>

</div>
</div>
<a class="anchor" id="a9816931521a6a16bd553c08abb957c62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void elektraSplitResize </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Doubles the size of how many parts of keysets can be appended. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a887dd183bf21c635c6993cd480ff3b21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t elektraSplitSearchBackend </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Backend *&#160;</td>
          <td class="paramname"><em>backend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines if the backend is already inserted or not. </p>
<dl class="section warning"><dt>Warning</dt><dd>If no parent Key is given, the default/root backends won't be searched.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">backend</td><td>the backend to search for </td></tr>
    <tr><td class="paramname">parent</td><td>the key to check for domains in default/root backends. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pos of backend if it already exist </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if it does not exist </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afb25e1f946f07e5490a962a42320a0cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitSearchRoot </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>parentKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>if one of the backends in split has all keys below parentKey </td></tr>
    <tr><td class="paramname">0</td><td>if parentKey == 0 or there are keys below or same than parentKey which do not fit in any of split keysets </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">parentKey</td><td>the key which relation is searched for </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3176eff9c1b5a9bfcf3d2e648f537993"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitSync </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add sync bits everywhere keys were removed/added. </p>
<ul>
<li>checks if the size of a previous <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a> is unchanged.</li>
<li>checks if in correct state (<a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a> needs to be executed before)</li>
</ul>
<p>Only <a class="el" href="split_8c.html#a447e430a045cef7b107762171fbdc104" title="Splits up the keysets and search for a sync bit in every key. ">elektraSplitDivide()</a> together with this function can really decide if sync is needed or not.</p>
<dl class="section pre"><dt>Precondition</dt><dd>split needs to be processed with <a class="el" href="split_8c.html#a447e430a045cef7b107762171fbdc104" title="Splits up the keysets and search for a sync bit in every key. ">elektraSplitDivide()</a> before.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> is not needed </td></tr>
    <tr><td class="paramname">1</td><td>if <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> is needed </td></tr>
    <tr><td class="paramname">-1</td><td>on wrong keys (also has assert, should not happen) </td></tr>
    <tr><td class="paramname">-2</td><td>wrong spec state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a> was not executed before </td></tr>
    <tr><td class="paramname">-3</td><td>wrong dir state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a> was not executed before </td></tr>
    <tr><td class="paramname">-4</td><td>wrong user state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a> was not executed before </td></tr>
    <tr><td class="paramname">-5</td><td>wrong system state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a> was not executed before </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>user/system was split before. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5dde14941040fe97dd036555e858bb69"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void elektraSplitUpdateFileName </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the (configuration) file name for the parent key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split to work with </td></tr>
    <tr><td class="paramname">handle</td><td>the handle to work with </td></tr>
    <tr><td class="paramname">key</td><td>the parentKey that should be updated (name must be correct) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af7619472c17c782befa93d2e029bc328"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraSplitUpdateSize </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Also update sizes after <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> to recognize multiple <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a> attempts. </p>
<dl class="section warning"><dt>Warning</dt><dd>cant use the same code with elektraSplitGet because there is no default split part for <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
