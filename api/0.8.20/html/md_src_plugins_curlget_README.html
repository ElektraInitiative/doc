<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: curlget</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.20</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin: curlget </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the curlget plugin is in keys below</li>
<li>infos/author = Thomas Waser <a href="#" onclick="location.href='mai'+'lto:'+'tho'+'ma'+'s.w'+'as'+'er@'+'li'+'bel'+'ek'+'tra'+'.o'+'rg'; return false;">thoma<span style="display: none;">.nosp@m.</span>s.wa<span style="display: none;">.nosp@m.</span>ser@l<span style="display: none;">.nosp@m.</span>ibel<span style="display: none;">.nosp@m.</span>ektra<span style="display: none;">.nosp@m.</span>.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/needs =</li>
<li>infos/provides =</li>
<li>infos/recommends =</li>
<li>infos/placements = getresolver setresolver commit rollback</li>
<li>infos/status = configurable readonly preview unfinished nodoc</li>
<li>infos/metadata =</li>
<li>infos/description = mount remote config files via curl</li>
</ul>
<p>The <code>curlget</code> plugin is a resolver using libcurl to upload and download files from/to remote hosts. When mounted with a <code>URL</code> as configuration file there will be no changes to the file system. When mounted with a (local) path to a configuration a copy of the remote configuration is kept and used as fallback in <code><a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a></code> if fetching the remote file from the server fails.</p>
<h2>Configuration</h2>
<h3>definitions</h3>
<p><code>URL</code>:</p>
<p>an URL has to be prefixed with the protocol. valid protocols: <code><a href="http://">http://</a></code>, <code><a href="https://">https://</a></code>, <code><a href="ftp://">ftp://</a></code>, <code>ftps://</code>, <code>scp://</code>, <code>sftp://</code>, <code>smb://</code> (currently not supported)</p>
<p><code>Filename</code>:</p>
<p>can bei either an <code>URL</code> or a local configuration file.</p>
<p>if the filename is an <code>URL</code> the plugin operates on temporary files only and keeps no local copy of the configuration. unless specified otherwise the <code>URL</code> is used for both upload and download.</p>
<h3>plugin configuration</h3>
<ul>
<li><p class="startli"><code>url</code>:</p>
<p class="startli"><code>URL</code> used for both upload and download of the configuration. might be overwritten by <code>url/get</code> and <code>url/put</code>.</p>
</li>
<li><p class="startli"><code>url/get</code>:</p>
<p class="startli">the <code>URL</code> of the remote configuration file.</p>
</li>
<li><p class="startli"><code>url/put</code>:</p>
<p class="startli">the <code>URL</code> used to upload the configuration on kdbSet</p>
</li>
<li><p class="startli"><code>upload/method</code>:</p>
<p class="startli">only used for <code>HTTP</code> requests. use <code>POST</code> for <code>POST</code>-requests, or <code>PUT</code> for <code>PUT</code>-requests.</p>
</li>
<li><p class="startli"><code>upload/postfield</code>:</p>
<p class="startli">for <code>HTTP POST</code>-requests: the name of the field containing the file</p>
</li>
<li><p class="startli"><code>upload/filename</code>:</p>
<p class="startli">name of the uploaded file. if present it will be appended to <code>url/put</code> on uploads except for <code>HTTP POST</code> uploads where it overrides the <code>filename</code> field of the header. if not specified the value defaults to <code>url/put</code> is assumed to be a valid upload <code>URL</code> already containing the filename, except for <code>HTTP POST</code>-requests where the <code>basename(3)</code> of the local mounted configuration file is used if present, or of <code>url/get</code></p>
</li>
<li><p class="startli"><code>user</code>:</p>
<p class="startli">username for authentication</p>
</li>
<li><p class="startli"><code>password</code>:</p>
<p class="startli">password for authentication</p>
</li>
<li><p class="startli"><code>ssl/verify</code>:</p>
<p class="startli">if set <code>1</code> enforce the use of <code>SSL</code>. <code>HOSTNAME</code> and <code>PEER</code> verifications are enabled but might be overwritten by <code>ssl/verify/host</code> and <code>ssl/verify/peer</code>.</p>
<p class="startli">if not set or set to <code>0</code> the plugin will try to use <code>SSL</code> but not fail if not possible.</p>
</li>
<li><p class="startli"><code>ssl/verify/host</code>:</p>
<p class="startli">if set to <code>1</code> use hostname verification, if set to <code>0</code>, skip it.</p>
</li>
<li><p class="startli"><code>ssl/verify/peer</code>:</p>
<p class="startli">if set to <code>1</code> verify the ssl certificate, if set to <code>0</code>, skip the verification.</p>
</li>
<li><p class="startli"><code>prefer</code>:</p>
<p class="startli">if set to <code>local</code> don't update the configuration if the remote version has changed <b>within</b> succeeding <code><a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a></code> calls.</p>
</li>
<li><p class="startli"><code>ssh/auth</code>:</p>
<p class="startli">ssh authentication method for sftp and scp. possible values: <code>agent</code> for using <code>ssh-agent</code>, <code>password</code> for password authentication, <code>pubkey</code> for public key authentication and <code>pubkeypw</code> for public key + password authentication.</p>
</li>
<li><p class="startli"><code>ssh/key</code>:</p>
<p class="startli">path of the private key file for ssh public key authentication. if not set, default to <code>$HOME/.ssh/id_dsa</code> or <code>$HOME/.ssh/id_rsa</code></p>
</li>
<li><p class="startli"><code>ssh/key/passwd</code>:</p>
<p class="startli">password for the private key file</p>
</li>
</ul>
<h2>Example</h2>
<div class="fragment"><div class="line">rm /tmp/curltest.ini || $(exit 0)</div><div class="line">sudo kdb mount -R curlget -c url/get=&quot;http://127.0.0.1:8000/curltest.ini&quot;,url/put=&quot;http://127.0.0.1:8000&quot;,user=&quot;thomas&quot;,password=&quot;pass&quot;,upload/method=&quot;POST&quot;,upload/postfield=&quot;file&quot; /tmp/curltest.ini system/curl ini</div><div class="line">kdb ls system/curl</div><div class="line">#&gt; system/curl/section1</div><div class="line">#&gt; system/curl/section1/key1</div><div class="line">stat /tmp/curltest.ini</div><div class="line"># RET:0</div><div class="line">kdb set system/curl/section1/key2 val2</div><div class="line">sudo kdb umount system/curl</div><div class="line">stat /tmp/curltest.ini</div><div class="line"># RET:0</div><div class="line">cat /tmp/curltest.ini</div><div class="line">#&gt; [section1]</div><div class="line">#&gt; key1 = val1</div><div class="line">#&gt; key2 = val2</div><div class="line">rm /tmp/curltest.ini || $(exit 0)</div><div class="line">sudo kdb mount -R curlget -c url/put=&quot;http://127.0.0.1:8000&quot;,user=&quot;thomas&quot;,password=&quot;pass&quot;,upload/method=&quot;POST&quot;,upload/postfield=&quot;file&quot; &quot;http://127.0.0.1:8000/curltest.ini&quot; system/curl ini</div><div class="line">kdb ls system/curl</div><div class="line">#&gt; system/curl/section1</div><div class="line">#&gt; system/curl/section1/key1</div><div class="line">#&gt; system/curl/section1/key2</div><div class="line">stat /tmp/curltest.ini</div><div class="line"># RET:1</div><div class="line">mv /tmp/httproot/curltest.ini /tmp/httproot/curltest.ini_moved</div><div class="line">kdb ls system/curl</div><div class="line"># RET:5</div><div class="line">mv /tmp/httproot/curltest.ini_moved /tmp/httproot/curltest.ini</div><div class="line">kdb rm system/curl/section1/key2</div><div class="line">sudo kdb umount system/curl</div><div class="line">cat /tmp/httproot/curltest.ini</div><div class="line">#&gt; [section1]</div><div class="line">#&gt; key1 = val1</div></div><!-- fragment --><h3>Mount with HTTP GET + POST and keep local copy</h3>
<div class="fragment"><div class="line">kdb mount -R curlget -c url/get=&quot;http://127.0.0.1:8000/curltest.ini&quot;,url/put=&quot;http://127.0.0.1:8000&quot;,user=&quot;thomas&quot;,password=&quot;pass&quot;,upload/method=&quot;POST&quot;,upload/postfield=&quot;file&quot; /tmp/curltest.ini system/curl ini</div></div><!-- fragment --><h3>Mount with HTTP GET + POST and keep no local copys</h3>
<div class="fragment"><div class="line">kdb mount -R curlget -c url/put=&quot;http://127.0.0.1:8000&quot;,user=&quot;thomas&quot;,password=&quot;pass&quot;,upload/method=&quot;POST&quot;,upload/postfield=&quot;file&quot; &quot;http://127.0.0.1:8000/curltest.ini&quot; system/curl ini</div></div><!-- fragment --><h3>Mount with FTP GET + PUT and keep local copy</h3>
<div class="fragment"><div class="line">kdb mount -R curlget -c url/get=&quot;ftp://127.0.0.1:21/test.ini&quot;,url/put=&quot;ftp://127.0.0.1:21/test.ini&quot;,user=&quot;thomas&quot;,password=&quot;pass&quot;,upload/method=&quot;FTP&quot; /tmp/curltest.ini system/curl ini</div></div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
