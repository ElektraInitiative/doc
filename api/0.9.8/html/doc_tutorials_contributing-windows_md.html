<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Introduction</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Introduction </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_tutorials_contributing_windows"></a> In this tutorial, you will learn how to set up a development environment for Elektra using Windows Subsystem for Linux (WSL) and Visual Studio 2019.</p>
<p>Visual Studio 2019 (VS2019) Community is free but requires a registration after a couple of days. <a href="https://visualstudio.microsoft.com/downloads/">Download it</a> and install the Linux development with C++ workload.</p>
<p>Elektra development mainly happens on GNU/Linux distributions. Therefore, it makes sense to use WSL if you have Windows 10 installed on your PC. For the beginning, it does not matter if you choose WSL 1 or WSL 2. It is possible to convert them later.</p>
<h1><a class="anchor" id="autotoc_md3565"></a>
Download and Installation</h1>
<p>We assume you use Ubuntu as WSL distribution. Install the packages required for building from VS2019:</p>
<div class="fragment"><div class="line">apt install g++ gdb make ninja-build rsync zip</div>
</div><!-- fragment --><p>Then clone the libelektra git repository:</p>
<div class="fragment"><div class="line">git clone git@github.com:ElektraInitiative/libelektra.git</div>
</div><!-- fragment --><blockquote class="doxtable">
<p><b>Do not use VS2019 to clone the repository</b>: You will not be able to compile because of invalid line endings. </p>
</blockquote>
<p>and open it in VS2019. It will complain that IntelliSense is out of date. In addition, the <code>Error List</code> at the bottom will show CMake errors about missing compilers. To solve this, you have to configure a Linux CMake project.</p>
<h1><a class="anchor" id="autotoc_md3566"></a>
Configure a Linux CMake project</h1>
<p>Microsoft has <a href="https://docs.microsoft.com/en-us/cpp/linux/cmake-linux-configure?view=msvc-160">even more information</a> about this task.</p>
<p>In the drop-down menu that says <code>x64-Debug (Default)</code> click <code>Manage Configurations...</code>. Add <code>WSL-GCC-Debug</code> and save the configuration.</p>
<blockquote class="doxtable">
<p>You can remove <code>x64-Debug (Default)</code>. </p>
</blockquote>
<p>CMake generation will automatically restart. When it has completed, you can click the drop-down <code>Select Startup Item...</code> (by the green <em>Play</em> button).</p>
<p>A long list of targets should appear. Choose <code>hello (bin\hello)</code> and click the green <em>Play</em> button. You should now see the output <code>Hello world</code> in the Linux Console Window at the bottom.</p>
<h1><a class="anchor" id="autotoc_md3567"></a>
Why choose VS2019</h1>
<p>One advantage of using VS2019 is the graphical debugger. Search for <code>hello.c</code> in the Solution Explorer to the right. Create a breakpoint in the main function and run the program again using the green <em>Play</em> button.</p>
<p>On the bottom-left you will see the windows <code>Autos</code>, <code>Locals</code> and <code>Watch 1</code>. Click on <code>Locals</code> to inspect the <code>Key * k</code>. Right-click <code>keyNew</code> to access functions like <code>Peek Definition</code>.</p>
<h1><a class="anchor" id="autotoc_md3568"></a>
Choosing your WSL version</h1>
<p>It makes sense to compare WSL 1 and WSL 2 and make an informed decision for one of them. Your setup may require adaptions, such as installing an SSH server in your Linux distribution.</p>
<p>Good sources of information are:</p>
<ul>
<li>the article <a href="https://docs.microsoft.com/en-us/windows/wsl/compare-versions">Comparing WSL 1 and WSL 2</a> from the official WSL documentation</li>
<li>the blog post <a href="https://devblogs.microsoft.com/cppblog/c-with-visual-studio-and-wsl2/">C++ with Visual Studio and WSL2</a></li>
<li>the official <a href="https://docs.microsoft.com/en-us/cpp/linux/?view=msvc-160">Linux with Visual Studio C++ documentation</a></li>
</ul>
<p>Commands to change your WSL version can be found, for example, in the blog post <a href="https://devblogs.microsoft.com/commandline/wsl-2-is-now-available-in-windows-insiders/">WSL 2 is now available in Windows Insiders</a></p>
<h1><a class="anchor" id="autotoc_md3569"></a>
Troubleshooting</h1>
<p>For further information, consider the official <a href="https://docs.microsoft.com/en-us/cpp/linux/?view=msvc-160">Linux with Visual Studio C++ documentation</a>.</p>
<p>If you choose to work with source code residing on a Windows filesystem mounted in WSL (e.g.<code>/mnt/c/...</code>), please enable the <code>metadata</code> option to prevent problems due to permissions not being persisted:</p>
<ul>
<li>Create or modify <code>/etc/wsl.conf</code> to contain the following section and setting:</li>
</ul>
<div class="fragment"><div class="line">[automount]</div>
<div class="line">options = &quot;metadata&quot;</div>
</div><!-- fragment --><ul>
<li>Restart the WSL VM by issuing <code>wsl --shutdown</code> in your window console.</li>
</ul>
<p>Building from sources residing on a mounted windows file system may incur a signifcant performance penalty. Consider using your WSL home directory (e.g. <code>~/</code>) as your location for the Elektra sources. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
