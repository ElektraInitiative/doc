<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: kdb::KeySet Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacekdb.html">kdb</a></li><li class="navelem"><a class="el" href="classkdb_1_1KeySet.html">KeySet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classkdb_1_1KeySet-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">kdb::KeySet Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A keyset holds together a set of keys.  
 <a href="classkdb_1_1KeySet.html#details">More...</a></p>

<p><code>#include &lt;keyset.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4eac9850fa4f06c07a5306befc3e4377"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> ()</td></tr>
<tr class="memdesc:a4eac9850fa4f06c07a5306befc3e4377"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new empty keyset with no keys.  <a href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">More...</a><br /></td></tr>
<tr class="separator:a4eac9850fa4f06c07a5306befc3e4377"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f651ff310178951402038e590743e0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a21f651ff310178951402038e590743e0">KeySet</a> (ckdb::KeySet *k)</td></tr>
<tr class="memdesc:a21f651ff310178951402038e590743e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take ownership of a <code>ckdb::KeySet *</code>.  <a href="classkdb_1_1KeySet.html#a21f651ff310178951402038e590743e0">More...</a><br /></td></tr>
<tr class="separator:a21f651ff310178951402038e590743e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d6df839ab852fded1739ff3398d0b1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ad8d6df839ab852fded1739ff3398d0b1">KeySet</a> (const <a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;other)</td></tr>
<tr class="memdesc:ad8d6df839ab852fded1739ff3398d0b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a keyset.  <a href="classkdb_1_1KeySet.html#ad8d6df839ab852fded1739ff3398d0b1">More...</a><br /></td></tr>
<tr class="separator:ad8d6df839ab852fded1739ff3398d0b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6191e93cdd67bbca63df934498d191ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a6191e93cdd67bbca63df934498d191ba">KeySet</a> (size_t alloc,...) ELEKTRA_SENTINEL</td></tr>
<tr class="memdesc:a6191e93cdd67bbca63df934498d191ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new keyset.  <a href="classkdb_1_1KeySet.html#a6191e93cdd67bbca63df934498d191ba">More...</a><br /></td></tr>
<tr class="separator:a6191e93cdd67bbca63df934498d191ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0b2996803b9c9124cf791a1d738855c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ae0b2996803b9c9124cf791a1d738855c">KeySet</a> (<a class="el" href="structkdb_1_1VaAlloc.html">VaAlloc</a> alloc, va_list ap)</td></tr>
<tr class="memdesc:ae0b2996803b9c9124cf791a1d738855c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new keyset.  <a href="classkdb_1_1KeySet.html#ae0b2996803b9c9124cf791a1d738855c">More...</a><br /></td></tr>
<tr class="separator:ae0b2996803b9c9124cf791a1d738855c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade654f92bddec24abad1b651e828f2b8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ade654f92bddec24abad1b651e828f2b8">~KeySet</a> ()</td></tr>
<tr class="memdesc:ade654f92bddec24abad1b651e828f2b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deconstruct a keyset.  <a href="classkdb_1_1KeySet.html#ade654f92bddec24abad1b651e828f2b8">More...</a><br /></td></tr>
<tr class="separator:ade654f92bddec24abad1b651e828f2b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2987b3fb1b12196399650726f1c18f02"><td class="memItemLeft" align="right" valign="top"><a id="a2987b3fb1b12196399650726f1c18f02"></a>
ckdb::KeySet *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a2987b3fb1b12196399650726f1c18f02">release</a> ()</td></tr>
<tr class="memdesc:a2987b3fb1b12196399650726f1c18f02"><td class="mdescLeft">&#160;</td><td class="mdescRight">If you don't want destruction of keyset at the end you can release the pointer. <br /></td></tr>
<tr class="separator:a2987b3fb1b12196399650726f1c18f02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9a3906e0b18a783f8a6e8bdbec9ed0"><td class="memItemLeft" align="right" valign="top">ckdb::KeySet *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a4e9a3906e0b18a783f8a6e8bdbec9ed0">getKeySet</a> () const</td></tr>
<tr class="memdesc:a4e9a3906e0b18a783f8a6e8bdbec9ed0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Passes out the raw keyset pointer.  <a href="classkdb_1_1KeySet.html#a4e9a3906e0b18a783f8a6e8bdbec9ed0">More...</a><br /></td></tr>
<tr class="separator:a4e9a3906e0b18a783f8a6e8bdbec9ed0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c54736b7206bc2253d02a5bf4b3ccfb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a1c54736b7206bc2253d02a5bf4b3ccfb">operator=</a> (<a class="el" href="classkdb_1_1KeySet.html">KeySet</a> const &amp;other)</td></tr>
<tr class="memdesc:a1c54736b7206bc2253d02a5bf4b3ccfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a keyset.  <a href="classkdb_1_1KeySet.html#a1c54736b7206bc2253d02a5bf4b3ccfb">More...</a><br /></td></tr>
<tr class="separator:a1c54736b7206bc2253d02a5bf4b3ccfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab01c5c46e4c0802560b8f15886af89c4"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ab01c5c46e4c0802560b8f15886af89c4">size</a> () const</td></tr>
<tr class="memdesc:ab01c5c46e4c0802560b8f15886af89c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">The size of the keyset.  <a href="classkdb_1_1KeySet.html#ab01c5c46e4c0802560b8f15886af89c4">More...</a><br /></td></tr>
<tr class="separator:ab01c5c46e4c0802560b8f15886af89c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3f2b936d66729690e8a8a45b5074baa"><td class="memItemLeft" align="right" valign="top">ckdb::KeySet *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ad3f2b936d66729690e8a8a45b5074baa">dup</a> () const</td></tr>
<tr class="memdesc:ad3f2b936d66729690e8a8a45b5074baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Duplicate a keyset.  <a href="classkdb_1_1KeySet.html#ad3f2b936d66729690e8a8a45b5074baa">More...</a><br /></td></tr>
<tr class="separator:ad3f2b936d66729690e8a8a45b5074baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28fd33fdaecf1d57d4dddac7058f5d38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a28fd33fdaecf1d57d4dddac7058f5d38">copy</a> (const <a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;other)</td></tr>
<tr class="memdesc:a28fd33fdaecf1d57d4dddac7058f5d38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy a keyset.  <a href="classkdb_1_1KeySet.html#a28fd33fdaecf1d57d4dddac7058f5d38">More...</a><br /></td></tr>
<tr class="separator:a28fd33fdaecf1d57d4dddac7058f5d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38f5159e39758aa632421d2fe7440633"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a38f5159e39758aa632421d2fe7440633">clear</a> ()</td></tr>
<tr class="memdesc:a38f5159e39758aa632421d2fe7440633"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the keyset.  <a href="classkdb_1_1KeySet.html#a38f5159e39758aa632421d2fe7440633">More...</a><br /></td></tr>
<tr class="separator:a38f5159e39758aa632421d2fe7440633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d4b2f3aa9f58d10053561135b50233e"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">append</a> (const <a class="el" href="classkdb_1_1Key.html">Key</a> &amp;toAppend)</td></tr>
<tr class="memdesc:a0d4b2f3aa9f58d10053561135b50233e"><td class="mdescLeft">&#160;</td><td class="mdescRight">append a key  <a href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">More...</a><br /></td></tr>
<tr class="separator:a0d4b2f3aa9f58d10053561135b50233e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9cbdc933d7171037d47c6d4d78595d1"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ac9cbdc933d7171037d47c6d4d78595d1">append</a> (const <a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;toAppend)</td></tr>
<tr class="memdesc:ac9cbdc933d7171037d47c6d4d78595d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">append a keyset  <a href="classkdb_1_1KeySet.html#ac9cbdc933d7171037d47c6d4d78595d1">More...</a><br /></td></tr>
<tr class="separator:ac9cbdc933d7171037d47c6d4d78595d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f207457a1c12633a1a5301a3a1bbaed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkdb_1_1Key.html">Key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a7f207457a1c12633a1a5301a3a1bbaed">pop</a> ()</td></tr>
<tr class="memdesc:a7f207457a1c12633a1a5301a3a1bbaed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove and return the last <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> of <code>ks</code>.  <a href="classkdb_1_1KeySet.html#a7f207457a1c12633a1a5301a3a1bbaed">More...</a><br /></td></tr>
<tr class="separator:a7f207457a1c12633a1a5301a3a1bbaed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e32f2d9f34f03fa8ec85945f49b630"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkdb_1_1Key.html">Key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a40e32f2d9f34f03fa8ec85945f49b630">at</a> (elektraCursor pos) const</td></tr>
<tr class="memdesc:a40e32f2d9f34f03fa8ec85945f49b630"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup a key by index.  <a href="classkdb_1_1KeySet.html#a40e32f2d9f34f03fa8ec85945f49b630">More...</a><br /></td></tr>
<tr class="separator:a40e32f2d9f34f03fa8ec85945f49b630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab283da798a7670d5c3f0e1a5b821e666"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkdb_1_1KeySet.html">KeySet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#ab283da798a7670d5c3f0e1a5b821e666">cut</a> (<a class="el" href="classkdb_1_1Key.html">Key</a> k)</td></tr>
<tr class="memdesc:ab283da798a7670d5c3f0e1a5b821e666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cuts out all Keys from <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code> that are below or at <code>cutpoint</code>.  <a href="classkdb_1_1KeySet.html#ab283da798a7670d5c3f0e1a5b821e666">More...</a><br /></td></tr>
<tr class="separator:ab283da798a7670d5c3f0e1a5b821e666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8537e388edfbb6941d771106c0ae3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkdb_1_1Key.html">Key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">lookup</a> (const <a class="el" href="classkdb_1_1Key.html">Key</a> &amp;k, const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914">elektraLookupFlags</a> options=<a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a00738455e0ae843c8720809d8287f370">KDB_O_NONE</a>) const</td></tr>
<tr class="memdesc:a2b8537e388edfbb6941d771106c0ae3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> contained in <code>ks</code> that matches the name of the <code>key</code>.  <a href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">More...</a><br /></td></tr>
<tr class="separator:a2b8537e388edfbb6941d771106c0ae3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ef071747608900be478219e4a040612"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classkdb_1_1Key.html">Key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a0ef071747608900be478219e4a040612">lookup</a> (std::string const &amp;name, const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914">elektraLookupFlags</a> options=<a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a00738455e0ae843c8720809d8287f370">KDB_O_NONE</a>) const</td></tr>
<tr class="memdesc:a0ef071747608900be478219e4a040612"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lookup a key by name.  <a href="classkdb_1_1KeySet.html#a0ef071747608900be478219e4a040612">More...</a><br /></td></tr>
<tr class="separator:a0ef071747608900be478219e4a040612"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65208974b44da0162ef70dd7a173748f"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a65208974b44da0162ef70dd7a173748f"><td class="memTemplItemLeft" align="right" valign="top">T&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a65208974b44da0162ef70dd7a173748f">get</a> (std::string const &amp;name, const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914">elektraLookupFlags</a> options=<a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a00738455e0ae843c8720809d8287f370">KDB_O_NONE</a>) const</td></tr>
<tr class="memdesc:a65208974b44da0162ef70dd7a173748f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generic lookup+get for keysets.  <a href="classkdb_1_1KeySet.html#a65208974b44da0162ef70dd7a173748f">More...</a><br /></td></tr>
<tr class="separator:a65208974b44da0162ef70dd7a173748f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38abda394a4acf2267d5fe718e272759"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#a38abda394a4acf2267d5fe718e272759">search</a> (const <a class="el" href="classkdb_1_1Key.html">Key</a> &amp;toSearch) const</td></tr>
<tr class="memdesc:a38abda394a4acf2267d5fe718e272759"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search in a key set, either yielding the actual index of the key, if the ley has been found within the key set, or a negative value indicating the insertion index of the key, if the key would be inserted.  <a href="classkdb_1_1KeySet.html#a38abda394a4acf2267d5fe718e272759">More...</a><br /></td></tr>
<tr class="separator:a38abda394a4acf2267d5fe718e272759"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7478af835e648219b11a3e0268b8eaf"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classkdb_1_1KeySet.html#af7478af835e648219b11a3e0268b8eaf">search</a> (std::string const &amp;name) const</td></tr>
<tr class="memdesc:af7478af835e648219b11a3e0268b8eaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search in a key set, either yielding the actual index of the key, if the ley has been found within the key set, or a negative value indicating the insertion index of the key, if the key would be inserted.  <a href="classkdb_1_1KeySet.html#af7478af835e648219b11a3e0268b8eaf">More...</a><br /></td></tr>
<tr class="separator:af7478af835e648219b11a3e0268b8eaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A keyset holds together a set of keys. </p>
<p>Methods to manipulate KeySets. A <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is a set of keys.</p>
<p>Most important properties of a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>:</p>
<ul>
<li>Allows us to iterate over all keys (in any depth)</li>
<li>Iteration is always sorted</li>
<li>Fast key lookup</li>
<li>A <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> may be shared among many KeySets.</li>
</ul>
<p>The most important methods of <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>:</p>
<ul>
<li>With <a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> you can create a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>.</li>
<li>You can append keys with <a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a> or with <a class="el" href="group__keyset.html#ga21eb9c3a14a604ee3a8bdc779232e7b7" title="Append all Keys in toAppend to the end of the KeySet ks.">ksAppend()</a> you can append a whole keyset.</li>
<li>Using <a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> you can lookup (or pop with <a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a52fb5f2cc86773d393da62bebebf7984" title="Pop Parent out of keyset key in ksLookup().">KDB_O_POP</a>) a key.</li>
<li>With <a class="el" href="group__keyset.html#ga7474ad6b0a0fa969dbdf267ba5770eee" title="Return the number of Keys that ks contains.">ksGetSize()</a> and <a class="el" href="group__keyset.html#gab3fb5e067c672d9fd60a4022b2ae9dd1" title="Return Key at given position pos.">ksAtCursor()</a> you can iterate through the keyset. Be assured that you will get every key of the set in a stable order (parents before children).</li>
</ul>
<p><a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is the most important data structure in Elektra. It makes it possible to get and store many keys at once inside the database. In addition to that, the class can be used as high level datastructure in applications and it can be used in plugins to manipulate or check configuration.</p>
<p>With <a class="el" href="group__keyset.html#gad65d2cdcbb5381194a1688e169af8a83" title="Convenience method to look for a Key contained in ks with name name.">ksLookupByName()</a> it is possible to fetch easily specific keys out of the list of keys.</p>
<p>You can easily create and iterate keys:</p>
<div class="fragment"><div class="line"><span class="comment">// create a new keyset with 3 keys</span></div>
<div class="line"><span class="comment">// with a hint that about 20 keys will be inside</span></div>
<div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * myConfig = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (20, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/name1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>), <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/name2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>), <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/name3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>), <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// append a key in the keyset</span></div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a> (myConfig, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/name4&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>));</div>
<div class="line"> </div>
<div class="line">Key * current;</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">for</span> (elektraCursor it = 0; it &lt; <a class="code" href="group__keyset.html#ga7474ad6b0a0fa969dbdf267ba5770eee">ksGetSize</a> (myConfig); ++it)</div>
<div class="line">{</div>
<div class="line">        current = <a class="code" href="group__keyset.html#gab3fb5e067c672d9fd60a4022b2ae9dd1">ksAtCursor</a> (myConfig, it);</div>
<div class="line">        printf (<span class="stringliteral">&quot;Key name is %s.\n&quot;</span>, <a class="code" href="group__keyname.html#ga8e805c726a60da921d3736cda7813513">keyName</a> (current));</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (myConfig); <span class="comment">// delete keyset and all keys appended</span></div>
<div class="ttc" id="aclasskdb_1_1KeySet_html_a4eac9850fa4f06c07a5306befc3e4377"><div class="ttname"><a href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">kdb::KeySet::KeySet</a></div><div class="ttdeci">KeySet()</div><div class="ttdoc">Creates a new empty keyset with no keys.</div><div class="ttdef"><b>Definition:</b> keyset.hpp:480</div></div>
<div class="ttc" id="agroup__key_html_gad23c65b44bf48d773759e1f9a4d43b89"><div class="ttname"><a href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a></div><div class="ttdeci">Key * keyNew(const char *name,...)</div><div class="ttdoc">A practical way to fully create a Key object in one step.</div><div class="ttdef"><b>Definition:</b> key.c:138</div></div>
<div class="ttc" id="agroup__key_html_gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403"><div class="ttname"><a href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a></div><div class="ttdeci">@ KEY_END</div><div class="ttdef"><b>Definition:</b> kdbenum.c:95</div></div>
<div class="ttc" id="agroup__keyname_html_ga8e805c726a60da921d3736cda7813513"><div class="ttname"><a href="group__keyname.html#ga8e805c726a60da921d3736cda7813513">keyName</a></div><div class="ttdeci">const char * keyName(const Key *key)</div><div class="ttdoc">Returns a pointer to the abbreviated real internal key name.</div><div class="ttdef"><b>Definition:</b> elektra/keyname.c:256</div></div>
<div class="ttc" id="agroup__keyset_html_ga27e5c16473b02a422238c8d970db7ac8"><div class="ttname"><a href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a></div><div class="ttdeci">int ksDel(KeySet *ks)</div><div class="ttdoc">A destructor for KeySet objects.</div><div class="ttdef"><b>Definition:</b> keyset.c:438</div></div>
<div class="ttc" id="agroup__keyset_html_ga671e1aaee3ae9dc13b4834a4ddbd2c3c"><div class="ttname"><a href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a></div><div class="ttdeci">KeySet * ksNew(size_t alloc,...)</div><div class="ttdoc">Allocate, initialize and return a new KeySet object.</div><div class="ttdef"><b>Definition:</b> keyset.c:213</div></div>
<div class="ttc" id="agroup__keyset_html_ga7474ad6b0a0fa969dbdf267ba5770eee"><div class="ttname"><a href="group__keyset.html#ga7474ad6b0a0fa969dbdf267ba5770eee">ksGetSize</a></div><div class="ttdeci">ssize_t ksGetSize(const KeySet *ks)</div><div class="ttdoc">Return the number of Keys that ks contains.</div><div class="ttdef"><b>Definition:</b> keyset.c:718</div></div>
<div class="ttc" id="agroup__keyset_html_ga7a28fce3773b2c873c94ac80b8b4cd54"><div class="ttname"><a href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a></div><div class="ttdeci">#define KS_END</div><div class="ttdoc">End of a list of keys.</div><div class="ttdef"><b>Definition:</b> kdbenum.c:156</div></div>
<div class="ttc" id="agroup__keyset_html_gaa5a1d467a4d71041edce68ea7748ce45"><div class="ttname"><a href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a></div><div class="ttdeci">ssize_t ksAppendKey(KeySet *ks, Key *toAppend)</div><div class="ttdoc">Appends a Key to the end of ks.</div><div class="ttdef"><b>Definition:</b> keyset.c:889</div></div>
<div class="ttc" id="agroup__keyset_html_gab3fb5e067c672d9fd60a4022b2ae9dd1"><div class="ttname"><a href="group__keyset.html#gab3fb5e067c672d9fd60a4022b2ae9dd1">ksAtCursor</a></div><div class="ttdeci">Key * ksAtCursor(const KeySet *ks, elektraCursor pos)</div><div class="ttdoc">Return Key at given position pos.</div><div class="ttdef"><b>Definition:</b> keyset.c:1738</div></div>
</div><!-- fragment --> <dl class="section invariant"><dt>Invariant</dt><dd>always holds an underlying elektra keyset.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>that the cursor is mutable, so it might be changed even in const functions as described. </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4eac9850fa4f06c07a5306befc3e4377"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4eac9850fa4f06c07a5306befc3e4377">&#9670;&nbsp;</a></span>KeySet() <span class="overload">[1/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kdb::KeySet::KeySet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new empty keyset with no keys. </p>
<p>Allocate, initialize and return a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object. Objects created with <a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> must be destroyed with <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<p>You can use an arbitrary long list of parameters to preload the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> with a list of Keys. Either your first and only parameter is 0 or your last parameter must be KS_END.</p>
<p>So, terminate with ksNew(0, KS_END) or ksNew(20, ..., KS_END)</p>
<dl class="section warning"><dt>Warning</dt><dd>Never use ksNew(0, keyNew(...), KS_END). If the first parameter is 0, other arguments are ignored.</dd></dl>
<p>The first parameter <code>alloc</code> defines how many Keys can be added without reallocation. If you pass any alloc size greater than 0, but less than 16, it will default to 16.</p>
<p>For most uses</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (1, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// enough memory for up to 16 keys, without needing reallocation</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> will be fine. The alloc size will be 16 and will double whenever size reaches alloc size, so it also performs well with large KeySets.</p>
<p>You can defer the allocation of the internal array that holds the Keys, by passing 0 as the alloc size. This is useful if it is unclear whether your <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will actually hold any Keys and you want to avoid a malloc call.</p>
<div class="fragment"><div class="line"><span class="comment">// Create KeySet without allocating memory for keys</span></div>
<div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (0, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// The first allocation will happen in ksAppendKey</span></div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a>(keys, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>));</div>
<div class="line"><span class="comment">// work with the KeySet</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
<div class="ttc" id="agroup__key_html_gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e"><div class="ttname"><a href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a></div><div class="ttdeci">@ KEY_VALUE</div><div class="ttdef"><b>Definition:</b> kdbenum.c:88</div></div>
</div><!-- fragment --><p> If the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is known in advance, use the <code>alloc</code> parameter to hint the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>.</p>
<p>If your application only needs up to 15 Keys you can request a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> of size 15:</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (15, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key01&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value01&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key03&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value03&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <span class="comment">// ...</span></div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key15&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value15&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>), <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// work with it</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> If you start having 3 Keys, and your application needs approximately 200 up to 500 Keys, you can use:</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * config = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (500, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>); <span class="comment">// don&#39;t forget the KS_END at the end!</span></div>
<div class="line"><span class="comment">// work with it</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (config);</div>
</div><!-- fragment --><p> Alloc size is 500, the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will be 3 after ksNew. This means the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will reallocate when appending more than 497 keys.</p>
<p>The main benefit of taking a list of variant length parameters is to be able to have one C-Statement for any possible <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>. If you prefer, you can always create an empty <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> and use <a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a>.</p>
<dl class="section post"><dt>Postcondition</dt><dd>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is rewinded properly</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>gives a hint for how many Keys may be stored initially</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a ready to use <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on memory error</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a> to free the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> afterwards </dd>
<dd>
<a class="el" href="group__keyset.html#gac59e4b328245463f1451f68d5106151c" title="Return a duplicate of a KeySet.">ksDup()</a> to duplicate an existing <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a> to <a class="el" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e" title="append a key">append</a> individual Keys to a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd></dl>

</div>
</div>
<a id="a21f651ff310178951402038e590743e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f651ff310178951402038e590743e0">&#9670;&nbsp;</a></span>KeySet() <span class="overload">[2/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kdb::KeySet::KeySet </td>
          <td>(</td>
          <td class="paramtype">ckdb::KeySet *&#160;</td>
          <td class="paramname"><em>keyset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Take ownership of a <code>ckdb::KeySet *</code>. </p>
<p>// TODO: use ksIncRef/ksDecRef</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyset</td><td>the <code><a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> *</code> to take the ownership of </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkdb_1_1KeySet.html#a2987b3fb1b12196399650726f1c18f02" title="If you don&#39;t want destruction of keyset at the end you can release the pointer.">release()</a> </dd></dl>

</div>
</div>
<a id="ad8d6df839ab852fded1739ff3398d0b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8d6df839ab852fded1739ff3398d0b1">&#9670;&nbsp;</a></span>KeySet() <span class="overload">[3/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kdb::KeySet::KeySet </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duplicate a keyset. </p>
<p>This keyset will be a duplicate of the other afterwards.</p>
<dl class="section note"><dt>Note</dt><dd>that they still reference to the same Keys, so if you change key values also the keys in the original keyset will be changed.</dd></dl>
<p>So it is shallow copy, to create a deep copy you have to <a class="el" href="classkdb_1_1KeySet.html#ad3f2b936d66729690e8a8a45b5074baa" title="Duplicate a keyset.">dup()</a> every key (it still won't copy metadata, but they are COW): </p><div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html">kdb::KeySet</a> ksDeepCopy (<a class="code" href="classkdb_1_1KeySet.html">kdb::KeySet</a> orig)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="classkdb_1_1KeySet.html">kdb::KeySet</a> deepCopy;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (ssize_t it = 0; it &lt; orig.<a class="code" href="classkdb_1_1KeySet.html#ab01c5c46e4c0802560b8f15886af89c4">size</a> (); ++it)</div>
<div class="line">        {</div>
<div class="line">                deepCopy.<a class="code" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">append</a> (orig.<a class="code" href="classkdb_1_1KeySet.html#a40e32f2d9f34f03fa8ec85945f49b630">at</a> (it).<a class="code" href="classkdb_1_1Key.html#a51d5873239ba67ffd3b475522e647434">dup</a> ());</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> deepCopy;</div>
<div class="line">}</div>
<div class="ttc" id="aclasskdb_1_1KeySet_html"><div class="ttname"><a href="classkdb_1_1KeySet.html">kdb::KeySet</a></div><div class="ttdoc">A keyset holds together a set of keys.</div><div class="ttdef"><b>Definition:</b> keyset.hpp:54</div></div>
<div class="ttc" id="aclasskdb_1_1KeySet_html_a0d4b2f3aa9f58d10053561135b50233e"><div class="ttname"><a href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">kdb::KeySet::append</a></div><div class="ttdeci">ssize_t append(const Key &amp;toAppend)</div><div class="ttdoc">append a key</div><div class="ttdef"><b>Definition:</b> keyset.hpp:665</div></div>
<div class="ttc" id="aclasskdb_1_1KeySet_html_a40e32f2d9f34f03fa8ec85945f49b630"><div class="ttname"><a href="classkdb_1_1KeySet.html#a40e32f2d9f34f03fa8ec85945f49b630">kdb::KeySet::at</a></div><div class="ttdeci">Key at(elektraCursor pos) const</div><div class="ttdoc">Lookup a key by index.</div><div class="ttdef"><b>Definition:</b> keyset.hpp:701</div></div>
<div class="ttc" id="aclasskdb_1_1KeySet_html_ab01c5c46e4c0802560b8f15886af89c4"><div class="ttname"><a href="classkdb_1_1KeySet.html#ab01c5c46e4c0802560b8f15886af89c4">kdb::KeySet::size</a></div><div class="ttdeci">ssize_t size() const</div><div class="ttdoc">The size of the keyset.</div><div class="ttdef"><b>Definition:</b> keyset.hpp:610</div></div>
<div class="ttc" id="aclasskdb_1_1Key_html_a51d5873239ba67ffd3b475522e647434"><div class="ttname"><a href="classkdb_1_1Key.html#a51d5873239ba67ffd3b475522e647434">kdb::Key::dup</a></div><div class="ttdeci">ckdb::Key * dup(elektraCopyFlags flags=KEY_CP_ALL) const</div><div class="ttdef"><b>Definition:</b> key.hpp:841</div></div>
</div><!-- fragment --> <dl class="section see"><dt>See also</dt><dd><a class="el" href="classkdb_1_1KeySet.html#ad3f2b936d66729690e8a8a45b5074baa" title="Duplicate a keyset.">dup</a> </dd></dl>

</div>
</div>
<a id="a6191e93cdd67bbca63df934498d191ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6191e93cdd67bbca63df934498d191ba">&#9670;&nbsp;</a></span>KeySet() <span class="overload">[4/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kdb::KeySet::KeySet </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new keyset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>minimum number of keys to allocate </td></tr>
    <tr><td class="paramname">...</td><td>variable argument list</td></tr>
  </table>
  </dd>
</dl>
<p>Allocate, initialize and return a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object. Objects created with <a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> must be destroyed with <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<p>You can use an arbitrary long list of parameters to preload the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> with a list of Keys. Either your first and only parameter is 0 or your last parameter must be KS_END.</p>
<p>So, terminate with ksNew(0, KS_END) or ksNew(20, ..., KS_END)</p>
<dl class="section warning"><dt>Warning</dt><dd>Never use ksNew(0, keyNew(...), KS_END). If the first parameter is 0, other arguments are ignored.</dd></dl>
<p>The first parameter <code>alloc</code> defines how many Keys can be added without reallocation. If you pass any alloc size greater than 0, but less than 16, it will default to 16.</p>
<p>For most uses</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (1, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// enough memory for up to 16 keys, without needing reallocation</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> will be fine. The alloc size will be 16 and will double whenever size reaches alloc size, so it also performs well with large KeySets.</p>
<p>You can defer the allocation of the internal array that holds the Keys, by passing 0 as the alloc size. This is useful if it is unclear whether your <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will actually hold any Keys and you want to avoid a malloc call.</p>
<div class="fragment"><div class="line"><span class="comment">// Create KeySet without allocating memory for keys</span></div>
<div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (0, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// The first allocation will happen in ksAppendKey</span></div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a>(keys, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>));</div>
<div class="line"><span class="comment">// work with the KeySet</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> If the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is known in advance, use the <code>alloc</code> parameter to hint the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>.</p>
<p>If your application only needs up to 15 Keys you can request a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> of size 15:</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (15, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key01&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value01&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key03&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value03&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <span class="comment">// ...</span></div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key15&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value15&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>), <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// work with it</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> If you start having 3 Keys, and your application needs approximately 200 up to 500 Keys, you can use:</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * config = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (500, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>); <span class="comment">// don&#39;t forget the KS_END at the end!</span></div>
<div class="line"><span class="comment">// work with it</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (config);</div>
</div><!-- fragment --><p> Alloc size is 500, the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will be 3 after ksNew. This means the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will reallocate when appending more than 497 keys.</p>
<p>The main benefit of taking a list of variant length parameters is to be able to have one C-Statement for any possible <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>. If you prefer, you can always create an empty <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> and use <a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a>.</p>
<dl class="section post"><dt>Postcondition</dt><dd>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is rewinded properly</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>gives a hint for how many Keys may be stored initially</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a ready to use <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on memory error</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a> to free the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> afterwards </dd>
<dd>
<a class="el" href="group__keyset.html#gac59e4b328245463f1451f68d5106151c" title="Return a duplicate of a KeySet.">ksDup()</a> to duplicate an existing <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a> to <a class="el" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e" title="append a key">append</a> individual Keys to a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>caller must call va_start and va_end </dd></dl>
<dl class="section user"><dt>va the list of arguments</dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>the allocation size </td></tr>
    <tr><td class="paramname">va</td><td>the list of variable arguments </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae0b2996803b9c9124cf791a1d738855c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae0b2996803b9c9124cf791a1d738855c">&#9670;&nbsp;</a></span>KeySet() <span class="overload">[5/5]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kdb::KeySet::KeySet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structkdb_1_1VaAlloc.html">VaAlloc</a>&#160;</td>
          <td class="paramname"><em>alloc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>av</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a new keyset. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>minimum number of keys to allocate </td></tr>
    <tr><td class="paramname">ap</td><td>variable arguments list</td></tr>
  </table>
  </dd>
</dl>
<p>Use va as first argument to use this constructor, e.g.: </p><div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> ks(va, 23, ...);</div>
</div><!-- fragment --><p>Allocate, initialize and return a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object. Objects created with <a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> must be destroyed with <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<p>You can use an arbitrary long list of parameters to preload the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> with a list of Keys. Either your first and only parameter is 0 or your last parameter must be KS_END.</p>
<p>So, terminate with ksNew(0, KS_END) or ksNew(20, ..., KS_END)</p>
<dl class="section warning"><dt>Warning</dt><dd>Never use ksNew(0, keyNew(...), KS_END). If the first parameter is 0, other arguments are ignored.</dd></dl>
<p>The first parameter <code>alloc</code> defines how many Keys can be added without reallocation. If you pass any alloc size greater than 0, but less than 16, it will default to 16.</p>
<p>For most uses</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (1, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// enough memory for up to 16 keys, without needing reallocation</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> will be fine. The alloc size will be 16 and will double whenever size reaches alloc size, so it also performs well with large KeySets.</p>
<p>You can defer the allocation of the internal array that holds the Keys, by passing 0 as the alloc size. This is useful if it is unclear whether your <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will actually hold any Keys and you want to avoid a malloc call.</p>
<div class="fragment"><div class="line"><span class="comment">// Create KeySet without allocating memory for keys</span></div>
<div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (0, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// The first allocation will happen in ksAppendKey</span></div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a>(keys, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>));</div>
<div class="line"><span class="comment">// work with the KeySet</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> If the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is known in advance, use the <code>alloc</code> parameter to hint the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>.</p>
<p>If your application only needs up to 15 Keys you can request a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> of size 15:</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * keys = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (15, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key01&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value01&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value02&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key03&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value03&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                       <span class="comment">// ...</span></div>
<div class="line">                       <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key15&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value15&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>), <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><span class="comment">// work with it</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (keys);</div>
</div><!-- fragment --><p> If you start having 3 Keys, and your application needs approximately 200 up to 500 Keys, you can use:</p>
<div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * config = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (500, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value1&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value2&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/sw/org/app/#0/current/fixedConfiguration/key3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8ac66e4a49d09212b79f5754ca6db5bd2e">KEY_VALUE</a>, <span class="stringliteral">&quot;value3&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>),</div>
<div class="line">                         <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>); <span class="comment">// don&#39;t forget the KS_END at the end!</span></div>
<div class="line"><span class="comment">// work with it</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (config);</div>
</div><!-- fragment --><p> Alloc size is 500, the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will be 3 after ksNew. This means the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will reallocate when appending more than 497 keys.</p>
<p>The main benefit of taking a list of variant length parameters is to be able to have one C-Statement for any possible <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>. If you prefer, you can always create an empty <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> and use <a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a>.</p>
<dl class="section post"><dt>Postcondition</dt><dd>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is rewinded properly</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>gives a hint for how many Keys may be stored initially</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a ready to use <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on memory error</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a> to free the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> afterwards </dd>
<dd>
<a class="el" href="group__keyset.html#gac59e4b328245463f1451f68d5106151c" title="Return a duplicate of a KeySet.">ksDup()</a> to duplicate an existing <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a> to <a class="el" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e" title="append a key">append</a> individual Keys to a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a></dd></dl>
<dl class="section pre"><dt>Precondition</dt><dd>caller must call va_start and va_end </dd></dl>
<dl class="section user"><dt>va the list of arguments</dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alloc</td><td>the allocation size </td></tr>
    <tr><td class="paramname">va</td><td>the list of variable arguments </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade654f92bddec24abad1b651e828f2b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade654f92bddec24abad1b651e828f2b8">&#9670;&nbsp;</a></span>~KeySet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">kdb::KeySet::~KeySet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deconstruct a keyset. </p>
<p>A destructor for <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> objects. Every <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> created by <a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> must be deleted with <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<p>When the reference counter of <code>ks</code> is non-zero, this function will do nothing and simply return the current value of the reference counter.</p>
<p>It is therefore safe to call <code>ksDel (ks)</code> on any <code><a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> * ks</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> object to delete</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>when the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> was freed </td></tr>
    <tr><td class="paramname">-1</td><td>on NULL pointers </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of the reference counter, if it was non-zero</dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> for creating a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#ga5a656d35588d0c2f35c1e58653e46791" title="Increment the reference counter of a KeySet object.">ksIncRef()</a> for more information about the reference counter </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0d4b2f3aa9f58d10053561135b50233e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d4b2f3aa9f58d10053561135b50233e">&#9670;&nbsp;</a></span>append() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t kdb::KeySet::append </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkdb_1_1Key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>toAppend</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>append a key </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toAppend</td><td>key to append</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of keys in the keyset</dd></dl>
<p>Appends a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> to the end of <code>ks</code>. Hands the ownership of the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> <code>toAppend</code> to the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code>. ksDel(ks) uses keyDel(k) to delete every <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> unless it got its reference counter incremented by <a class="el" href="group__key.html#ga0b477b584c8be68519a8d92f90355136" title="Increment the reference counter of a Key object.">keyIncRef()</a>, e.g. by another <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> that contains this <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>.</p>
<p>The reference counter of the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> will be incremented to indicate this ownership, and thus <code>toAppend</code> is not const.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__key.html#ga0d82ce48529821aa43d82c035ba30c4f" title="Return the current reference counter value of a Key object.">keyGetRef()</a></dd></dl>
<p>If the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>'s name already exists in the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>, it will be replaced with the new <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>.</p>
<p><a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a> will also lock the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>'s name from <code>toAppend</code>. This is necessary so that the order of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> cannot be destroyed via calls to <a class="el" href="group__keyname.html#ga7699091610e7f3f43d2949514a4b35d9" title="Set a new name to a Key.">keySetName()</a>.</p>
<p>The <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> internal cursor will be set to the new <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>.</p>
<p>It is safe to directly append newly created Keys: </p><div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * ks = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (1, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a> (ks, <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/my/new/key&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>));</div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (ks);</div>
<div class="line"><span class="comment">// key deleted, too!</span></div>
</div><!-- fragment --><p> If you want the key to outlive the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>, make sure to do proper ref counting: </p><div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * ks = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (1, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line">Key * k = <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/ref/key&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>);</div>
<div class="line"><a class="code" href="group__key.html#ga0b477b584c8be68519a8d92f90355136">keyIncRef</a> (k);</div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a> (ks, k);</div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (ks);</div>
<div class="line"><span class="comment">// now we still can work with the key k!</span></div>
<div class="line"><a class="code" href="group__key.html#ga0c4d031ab6ee02cf884c64e28a2ad151">keyDecRef</a> (k);</div>
<div class="line"><a class="code" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1">keyDel</a> (k);</div>
<div class="ttc" id="agroup__key_html_ga0b477b584c8be68519a8d92f90355136"><div class="ttname"><a href="group__key.html#ga0b477b584c8be68519a8d92f90355136">keyIncRef</a></div><div class="ttdeci">uint16_t keyIncRef(Key *key)</div><div class="ttdoc">Increment the reference counter of a Key object.</div><div class="ttdef"><b>Definition:</b> key.c:604</div></div>
<div class="ttc" id="agroup__key_html_ga0c4d031ab6ee02cf884c64e28a2ad151"><div class="ttname"><a href="group__key.html#ga0c4d031ab6ee02cf884c64e28a2ad151">keyDecRef</a></div><div class="ttdeci">uint16_t keyDecRef(Key *key)</div><div class="ttdoc">Decrement the reference counter of a Key object.</div><div class="ttdef"><b>Definition:</b> key.c:643</div></div>
<div class="ttc" id="agroup__key_html_ga3df95bbc2494e3e6703ece5639be5bb1"><div class="ttname"><a href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1">keyDel</a></div><div class="ttdeci">int keyDel(Key *key)</div><div class="ttdoc">A destructor for Key objects.</div><div class="ttdef"><b>Definition:</b> key.c:482</div></div>
</div><!-- fragment --><p> You can duplicate the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> to avoid aliasing, but then the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> in the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> has another identity: </p><div class="fragment"><div class="line"><a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * ks = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (1, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line">Key * k = <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;user:/ref/key&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>);</div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a> (ks, keyDup (k, <a class="code" href="group__key.html#gga9ff42b1e9a97222562bfda3dd1f8c735a3e04e17514f102f1e9217308d44e7612">KEY_CP_ALL</a>));</div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (ks);</div>
<div class="line"><span class="comment">// now we still can work with the key k!</span></div>
<div class="line"><a class="code" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1">keyDel</a> (k);</div>
<div class="ttc" id="agroup__key_html_gga9ff42b1e9a97222562bfda3dd1f8c735a3e04e17514f102f1e9217308d44e7612"><div class="ttname"><a href="group__key.html#gga9ff42b1e9a97222562bfda3dd1f8c735a3e04e17514f102f1e9217308d44e7612">KEY_CP_ALL</a></div><div class="ttdeci">@ KEY_CP_ALL</div><div class="ttdef"><b>Definition:</b> kdbenum.c:110</div></div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td><a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> where <code>toAppend</code> should be append </td></tr>
    <tr><td class="paramname">toAppend</td><td><a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> that will be appended to <code>ks</code> or deleted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> after appending </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on NULL pointers </td></tr>
    <tr><td class="paramname">-1</td><td>if appending failed (only on memory problems). The <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> will be deleted then.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga21eb9c3a14a604ee3a8bdc779232e7b7" title="Append all Keys in toAppend to the end of the KeySet ks.">ksAppend()</a> for appending a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> to another <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__key.html#ga0b477b584c8be68519a8d92f90355136" title="Increment the reference counter of a Key object.">keyIncRef()</a> for manually increasing a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>'s reference counter </dd></dl>

</div>
</div>
<a id="ac9cbdc933d7171037d47c6d4d78595d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9cbdc933d7171037d47c6d4d78595d1">&#9670;&nbsp;</a></span>append() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t kdb::KeySet::append </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;&#160;</td>
          <td class="paramname"><em>toAppend</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>append a keyset </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">toAppend</td><td>keyset to append</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of keys in the keyset</dd></dl>
<p>Append all Keys in <code>toAppend</code> to the end of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code>. <code>toAppend</code> <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> will be left unchanged.</p>
<p>If a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> is both in <code>toAppend</code> and <code>ks</code>, the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> in <code>ks</code> will be overwritten.</p>
<dl class="section post"><dt>Postcondition</dt><dd>Sorted <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> ks with all Keys it had before and additionally the Keys from toAppend</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> that will receive the Keys </td></tr>
    <tr><td class="paramname">toAppend</td><td>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> that provides the Keys that will be transferred</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the size of the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code> after transfer </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>on NULL pointers</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45" title="Appends a Key to the end of ks.">ksAppendKey()</a> </dd></dl>

</div>
</div>
<a id="a40e32f2d9f34f03fa8ec85945f49b630"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e32f2d9f34f03fa8ec85945f49b630">&#9670;&nbsp;</a></span>at()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkdb_1_1Key.html">Key</a> kdb::KeySet::at </td>
          <td>(</td>
          <td class="paramtype">elektraCursor&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lookup a key by index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>cursor position</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the found key </dd></dl>

</div>
</div>
<a id="a38f5159e39758aa632421d2fe7440633"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38f5159e39758aa632421d2fe7440633">&#9670;&nbsp;</a></span>clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kdb::KeySet::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear the keyset. </p>
<p>Keyset will be empty afterwards. </p>

</div>
</div>
<a id="a28fd33fdaecf1d57d4dddac7058f5d38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28fd33fdaecf1d57d4dddac7058f5d38">&#9670;&nbsp;</a></span>copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void kdb::KeySet::copy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy a keyset. </p>
<p>Replaces all keys in <code>this</code> with the ones from <code>other</code>. This is only a shallow copy. For a deep copy you need to manually <a class="el" href="classkdb_1_1Key.html#a51d5873239ba67ffd3b475522e647434">Key::dup</a> every key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">other</td><td>other keyset to copy</td></tr>
  </table>
  </dd>
</dl>
<p>Replace the content of a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> with another one. Most often you may want a duplicate of a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>, see <a class="el" href="group__keyset.html#gac59e4b328245463f1451f68d5106151c" title="Return a duplicate of a KeySet.">ksDup()</a> or append keys, see <a class="el" href="group__keyset.html#ga21eb9c3a14a604ee3a8bdc779232e7b7" title="Append all Keys in toAppend to the end of the KeySet ks.">ksAppend()</a>. In some situations you need to copy Keys from a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> to another <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>, for which this function exists.</p>
<dl class="section note"><dt>Note</dt><dd>You can also use it to clear a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> when you pass a NULL pointer as <code>source</code>.</dd></dl>
<dl class="section user"><dt>Implementation:</dt><dd>First all Keys in <code>dest</code> will be deleted. Afterwards the content of <code>source</code> will be added to the destination.</dd></dl>
<p>A flat copy is made, so Keys will not be duplicated, but their reference counter is updated, so both KeySets need to be deleted via <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> f (<a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> *ks)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> *c = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (20, ..., <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line">        <span class="comment">// c receives keys</span></div>
<div class="line">        <a class="code" href="group__keyset.html#gaba1f1dbea191f4d7e7eb3e4296ae7d5e">ksCopy</a> (ks, c); <span class="comment">// pass the KeySet to the caller</span></div>
<div class="line"> </div>
<div class="line">        <a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (c);</div>
<div class="line">}       <span class="comment">// caller needs to ksDel (ks)</span></div>
<div class="ttc" id="agroup__keyset_html_gaba1f1dbea191f4d7e7eb3e4296ae7d5e"><div class="ttname"><a href="group__keyset.html#gaba1f1dbea191f4d7e7eb3e4296ae7d5e">ksCopy</a></div><div class="ttdeci">int ksCopy(KeySet *dest, const KeySet *source)</div><div class="ttdoc">Replace the content of a KeySet with another one.</div><div class="ttdef"><b>Definition:</b> keyset.c:404</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>an initialized <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> or NULL </td></tr>
    <tr><td class="paramname">dest</td><td>an initialized <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>, where the Keys from <code>source</code> get copied to</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
    <tr><td class="paramname">0</td><td>if <code>dest</code> was cleared successfully (<code>source</code> is NULL) </td></tr>
    <tr><td class="paramname">-1</td><td>when <code>dest</code> is a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> for creating a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a> for deleting an existing <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#gac59e4b328245463f1451f68d5106151c" title="Return a duplicate of a KeySet.">ksDup()</a> for duplicating an existing <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__key.html#ga505575ebef060066984fe0f590081e37" title="Copy or clear a key.">keyCopy()</a> for copying Keys </dd></dl>

</div>
</div>
<a id="ab283da798a7670d5c3f0e1a5b821e666"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab283da798a7670d5c3f0e1a5b821e666">&#9670;&nbsp;</a></span>cut()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkdb_1_1KeySet.html">KeySet</a> kdb::KeySet::cut </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkdb_1_1Key.html">Key</a>&#160;</td>
          <td class="paramname"><em>k</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cuts out all Keys from <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code> that are below or at <code>cutpoint</code>. </p>
<p>Searches for the <code>cutpoint</code> inside the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code>. If found, it cuts out this <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> and everything which is below (see <a class="el" href="group__keytest.html#ga03332b5d97c76a4fd2640aca4762b8df" title="Check if the Key check is below the Key key or not.">keyIsBelow()</a>) this <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>. These Keys will be missing in the keyset <code>ks</code>. Instead, they will be moved to the returned <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>. If <code>cutpoint</code> is not found an empty <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> is returned and <code>ks</code> is not changed.</p>
<p>The cursor will stay at the same <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> as it was before. If the cursor was inside the region of cut (moved) Keys, the cursor will be set to the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> before the <code>cutpoint</code>.</p>
<p>If you use <a class="el" href="group__keyset.html#ga6b00cf82b59af4d883a9bad6cf4a4a4a" title="Cuts out all Keys from KeySet ks that are below or at cutpoint.">ksCut()</a> on a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> you got from <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve Keys from a Key database in an atomic and universal way.">kdbGet()</a> and plan to use <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set Keys to a Key database in an atomic and universal way.">kdbSet()</a> later, make sure that you keep all Keys that should not be removed permanently. You have to keep the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> that was returned and the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> <code>ks</code>.</p>
<dl class="section user"><dt>Example:</dt><dd></dd></dl>
<p>You have the keyset <code>ks:</code> </p><ul>
<li><code>system:/mountpoint/interest</code> </li>
<li><code>system:/mountpoint/interest/folder</code> </li>
<li><code>system:/mountpoint/interest/folder/key1</code> </li>
<li><code>system:/mountpoint/interest/folder/key2</code> </li>
<li><code>system:/mountpoint/other/key1</code> </li>
</ul>
<p>When you use </p><div class="fragment"><div class="line">        Key * parentKey = <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;system:/mountpoint/interest&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>);</div>
<div class="line">        KDB * <a class="code" href="namespacekdb.html">kdb</a> = <a class="code" href="group__kdb.html#ga844e1299a84c3fbf1d3a905c5c893ba5">kdbOpen</a> (NULL, parentKey);</div>
<div class="line">        <a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * ks = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (0, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line">        <a class="code" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1">kdbGet</a> (<a class="code" href="namespacekdb.html">kdb</a>, ks, parentKey);</div>
<div class="line">        <a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * returned = <a class="code" href="group__keyset.html#ga6b00cf82b59af4d883a9bad6cf4a4a4a">ksCut</a> (ks, parentKey);</div>
<div class="line">        <a class="code" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf">kdbSet</a> (<a class="code" href="namespacekdb.html">kdb</a>, ks, parentKey); <span class="comment">// all keys below cutpoint are now removed</span></div>
<div class="line">        <a class="code" href="group__kdb.html#gadb54dc9fda17ee07deb9444df745c96f">kdbClose</a> (<a class="code" href="namespacekdb.html">kdb</a>, parentKey);</div>
<div class="ttc" id="agroup__kdb_html_ga11436b058408f83d303ca5e996832bcf"><div class="ttname"><a href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf">kdbSet</a></div><div class="ttdeci">int kdbSet(KDB *handle, KeySet *ks, Key *parentKey)</div><div class="ttdoc">Set Keys to a Key database in an atomic and universal way.</div><div class="ttdef"><b>Definition:</b> kdb.c:1799</div></div>
<div class="ttc" id="agroup__kdb_html_ga28e385fd9cb7ccfe0b2f1ed2f62453a1"><div class="ttname"><a href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1">kdbGet</a></div><div class="ttdeci">int kdbGet(KDB *handle, KeySet *ks, Key *parentKey)</div><div class="ttdoc">Retrieve Keys from a Key database in an atomic and universal way.</div><div class="ttdef"><b>Definition:</b> kdb.c:1220</div></div>
<div class="ttc" id="agroup__kdb_html_ga844e1299a84c3fbf1d3a905c5c893ba5"><div class="ttname"><a href="group__kdb.html#ga844e1299a84c3fbf1d3a905c5c893ba5">kdbOpen</a></div><div class="ttdeci">KDB * kdbOpen(const KeySet *contract, Key *errorKey)</div><div class="ttdoc">Opens the session with the Key database.</div><div class="ttdef"><b>Definition:</b> kdb.c:413</div></div>
<div class="ttc" id="agroup__kdb_html_gadb54dc9fda17ee07deb9444df745c96f"><div class="ttname"><a href="group__kdb.html#gadb54dc9fda17ee07deb9444df745c96f">kdbClose</a></div><div class="ttdeci">int kdbClose(KDB *handle, Key *errorKey)</div><div class="ttdoc">Closes the session with the Key database.</div><div class="ttdef"><b>Definition:</b> kdb.c:585</div></div>
<div class="ttc" id="agroup__keyset_html_ga6b00cf82b59af4d883a9bad6cf4a4a4a"><div class="ttname"><a href="group__keyset.html#ga6b00cf82b59af4d883a9bad6cf4a4a4a">ksCut</a></div><div class="ttdeci">KeySet * ksCut(KeySet *ks, const Key *cutpoint)</div><div class="ttdoc">Cuts out all Keys from KeySet ks that are below or at cutpoint.</div><div class="ttdef"><b>Definition:</b> keyset.c:1383</div></div>
<div class="ttc" id="anamespacekdb_html"><div class="ttname"><a href="namespacekdb.html">kdb</a></div><div class="ttdoc">This is the main namespace for the C++ binding and libraries.</div><div class="ttdef"><b>Definition:</b> backend.hpp:31</div></div>
</div><!-- fragment --><p> Then in <code>returned</code> are:</p><ul>
<li><code>system:/mountpoint/interest</code> </li>
<li><code>system:/mountpoint/interest/folder</code> </li>
<li><code>system:/mountpoint/interest/folder/key1</code> </li>
<li><code>system:/mountpoint/interest/folder/key2</code> </li>
</ul>
<p>And in <code>ks</code> are:</p><ul>
<li><code>system:/mountpoint/other/key1</code> </li>
</ul>
<p>So <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set Keys to a Key database in an atomic and universal way.">kdbSet()</a> permanently removes all keys at or below <code>system:/mountpoint/interest</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td>the Keyset to cut. It will be modified by removing all Keys at or below the cutpoint. </td></tr>
    <tr><td class="paramname">cutpoint</td><td>the point where to cut out the Keyset</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new allocated <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> which needs to deleted with <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>. The <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> consists of all Keys (of the original <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> ks) below the cutpoint. If the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> cutpoint exists, it will also be appended. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on NULL pointers, no <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> name or allocation problems</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve Keys from a Key database in an atomic and universal way.">kdbGet()</a> for an explanation on why you might <a class="el" href="classkdb_1_1KeySet.html#a65208974b44da0162ef70dd7a173748f" title="Generic lookup+get for keysets.">get</a> more Keys than you requested. </dd></dl>

</div>
</div>
<a id="ad3f2b936d66729690e8a8a45b5074baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3f2b936d66729690e8a8a45b5074baa">&#9670;&nbsp;</a></span>dup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ckdb::KeySet * kdb::KeySet::dup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duplicate a keyset. </p>
<dl class="section return"><dt>Returns</dt><dd>a copy of the keys</dd></dl>
<p>This is only a shallow copy. For a deep copy you need to dup every key.</p>
<p>Return a duplicate of a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>. Objects created with <a class="el" href="group__keyset.html#gac59e4b328245463f1451f68d5106151c" title="Return a duplicate of a KeySet.">ksDup()</a> must be destroyed with <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<p>Memory will be allocated as needed for dynamic properties, so you need to <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a> the returned pointer.</p>
<p>A flat copy is made, so the Keys will not be duplicated, but their reference counter is updated, so both KeySets need to be deleted via <a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>has to be an initialized <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a flat copy of source on success </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c" title="Allocate, initialize and return a new KeySet object.">ksNew()</a> for creating a new <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
<a class="el" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8" title="A destructor for KeySet objects.">ksDel()</a> for deleting a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd>
<dd>
keyDup() for <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> duplication </dd></dl>

</div>
</div>
<a id="a65208974b44da0162ef70dd7a173748f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65208974b44da0162ef70dd7a173748f">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">T kdb::KeySet::get </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914">elektraLookupFlags</a>&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a00738455e0ae843c8720809d8287f370">KDB_O_NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generic lookup+get for keysets. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the key name to get </td></tr>
    <tr><td class="paramname">options</td><td>the options to be passed to <a class="el" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a" title="Look for a Key contained in ks that matches the name of the key.">lookup()</a></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">KeyNotFoundException</td><td>if no key found</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>To specialize more complex types (which are generic themselves) you can also specialize KeySetTypeWrapper&lt;T&gt;.</dd></dl>
<p>Use </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="keysetget_8hpp.html">keysetget.hpp</a>&gt;</span></div>
<div class="ttc" id="akeysetget_8hpp_html"><div class="ttname"><a href="keysetget_8hpp.html">keysetget.hpp</a></div></div>
</div><!-- fragment --><p> to include specializations for std types.</p>
<dl class="section return"><dt>Returns</dt><dd>the requested type </dd></dl>

</div>
</div>
<a id="a4e9a3906e0b18a783f8a6e8bdbec9ed0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9a3906e0b18a783f8a6e8bdbec9ed0">&#9670;&nbsp;</a></span>getKeySet()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ckdb::KeySet * kdb::KeySet::getKeySet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Passes out the raw keyset pointer. </p>
<p>This function exists so that pure C functions that do not have a C++ binding can be called.</p>
<dl class="section return"><dt>Returns</dt><dd>pointer to internal ckdb <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> </dd></dl>

</div>
</div>
<a id="a2b8537e388edfbb6941d771106c0ae3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b8537e388edfbb6941d771106c0ae3a">&#9670;&nbsp;</a></span>lookup() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkdb_1_1Key.html">Key</a> kdb::KeySet::lookup </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkdb_1_1Key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914">elektraLookupFlags</a>&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a00738455e0ae843c8720809d8287f370">KDB_O_NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Look for a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> contained in <code>ks</code> that matches the name of the <code>key</code>. </p>
<dl class="section note"><dt>Note</dt><dd>Applications should only use <a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> with cascading Keys (<a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> name starting with <code>/</code>). Furthermore, a lookup should be done for every <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> (also when iterating over Keys) so that the specifications are honored correctly. Keys of all namespaces need to be present so that <a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> can work correctly, so make sure to also use <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve Keys from a Key database in an atomic and universal way.">kdbGet()</a> with a cascading <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>.</dd></dl>
<p><a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> is designed to let you work with a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> containing all Keys of the application. The idea is to fully <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve Keys from a Key database in an atomic and universal way.">kdbGet()</a> the whole configuration of your application and process it all at once with many <code><a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a></code>.</p>
<p>This function is efficient (at least using binary search). Together with <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve Keys from a Key database in an atomic and universal way.">kdbGet()</a>, which you can use to load the whole configuration, you can write very effective and short code for configuration:</p>
<div class="fragment"><div class="line">Key * key = <a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a> (<span class="stringliteral">&quot;/sw/tests/myapp/#0/current/&quot;</span>,  <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>);</div>
<div class="line">KDB * handle = <a class="code" href="group__kdb.html#ga844e1299a84c3fbf1d3a905c5c893ba5">kdbOpen</a> (NULL, key);</div>
<div class="line"><a class="code" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1">kdbGet</a> (handle, myConfig, key);</div>
<div class="line">Key * result = <a class="code" href="group__keyset.html#gad65d2cdcbb5381194a1688e169af8a83">ksLookupByName</a> (myConfig, <span class="stringliteral">&quot;/sw/tests/myapp/#0/current/testkey1&quot;</span>, 0);</div>
<div class="ttc" id="agroup__keyset_html_gad65d2cdcbb5381194a1688e169af8a83"><div class="ttname"><a href="group__keyset.html#gad65d2cdcbb5381194a1688e169af8a83">ksLookupByName</a></div><div class="ttdeci">Key * ksLookupByName(KeySet *ks, const char *name, elektraLookupFlags options)</div><div class="ttdoc">Convenience method to look for a Key contained in ks with name name.</div><div class="ttdef"><b>Definition:</b> keyset.c:2531</div></div>
</div><!-- fragment --><p> This is the way programs should get their configuration and search for the values. It is guaranteed, that more namespaces can be added easily and that all values can be set by admin and user. Furthermore, using the kdb-tool, it is possible to introspect which values an application will get (by doing the same cascading lookup).</p>
<p>If found, a pointer to the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> is returned. If not found a NULL pointer is returned.</p>
<p>Cascading lookups will by default search in all namespaces (proc:/, dir:/, user:/ and system:/), but will also correctly consider the specification (=metadata) in spec:/:</p>
<ul>
<li><code>override/#</code> will make sure that another <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> is considered before</li>
<li><code>namespace/#</code> will change the number and/or order in which the namespaces are searched</li>
<li><code>fallback/#</code> will search for other Keys when the other possibilities up to now were not successful</li>
<li><code>default</code> to return the given value when not even <code>fallback</code> Keys were found.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>override and fallback work recursively, while default does not.</dd></dl>
<p>This process is very flexible, but it would be boring to manually follow all this links to find out which <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> will be taken in the end. Use <code>kdb get -v</code> to trace the Keys.</p>
<dl class="section user"><dt>KDB_O_POP</dt><dd>When <a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a52fb5f2cc86773d393da62bebebf7984" title="Pop Parent out of keyset key in ksLookup().">KDB_O_POP</a> is set the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> which was found will be <a class="el" href="group__keyset.html#gae42530b04defb772059de0600159cf69" title="Remove and return the last Key of ks.">ksPop()</a>ed.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Like in <a class="el" href="group__keyset.html#gae42530b04defb772059de0600159cf69" title="Remove and return the last Key of ks.">ksPop()</a> the popped <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> always needs to be <a class="el" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1" title="A destructor for Key objects.">keyDel()</a> afterwards, even if it is appended to another <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> f (<a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * iterator, <a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * <a class="code" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">lookup</a>)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="classkdb_1_1KeySet.html#a4eac9850fa4f06c07a5306befc3e4377">KeySet</a> * <a class="code" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">append</a> = <a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a> (<a class="code" href="group__keyset.html#ga7474ad6b0a0fa969dbdf267ba5770eee">ksGetSize</a> (<a class="code" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">lookup</a>), <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line">        ssize_t ksSize = <a class="code" href="group__keyset.html#ga7474ad6b0a0fa969dbdf267ba5770eee">ksGetSize</a> (iterator);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (elektraCursor it = 0; it &lt; ksSize; ++it)</div>
<div class="line">        {</div>
<div class="line">                Key * current = <a class="code" href="group__keyset.html#gab3fb5e067c672d9fd60a4022b2ae9dd1">ksAtCursor</a> (iterator, it);</div>
<div class="line">                Key * key = <a class="code" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f">ksLookup</a> (<a class="code" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">lookup</a>, current, <a class="code" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a52fb5f2cc86773d393da62bebebf7984">KDB_O_POP</a>);</div>
<div class="line">                <span class="comment">// do something...</span></div>
<div class="line">                <a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a> (<a class="code" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">append</a>, key); <span class="comment">// now append it to append, not lookup!</span></div>
<div class="line">                <a class="code" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1">keyDel</a> (key);              <span class="comment">// make sure to ALWAYS delete poped keys.</span></div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="group__keyset.html#ga21eb9c3a14a604ee3a8bdc779232e7b7">ksAppend</a> (<a class="code" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">lookup</a>, <a class="code" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">append</a>);</div>
<div class="line">        <span class="comment">// now lookup needs to be sorted only once, append never</span></div>
<div class="line">        <a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (<a class="code" href="classkdb_1_1KeySet.html#a0d4b2f3aa9f58d10053561135b50233e">append</a>);</div>
<div class="line">}</div>
<div class="ttc" id="aclasskdb_1_1KeySet_html_a2b8537e388edfbb6941d771106c0ae3a"><div class="ttname"><a href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a">kdb::KeySet::lookup</a></div><div class="ttdeci">Key lookup(const Key &amp;k, const elektraLookupFlags options=KDB_O_NONE) const</div><div class="ttdoc">Look for a Key contained in ks that matches the name of the key.</div><div class="ttdef"><b>Definition:</b> keyset.hpp:720</div></div>
<div class="ttc" id="agroup__keyset_html_ga21eb9c3a14a604ee3a8bdc779232e7b7"><div class="ttname"><a href="group__keyset.html#ga21eb9c3a14a604ee3a8bdc779232e7b7">ksAppend</a></div><div class="ttdeci">ssize_t ksAppend(KeySet *ks, const KeySet *toAppend)</div><div class="ttdoc">Append all Keys in toAppend to the end of the KeySet ks.</div><div class="ttdef"><b>Definition:</b> keyset.c:1000</div></div>
<div class="ttc" id="agroup__keyset_html_ga60f1ddcf23272f2b29b90e92ebe9b56f"><div class="ttname"><a href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f">ksLookup</a></div><div class="ttdeci">Key * ksLookup(KeySet *ks, Key *key, elektraLookupFlags options)</div><div class="ttdoc">Look for a Key contained in ks that matches the name of the key.</div><div class="ttdef"><b>Definition:</b> keyset.c:2467</div></div>
<div class="ttc" id="agroup__keyset_html_ggada05f4bbf46fde81d0d57df86e73d914a52fb5f2cc86773d393da62bebebf7984"><div class="ttname"><a href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a52fb5f2cc86773d393da62bebebf7984">KDB_O_POP</a></div><div class="ttdeci">@ KDB_O_POP</div><div class="ttdoc">Pop Parent out of keyset key in ksLookup().</div><div class="ttdef"><b>Definition:</b> kdbenum.c:186</div></div>
</div><!-- fragment --><p> This is also a nice example how a complete application with <a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> can look like.</p>
<dl class="section user"><dt>KDB_O_DEL</dt><dd>Passing <a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a66a5380c120f25f28f49848c4a863ead" title="Delete parentKey key in ksLookup().">KDB_O_DEL</a> will cause the deletion of the parameter <code>key</code> using <a class="el" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1" title="A destructor for Key objects.">keyDel()</a>.</dd></dl>
<dl class="section user"><dt>Hybrid search</dt><dd>When Elektra is compiled with <code>ENABLE_OPTIMIZATIONS=ON</code> a hybrid search decides dynamically between the binary search and the <a href="https://master.libelektra.org/doc/dev/data-structures.md#order-preserving-minimal-perfect-hash-map-aka-opmphm">OPMPHM</a>. The hybrid search can be overruled by passing <a class="el" href="kdbhelper_8h.html#a93673533c4c8eb1fdfca76b98c5f49b0afe9f6ff6e374540baf600a918b07ee6e" title="Overrule ksLookup search predictor to use OPMPHM, make sure to set ENABLE_OPTIMIZATIONS=ON at cmake.">KDB_O_OPMPHM</a> or <a class="el" href="kdbhelper_8h.html#a93673533c4c8eb1fdfca76b98c5f49b0ac67a43bd273203575090d26010f6c995" title="Overrule ksLookup search predictor to use Binary search for lookup.">KDB_O_BINSEARCH</a> in the options to <a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a>.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td>the <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> that should be searched </td></tr>
    <tr><td class="paramname">key</td><td>the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> object you are looking for </td></tr>
    <tr><td class="paramname">options</td><td>of type <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914" title="Options to change the default behavior of ksLookup() functions.">elektraLookupFlags</a> with some <code>KDB_O_*</code> option bits - as explained above</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>pointer to the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> found </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if no <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> has been found </td></tr>
    <tr><td class="paramname">0</td><td>on NULL pointers</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#gad65d2cdcbb5381194a1688e169af8a83" title="Convenience method to look for a Key contained in ks with name name.">ksLookupByName()</a> to <a class="el" href="classkdb_1_1KeySet.html#a38abda394a4acf2267d5fe718e272759" title="Search in a key set, either yielding the actual index of the key, if the ley has been found within th...">search</a> by a name given by a string </dd>
<dd>
<a class="el" href="group__keyset.html#ga7474ad6b0a0fa969dbdf267ba5770eee" title="Return the number of Keys that ks contains.">ksGetSize()</a>, <a class="el" href="group__keyset.html#gab3fb5e067c672d9fd60a4022b2ae9dd1" title="Return Key at given position pos.">ksAtCursor()</a> for iterating over a <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>That the internal key cursor will point to the found key </dd></dl>

</div>
</div>
<a id="a0ef071747608900be478219e4a040612"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ef071747608900be478219e4a040612">&#9670;&nbsp;</a></span>lookup() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkdb_1_1Key.html">Key</a> kdb::KeySet::lookup </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914">elektraLookupFlags</a>&#160;</td>
          <td class="paramname"><em>options</em> = <code><a class="el" href="group__keyset.html#ggada05f4bbf46fde81d0d57df86e73d914a00738455e0ae843c8720809d8287f370">KDB_O_NONE</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lookup a key by name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name to look for </td></tr>
    <tr><td class="paramname">options</td><td>some options to pass</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the found key </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classkdb_1_1KeySet.html#a2b8537e388edfbb6941d771106c0ae3a" title="Look for a Key contained in ks that matches the name of the key.">lookup</a> (const <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> &amp;<a class="el" href="group__key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>, const <a class="el" href="group__keyset.html#gada05f4bbf46fde81d0d57df86e73d914" title="Options to change the default behavior of ksLookup() functions.">elektraLookupFlags</a> options)</dd></dl>
<dl class="section note"><dt>Note</dt><dd>That the internal key cursor will point to the found key </dd></dl>

</div>
</div>
<a id="a1c54736b7206bc2253d02a5bf4b3ccfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c54736b7206bc2253d02a5bf4b3ccfb">&#9670;&nbsp;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkdb_1_1KeySet.html">KeySet</a> &amp; kdb::KeySet::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classkdb_1_1KeySet.html">KeySet</a> const &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Duplicate a keyset. </p>
<p>This keyset will be a duplicate of the other afterwards.</p>
<dl class="section note"><dt>Note</dt><dd>that they still reference to the same Keys, so if you change key values also the keys in the original keyset will be changed. </dd></dl>

</div>
</div>
<a id="a7f207457a1c12633a1a5301a3a1bbaed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f207457a1c12633a1a5301a3a1bbaed">&#9670;&nbsp;</a></span>pop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classkdb_1_1Key.html">Key</a> kdb::KeySet::pop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Remove and return the last <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> of <code>ks</code>. </p>
<p>The reference counter of the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> will be decremented by one.</p>
<p>The <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>'s cursor will not be affected if it did not point to the popped <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a>.</p>
<dl class="section note"><dt>Note</dt><dd>You need to <a class="el" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1" title="A destructor for Key objects.">keyDel()</a> the <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> afterwards, if you don't append it to another <a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a>. It has the same semantics like a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> allocated with <a class="el" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89" title="A practical way to fully create a Key object in one step.">keyNew()</a> or keyDup().</dd></dl>
<div class="fragment"><div class="line">ks1=<a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a>(0, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line">ks2=<a class="code" href="group__keyset.html#ga671e1aaee3ae9dc13b4834a4ddbd2c3c">ksNew</a>(0, <a class="code" href="group__keyset.html#ga7a28fce3773b2c873c94ac80b8b4cd54">KS_END</a>);</div>
<div class="line"> </div>
<div class="line">k1=<a class="code" href="group__key.html#gad23c65b44bf48d773759e1f9a4d43b89">keyNew</a>(<span class="stringliteral">&quot;user:/name&quot;</span>, <a class="code" href="group__key.html#gga9b703ca49f48b482def322b77d3e6bc8aa8adb6fcb92dec58fb19410eacfdd403">KEY_END</a>); <span class="comment">// ref counter 0</span></div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a>(ks1, k1); <span class="comment">// ref counter 1</span></div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a>(ks2, k1); <span class="comment">// ref counter 2</span></div>
<div class="line"> </div>
<div class="line">k1=<a class="code" href="group__keyset.html#gae42530b04defb772059de0600159cf69">ksPop</a> (ks1); <span class="comment">// ref counter 1</span></div>
<div class="line">k1=<a class="code" href="group__keyset.html#gae42530b04defb772059de0600159cf69">ksPop</a> (ks2); <span class="comment">// ref counter 0, like after keyNew()</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__keyset.html#gaa5a1d467a4d71041edce68ea7748ce45">ksAppendKey</a>(ks1, k1); <span class="comment">// ref counter 1</span></div>
<div class="line"> </div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (ks1); <span class="comment">// key is deleted too</span></div>
<div class="line"><a class="code" href="group__keyset.html#ga27e5c16473b02a422238c8d970db7ac8">ksDel</a> (ks2);</div>
<div class="ttc" id="agroup__keyset_html_gae42530b04defb772059de0600159cf69"><div class="ttname"><a href="group__keyset.html#gae42530b04defb772059de0600159cf69">ksPop</a></div><div class="ttdeci">Key * ksPop(KeySet *ks)</div><div class="ttdoc">Remove and return the last Key of ks.</div><div class="ttdef"><b>Definition:</b> keyset.c:1504</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td><a class="el" href="classkdb_1_1KeySet.html" title="A keyset holds together a set of keys.">KeySet</a> to pop a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> from</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the last <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> of <code>ks</code> </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>if <code>ks</code> is empty or a NULL pointer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>1.0.0 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> to <a class="el" href="classkdb_1_1KeySet.html#a7f207457a1c12633a1a5301a3a1bbaed" title="Remove and return the last Key of ks.">pop</a> Keys by name </dd>
<dd>
<a class="el" href="group__keyset.html#gaba1f1dbea191f4d7e7eb3e4296ae7d5e" title="Replace the content of a KeySet with another one.">ksCopy()</a> to <a class="el" href="classkdb_1_1KeySet.html#a7f207457a1c12633a1a5301a3a1bbaed" title="Remove and return the last Key of ks.">pop</a> all Keys </dd></dl>

</div>
</div>
<a id="a38abda394a4acf2267d5fe718e272759"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38abda394a4acf2267d5fe718e272759">&#9670;&nbsp;</a></span>search() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t kdb::KeySet::search </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classkdb_1_1Key.html">Key</a> &amp;&#160;</td>
          <td class="paramname"><em>toSearch</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search in a key set, either yielding the actual index of the key, if the ley has been found within the key set, or a negative value indicating the insertion index of the key, if the key would be inserted. </p>
<div class="fragment"><div class="line">ssize_t result = <a class="code" href="group__keyset.html#gac59817ac58072708092fbeb87600beb1">ksSearch</a>(ks, key);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (result &gt;= 0)</div>
<div class="line">{</div>
<div class="line">        ssize_t position = result;</div>
<div class="line">        <span class="comment">// The key already exist in key set.</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">        ssize_t insertpos = -result-1;</div>
<div class="line">        <span class="comment">// The key was not found in key set.</span></div>
<div class="line">}</div>
<div class="ttc" id="agroup__keyset_html_gac59817ac58072708092fbeb87600beb1"><div class="ttname"><a href="group__keyset.html#gac59817ac58072708092fbeb87600beb1">ksSearch</a></div><div class="ttdeci">ssize_t ksSearch(const KeySet *ks, const Key *key)</div><div class="ttdoc">Search in a key set, either yielding the actual index of the key, if the ley has been found within th...</div><div class="ttdef"><b>Definition:</b> keyset.c:837</div></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td>the keyset to work with </td></tr>
    <tr><td class="paramname">key</td><td>the key to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>position where the key is (&gt;=0) if the key was found </dd>
<dd>
-insertpos -1 (&lt; 0) if the key was not found so to get the insertpos simple do: -insertpos -1 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> for retrieving the found <a class="el" href="group__key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> </dd></dl>

</div>
</div>
<a id="af7478af835e648219b11a3e0268b8eaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7478af835e648219b11a3e0268b8eaf">&#9670;&nbsp;</a></span>search() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t kdb::KeySet::search </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Search in a key set, either yielding the actual index of the key, if the ley has been found within the key set, or a negative value indicating the insertion index of the key, if the key would be inserted. </p>
<div class="fragment"><div class="line">ssize_t result = <a class="code" href="group__keyset.html#gac59817ac58072708092fbeb87600beb1">ksSearch</a>(ks, key);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (result &gt;= 0)</div>
<div class="line">{</div>
<div class="line">        ssize_t position = result;</div>
<div class="line">        <span class="comment">// The key already exist in key set.</span></div>
<div class="line">} <span class="keywordflow">else</span> {</div>
<div class="line">        ssize_t insertpos = -result-1;</div>
<div class="line">        <span class="comment">// The key was not found in key set.</span></div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ks</td><td>the keyset to work with </td></tr>
    <tr><td class="paramname">key</td><td>the key to check </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>position where the key is (&gt;=0) if the key was found </dd>
<dd>
-insertpos -1 (&lt; 0) if the key was not found so to get the insertpos simple do: -insertpos -1 </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a> for retrieving the found <a class="el" href="group__key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a></dd></dl>
<dl class="section note"><dt>Note</dt><dd>Accepts a keyname as string instead of a <a class="el" href="classkdb_1_1Key.html" title="Key is an essential class that encapsulates key name , value  and metainfo .">Key</a> object. </dd></dl>

</div>
</div>
<a id="ab01c5c46e4c0802560b8f15886af89c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab01c5c46e4c0802560b8f15886af89c4">&#9670;&nbsp;</a></span>size()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t kdb::KeySet::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The size of the keyset. </p>
<dl class="section return"><dt>Returns</dt><dd>the number of keys in the keyset </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="keyset_8hpp.html">keyset.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
