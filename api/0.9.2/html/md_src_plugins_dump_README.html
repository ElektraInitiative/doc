<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: dump</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Plugin: dump </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the dump plugin is in keys below</li>
<li>infos/author = Markus Raab <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'li'+'bel'+'ek'+'tra'+'.o'+'rg'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@l<span style="display: none;">.nosp@m.</span>ibele<span style="display: none;">.nosp@m.</span>ktra<span style="display: none;">.nosp@m.</span>.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/needs =</li>
<li>infos/provides = storage/dump</li>
<li>infos/recommends =</li>
<li>infos/placements = getstorage setstorage</li>
<li>infos/status = productive maintained conformant unittest tested nodep -1000</li>
<li>infos/metadata =</li>
<li>infos/description = Dumps into a format tailored for complete KeySet semantics</li>
</ul>
<h1><a class="anchor" id="src_plugins_dump_README_md"></a>
Introduction</h1>
<p>This plugin is a storage plugin that supports full Elektra semantics. Combined with a resolver plugin it already assembles a fully featured backend. No other plugins are needed.</p>
<h1><a class="anchor" id="autotoc_md194"></a>
Format</h1>
<p>The file format edf (Elektra dump format) consists of a simple command language with arguments. When an argument is binary or string data the length needs to be passed first. Because the size is known in advance, any binary dump is accepted. Terminating characters present no problem. The commands are assembled similar to the ones present in Elektra’s API.</p>
<p>The file starts with the magic word <code>kdbOpen</code> followed by a version number. Processing can be stopped immediately when it is not in Elektra’s dump format at all. A wrong version number most likely indicates that the version of the plugin is too old to recognize all commands in the file. The basic idea of the dump plugin is to write out the way that the KeySet needs to be constructed. The dump plugin interprets such a file. The file also looks similar to C code that would create the KeySet. Keys can contain any binary values and arbitrary metadata and are still stored and parsed correctly. The dump plugin can even reconstruct pointers to metadata to save memory. When a pointer to the same region of memory is found, a special command <code>keyCopyMeta</code> is written out that is able to reconstruct the data structure the way it was before. The commands were designed to make parsing of the file an easy task.</p>
<h2><a class="anchor" id="autotoc_md195"></a>
Format Examples</h2>
<p>The serialized configuration can look like (0 bytes at end of strings are omitted):</p>
<div class="fragment"><div class="line">kdbOpen 1</div>
<div class="line">ksNew 207</div>
<div class="line">keyNew 27 1</div>
<div class="line">system/elektra/mountpoints</div>
<div class="line">keyMeta 8 27</div>
<div class="line">commentBelow are the mount points.</div>
<div class="line">keyEnd</div>
<div class="line">keyNew 32 19</div>
<div class="line">system/elektra/mountpoints/dbusserialized Backend</div>
<div class="line">keyEnd keyNew 39 1</div>
<div class="line">system/elektra/mountpoints/dbus/config</div>
<div class="line">keyMeta 8 72</div>
<div class="line">commentThis is a configuration for a backend, see subkeys for more information</div>
<div class="line">keyEnd</div>
<div class="line">keyNew 53 1</div>
<div class="line">system/elektra/mountpoints/fstab/config/struct/FStab</div>
<div class="line">keyCopyMeta 59 11</div>
<div class="line">system/elektra/mountpoints/file</div>
<div class="line">systems/config/struct/FStabcheck/type</div>
<div class="line">keyEnd</div>
<div class="line">ksEnd</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md196"></a>
Limitations</h1>
<p>(status -1000)</p>
<ul>
<li>It is quite slow</li>
<li>Files cannot easily edited by hand</li>
</ul>
<h1><a class="anchor" id="autotoc_md197"></a>
Examples</h1>
<p>Export a KeySet using <code>dump</code>:</p>
<div class="fragment"><div class="line">kdb export system/example dump &gt; example.ecf</div>
</div><!-- fragment --><p>Import a KeySet using <code>dump</code>:</p>
<div class="fragment"><div class="line">cat example.ecf | kdb import system/example dump</div>
</div><!-- fragment --><p>Using grep/diff or other Unix tools on the dump file. Make sure that you treat it as text file, e.g.:</p>
<div class="fragment"><div class="line">grep --text &#39;mount points&#39; example.ecf</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
