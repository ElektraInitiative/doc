<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Elektra: Interface for mounting backends</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Interface for mounting backends</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#gad3c84032644ff56feb44106a7924d3fe">elektraMountOpen</a> (<a class="el" href="struct__KDB.html">KDB</a> *kdb, <a class="el" href="struct__KeySet.html">KeySet</a> *config, <a class="el" href="struct__KeySet.html">KeySet</a> *modules, <a class="el" href="struct__Key.html">Key</a> *errorKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#ga97152dfe71e1c834476d5dd12c71c54f">elektraMountDefault</a> (<a class="el" href="struct__KDB.html">KDB</a> *kdb, <a class="el" href="struct__KeySet.html">KeySet</a> *modules, <a class="el" href="struct__Key.html">Key</a> *errorKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#ga54e32ffc628b2ca1e1876efb6d28cfc7">elektraMountModules</a> (<a class="el" href="struct__KDB.html">KDB</a> *kdb, <a class="el" href="struct__KeySet.html">KeySet</a> *modules, <a class="el" href="struct__Key.html">Key</a> *errorKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#ga6362fc7585d7a308c08005cb3cb1a4cd">elektraMountVersion</a> (<a class="el" href="struct__KDB.html">KDB</a> *kdb, <a class="el" href="struct__Key.html">Key</a> *errorKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#ga746a6f6758e8cdfb985b4c46a0e246ff">elektraMountBackend</a> (<a class="el" href="struct__KDB.html">KDB</a> *kdb, <a class="el" href="struct__Backend.html">Backend</a> *backend, <a class="el" href="struct__Key.html">Key</a> *errorKey)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#ga0cdbb658c5ac280672e4ac22419075f1">elektraMountGetMountpoint</a> (<a class="el" href="struct__KDB.html">KDB</a> *handle, const <a class="el" href="struct__Key.html">Key</a> *where)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct__Backend.html">Backend</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mount.html#gaa66ed093e4c71d97018ffc66d46d0e1f">elektraMountGetBackend</a> (<a class="el" href="struct__KDB.html">KDB</a> *handle, const <a class="el" href="struct__Key.html">Key</a> *key)</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga746a6f6758e8cdfb985b4c46a0e246ff"></a><!-- doxytag: member="mount.c::elektraMountBackend" ref="ga746a6f6758e8cdfb985b4c46a0e246ff" args="(KDB *kdb, Backend *backend, Key *errorKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraMountBackend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__Backend.html">Backend</a> *&nbsp;</td>
          <td class="paramname"> <em>backend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>errorKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mounts a backend into the trie.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>kdb</em>&nbsp;</td><td>the handle to work with </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>backend</em>&nbsp;</td><td>the backend to mount </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>errorKey</em>&nbsp;</td><td>the key used to report warnings </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 on failure </dd>
<dd>
1 on success </dd></dl>

</div>
</div>
<a class="anchor" id="ga97152dfe71e1c834476d5dd12c71c54f"></a><!-- doxytag: member="mount.c::elektraMountDefault" ref="ga97152dfe71e1c834476d5dd12c71c54f" args="(KDB *kdb, KeySet *modules, Key *errorKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraMountDefault </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="paramname"> <em>modules</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>errorKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reopens the default backend and mounts the default backend if needed.</p>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Default Backend is closed. elektraMountOpen was executed before.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>kdb</em>&nbsp;</td><td>the handle to work with </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modules</em>&nbsp;</td><td>the current list of loaded modules </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>errorKey</em>&nbsp;</td><td>the key used to report warnings </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 on error </dd>
<dd>
0 on success </dd></dl>

</div>
</div>
<a class="anchor" id="gaa66ed093e4c71d97018ffc66d46d0e1f"></a><!-- doxytag: member="mount.c::elektraMountGetBackend" ref="gaa66ed093e4c71d97018ffc66d46d0e1f" args="(KDB *handle, const Key *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__Backend.html">Backend</a>* elektraMountGetBackend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Lookup a backend handle for a specific key.</p>
<p>The required canonical name is ensured by using a key as parameter, which will transform the key to canonical representation.</p>
<p>Will return handle when no more specific KDB could be found.</p>
<p>If key is 0 or invalid the default backend will be returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>is the data structure, where the mounted directories are saved. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>key</em>&nbsp;</td><td>the key, that should be looked up. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the backend handle associated with the key </dd></dl>

</div>
</div>
<a class="anchor" id="ga0cdbb658c5ac280672e4ac22419075f1"></a><!-- doxytag: member="mount.c::elektraMountGetMountpoint" ref="ga0cdbb658c5ac280672e4ac22419075f1" args="(KDB *handle, const Key *where)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct__Key.html">Key</a>* elektraMountGetMountpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>where</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Lookup a mountpoint in a handle for a specific key.</p>
<p>Will return a key representing the mountpoint or null if there is no appropriate mountpoint e.g. its the root mountpoint.</p>
<dl class="user"><dt><b>Example:</b></dt><dd><div class="fragment"><pre class="fragment"><a class="code" href="struct__Key.html">Key</a> * key = <a class="code" href="group__key.html#gaf6893c038b3ebee90c73a9ea8356bebf">keyNew</a> (<span class="stringliteral">&quot;system/template&quot;</span>);
<a class="code" href="struct__KDB.html">KDB</a> * handle = <a class="code" href="group__kdb.html#ga6808defe5870f328dd17910aacbdc6ca">kdbOpen</a>();
<a class="code" href="struct__Key.html">Key</a> *mountpoint=0;
mountpoint=kdbGetMountpoint(handle, key);

printf(<span class="stringliteral">&quot;The backend I am using is %s mounted in %s\n&quot;</span>,
        <a class="code" href="group__keyvalue.html#ga6f29609c5da53c6dc26a98678d5752af">keyValue</a>(mountpoint),
        <a class="code" href="group__keyname.html#ga8e805c726a60da921d3736cda7813513">keyName</a>(mountpoint));
<a class="code" href="group__kdb.html#gadb54dc9fda17ee07deb9444df745c96f">kdbClose</a> (handle);
<a class="code" href="group__key.html#ga3df95bbc2494e3e6703ece5639be5bb1">keyDel</a> (key);
</pre></div></dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td>is the data structure, where the mounted directories are saved. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>where</em>&nbsp;</td><td>the key, that should be looked up. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the mountpoint associated with the key </dd></dl>

</div>
</div>
<a class="anchor" id="ga54e32ffc628b2ca1e1876efb6d28cfc7"></a><!-- doxytag: member="mount.c::elektraMountModules" ref="ga54e32ffc628b2ca1e1876efb6d28cfc7" args="(KDB *kdb, KeySet *modules, Key *errorKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraMountModules </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="paramname"> <em>modules</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>errorKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mount all module configurations.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>kdb</em>&nbsp;</td><td>the handle to work with </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modules</em>&nbsp;</td><td>the current list of loaded modules </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>errorKey</em>&nbsp;</td><td>the key used to report warnings</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>-1</em>&nbsp;</td><td>if not rootkey was found </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad3c84032644ff56feb44106a7924d3fe"></a><!-- doxytag: member="mount.c::elektraMountOpen" ref="gad3c84032644ff56feb44106a7924d3fe" args="(KDB *kdb, KeySet *config, KeySet *modules, Key *errorKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraMountOpen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="paramname"> <em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__KeySet.html">KeySet</a> *&nbsp;</td>
          <td class="paramname"> <em>modules</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>errorKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates a trie from a given configuration.</p>
<p>The config will be deleted within this function.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>elektraMountDefault is not allowed to be executed before</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>kdb</em>&nbsp;</td><td>the handle to work with </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>modules</em>&nbsp;</td><td>the current list of loaded modules </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>config</em>&nbsp;</td><td>the configuration which should be used to build up the trie. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>errorKey</em>&nbsp;</td><td>the key used to report warnings </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>-1 on failure </dd>
<dd>
0 on success </dd></dl>

</div>
</div>
<a class="anchor" id="ga6362fc7585d7a308c08005cb3cb1a4cd"></a><!-- doxytag: member="mount.c::elektraMountVersion" ref="ga6362fc7585d7a308c08005cb3cb1a4cd" args="(KDB *kdb, Key *errorKey)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int elektraMountVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct__KDB.html">KDB</a> *&nbsp;</td>
          <td class="paramname"> <em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct__Key.html">Key</a> *&nbsp;</td>
          <td class="paramname"> <em>errorKey</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Mount the version backend</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>kdb</em>&nbsp;</td><td>the handle to work with </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>errorKey</em>&nbsp;</td><td>the key used to report warnings</td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Return values:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>0</em>&nbsp;</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Jun 18 2012 12:41:41 for Elektra by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
