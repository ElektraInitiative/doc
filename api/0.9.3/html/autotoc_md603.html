<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: rename</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin: rename </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about rename plugin is in keys below</li>
<li>infos/author = Felix Berlakovich <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'be'+'rla'+'ko'+'vic'+'h.'+'net'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@b<span style="display: none;">.nosp@m.</span>erlak<span style="display: none;">.nosp@m.</span>ovic<span style="display: none;">.nosp@m.</span>h.net</a></li>
<li>infos/licence = BSD</li>
<li>infos/provides = filter</li>
<li>infos/needs =</li>
<li>infos/placements = presetstorage postgetstorage</li>
<li>infos/status = maintained unittest nodep libc configurable</li>
<li>infos/metadata = rename/to rename/toupper rename/tolower rename/cut origname</li>
<li>infos/description = renaming of keys</li>
</ul>
<p>This plugin can be used to perform rename operations on keys. This is useful if a backend does not provide keys with the required names or case.</p>
<p>If keys are renamed, their original name is stored in the <code>origname</code> MetaKey.</p>
<p>There are 2 types of transformations:</p>
<ul>
<li>basic</li>
<li>advanced</li>
</ul>
<p>are applied before and after the advanced transformations.</p>
<p>first transformation to be applied to all keys on kdbGet.</p>
<p><code>get/case</code></p>
<ul>
<li>toupper</li>
<li>tolower</li>
<li>unchanged // this is the default value if no configuration is given</li>
</ul>
<p>converts the whole keyname below the parentKey to upper- or lowercase. if no configuration or <code>unchanged</code> is used no transformation is done here.</p>
<p>last transformation to be applied to all keys on kdbSet.</p>
<p><code>set/case</code></p>
<ul>
<li>toupper</li>
<li>tolower</li>
<li>keyname</li>
<li>unchanged // this is the default value if no configuration is given</li>
</ul>
<p><code>toupper</code> or <code>tolower</code> tells the rename plugin to convert the whole keyname below the parentKey to lower or uppercase.</p>
<p><code>unchanged</code> returns the key to its original name</p>
<p><code>keyname</code> tells the plugin to keep the name of the advanced transformation</p>
<p>The cut operation can be used to strip parts of a keyâ€™s name. The cut operation is able to cut anything below the path of the parent key. A renamed key may even replace the parent key. For example consider a KeySet with the parent key <code>user/config</code>. If the KeySet contained a key with the name <code>user/config/with/long/path/key1</code>, the cut operation would be able to strip the following key name parts:</p>
<ul>
<li>with</li>
<li>with/long</li>
<li>with/long/path</li>
<li>with/long/path/key1</li>
</ul>
<p>The cut operation takes as its only configuration parameter the key name part to strip. This configuration can be supplied in two different ways. First, the global configuration key <code>cut</code> can be used. Second, keys to be stripped can be tagged with the MetaKey <code>rename/cut</code>. If both options are given, the MetaKey takes precedence. For example, consider the following setup:</p>
<div class="fragment"><div class="line">config/cut = will/be</div><div class="line">parent key = user/config</div><div class="line"></div><div class="line">user/config/will/be/stripped/key1               &lt;- meta rename/cut = will/be/stripped</div><div class="line">user/config/will/be/stripped/key2               &lt;- meta rename/cut = will/be/stripped</div><div class="line">user/config/will/be/stripped/key3</div><div class="line">user/config/will/not/be/stripped/key4</div></div><!-- fragment --><p>The result of the cut operation would be the following KeySet:</p>
<div class="fragment"><div class="line">user/config/key1</div><div class="line">user/config/key2</div><div class="line">user/config/stripped/key3</div><div class="line">user/config/will/not/be/stripped/key4</div></div><!-- fragment --><p>The cut operation is agnostic to a single trailing slash in the configuration. This means that it makes no difference whether <code>cut = will/be/stripped</code> or <code>cut = will/be/stripped/</code>. However, the cut operation refuses cut paths with leading slash. This is to clarify that key name parts can only be stripped after the parent key path.</p>
<p>If an invalid configuration is given or the cut operation would cause a parent key duplicate, the affected keys are simply skipped and not renamed.</p>
<p>Using the <code>/replacewith</code> global key or <code>rename/to</code> MetaKey the rename plugin will replace the part removed by <code>cut</code> with the supplied String</p>
<p>Using the <code>/toupper</code> or <code>/tolower</code> global configuration key, or the <code>rename/toupper</code> or <code>rename/tolower</code> metakey the rename plugin will convert the keynames to uppercase or lowercase. The supplied values tell the plugin how many levels starting from the right will be converted. <code>toupper</code> and <code>tolower</code> can be combined. When no value or "0" is supplied with the keys the whole name below the parentkey will be converted.</p>
<p>The toupper/tolower conversions are applied after cut/replace.</p>
<p>Note that the names refer to the representation as KeySet. For example, if you have a configuration file where every name is uppercase:</p>
<div class="fragment"><div class="line">KEY=value</div><div class="line">OTHER/KEY=otherval</div></div><!-- fragment --><p>you can use <code>tolower=0</code> to get the keys <code>key</code> and <code>other/key</code>.</p>
<div class="fragment"><div class="line">sudo kdb mount caseconversion.ini user/tests/rename mini rename toupper=1,tolower=3</div><div class="line"></div><div class="line">kdb set user/tests/rename/MIXED/CASE/conversion 1</div><div class="line"></div><div class="line">kdb ls user/tests/rename</div><div class="line">#&gt; user/tests/rename/mixed/case/CONVERSION</div><div class="line"></div><div class="line"># Undo modifications</div><div class="line">kdb rm -r user/tests/rename</div><div class="line">sudo kdb umount user/tests/rename</div></div><!-- fragment --><p>``` sudo kdb mount renameTest.ini user/tests/rename mini rename get/case=toupper,set/case=keyname,/cut=REMOVED</p>
<p>printf 'removed/key=test' &gt; <code>kdb file user/tests/rename</code></p>
<p>kdb ls user/tests/rename #&gt; user/tests/rename/KEY</p>
<p>kdb set user/tests/rename</p>
<p>cat "`kdb file user/tests/rename`" | tail -n1 #&gt; KEY=test</p>
<h1><a class="anchor" id="autotoc_md614"></a>
Undo modifications</h1>
<p>kdb rm -r user/tests/rename sudo kdb umount user/tests/rename </p><div class="fragment"></div><!-- fragment --> <h1><a class="anchor" id="autotoc_md615"></a>
If you always want the keys in the configuration file upper case,</h1>
<h1><a class="anchor" id="autotoc_md616"></a>
but for your application lower case you would use:</h1>
<p>sudo kdb mount caseconversion.ini user/tests/rename mini rename get/case=tolower,set/case=toupper</p>
<p>kdb set user/tests/rename/section/key value kdb get user/tests/rename/section/key #&gt; value</p>
<p>cat "`kdb file user/tests/rename`" #&gt; SECTION/KEY=value</p>
<h1><a class="anchor" id="autotoc_md617"></a>
Undo modifications</h1>
<p>kdb rm -r user/tests/rename sudo kdb umount user/tests/rename ```</p>
<h2><a class="anchor" id="autotoc_md618"></a>
Planned Operations</h2>
<p>Additional rename operations are planned for future versions of the rename plugin:</p>
<ul>
<li>trim: remove spaces in the name (that are not part of parentKey)</li>
<li>ranges for toupper, tolower</li>
<li>allow one to specify the case in configuration files (#485) </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
