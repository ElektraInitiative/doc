<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: 0.8.22 Release</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.22</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">0.8.22 Release </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This release did not happen yet.</p>
<ul>
<li>guid: 4884a54f-996a-4564-a138-38a70166fed7</li>
<li>author: Markus Raab</li>
<li>pubDate: Tue, 27 Feb 2018 19:35:58 +0100</li>
<li>shortDesc: Logo, INI, Lookup</li>
</ul>
<p>We are proud to release Elektra 0.8.22! In 429 commits, 8 authors changed 548 files with 60369 insertions(+), 6783 deletions(-).</p>
<h2>What is Elektra?</h2>
<p>Elektra serves as a universal and secure framework to access configuration settings in a global, hierarchical key database. For more information, visit <a href="https://libelektra.org">https://libelektra.org</a>.</p>
<p>For a small demo see here:</p>
<p><a href="https://asciinema.org/a/cantr04assr4jkv8v34uz9b8r"></a></p>
<p>You can also read the news <a href="https://www.libelektra.org/news/0.8.22-release">on our website</a></p>
<p>You can also read the <a href="https://fosdem.org/2018/interviews/markus-raab/">FOSDEM interview</a> given recently.</p>
<p>Elektra is now an official part of <a href="http://formulae.brew.sh/formula/elektra">Homebrew</a> and <a href="https://pkgs.alpinelinux.org/package/edge/testing/x86_64/elektra">Alpine Linux</a>.</p>
<h2>Highlights</h2>
<ul>
<li>New Logo and Website Theme</li>
<li>INI plugin greatly improved</li>
<li>Notifications API and Bindings for Asynchronous I/O</li>
<li>Plugin Processes</li>
<li>Lookup with the Order Preserving Minimal Perfect Hash Map</li>
</ul>
<h3>New Logo and Website Theme</h3>
<p>We are proud to present our new logo. It has a new shape and cooler colors.</p>
<div class="image">
<object type="image/svg+xml" data="https://cdn.rawgit.com/ElektraInitiative/libelektra/master/doc/images/logo/logo_color.svg" alt="Elektra" width="150"></object>
</div>
<p>Thanks to Philipp Frei!</p>
<p>We also gave the website a new look. It has the colors from the logo and new fonts (<a href="https://fonts.google.com/specimen/Lato">Lato</a> and <a href="https://fonts.google.com/specimen/Libre+Franklin">Libre Franklin</a>) that improve readability and add to a unique look. The restructured start page contributes to the new look as well.</p>
<p>We also updated asciinema-player to 2.6.0.</p>
<p>Thanks to Thomas Wahringer.</p>
<p>We also fixed security issues in the Website due to an old version of jquery, thanks to Marvin Mall.</p>
<p>Thanks to Bernhard Denner for keeping our infrastructure running.</p>
<h3>INI plugin greatly improved</h3>
<ul>
<li><code>dini</code> is no longer experimental anymore and adds the binary plugin.</li>
<li>We added a crash test for the INI plugin that feeds the plugin with problematic input data we determined using <a href="http://lcamtuf.coredump.cx/afl">AFL</a></li>
<li>We fixed various small bugs that could potentially cause the INI plugin to crash and fixes the problems as reported by AFL</li>
<li>The INI plugin now <a href="https://github.com/ElektraInitiative/libelektra/issues/1793">converts a section to a normal key-value pair</a> if you store a value inside it. This has the advantage that you will not <a href="https://github.com/ElektraInitiative/libelektra/issues/1697">lose data unexpectedly anymore</a>.</li>
<li>The <a href="https://www.libelektra.org/plugins/ini">INI plugin</a> should now read most key-value pairs containing delimiter characters (<code>=</code>) properly.</li>
</ul>
<p>Thanks to René Schwaiger!</p>
<p>Nevertheless, we did not switch to INI as default format. This has some reasons:</p>
<ul>
<li>In many workflows, <code>dump</code> is the better choice: e.g. with <code>kdb editor</code> you can edit any parts of Elektra with any format (e.g. INI) more safely. (With the INI plugin in some of these situations meta data is wrongly shown.)</li>
<li>The code base of INI is not fully tested and partly not well understood.</li>
<li>We plan to switch to a newly written parser (most likely YAML) and want to avoid that users have two migrations. The migration from <code>dump</code> is easier (especially compared with INI) because the <code>dump</code> format is recognisable without ambiguity. (Thus the INI file parses nearly any file, it is hard to detect that a file is not INI)</li>
</ul>
<p>But for those who want to switch, the migration will be smooth: The <code>dini</code> plugin makes sure that old dump files are still being read. Only when writing out configuration files, configuration files are converted to INI. To change to INI during compilation, simply use:</p>
<p><code>-DKDB_DEFAULT_STORAGE=dini</code></p>
<p>Or simply switch for your installation with:<br />
 <code>sudo kdb change-default-storage dini</code></p>
<p>You can also mount INI (or dini) as root:<br />
 <code>sudo kdb mount default.ini / dini</code></p>
<h3>Notification API and Bindings for Asynchronous I/O</h3>
<p>This release contains an experimental implementation of Elektra's notification feature. This feature enables applications to get updates when configuration is changed at run-time. For more details see the preview tutorial at https://github.com/ElektraInitiative/libelektra/tree/master/doc/tutorials/notifications.md "doc/tutorials/notifications.md"</p>
<p>The <a href="https://doc.libelektra.org/api/current/html/kdbnotification_8h.html">Notification API</a> is implemented by a new library called <code>elektra-notification</code>. To use the library you need the new internalnotification plugin. Since the plugin is experimental it needs to be enabled when building Elektra from source (e.g. by passing <code>-DPLUGINS="ALL;-EXPERIMENTAL;internalnotification"</code> to <code>cmake</code>).</p>
<p>New bindings for asynchronous I/O called "I/O bindings" also have been added. These bindings allow Elektra's plugins and other parts to perform <em>asynchronous</em> operations. I/O bindings are opt-in for application developers. New features of Elektra that take advantage of I/O bindings will have fallbacks where viable. These fallbacks will use synchronous I/O thus keeping the status quo.</p>
<p>This release includes an experimental I/O binding for <a href="http://libuv.org/">uv</a>. The interface for I/O bindings is currently experimental and might change in the future.</p>
<p>Elektra's notification feature is not complete yet. So called "transport plugins" will be responsible for sending and receiving notifications using different protocols or libraries (like ZeroMQ or D-Bus). These plugins will make use of the new I/O bindings. We plan to introduce the first transport plugins with the next release of Elektra.</p>
<h3>Plugin Processes</h3>
<p>A new library called <a href="https://github.com/ElektraInitiative/libelektra/tree/master/src/libs/pluginprocess">pluginprocess</a> has been added. This library contains functions that aid in executing plugins in a separate process. This child process is forked from Elektra's main process each time such plugin is used and gets closed again afterwards. It uses a simple communication protocol based on a KeySet that gets serialized through a pipe via the <code>dump</code> plugin to orchestrate the processes.</p>
<p>Such a behavior is useful for plugins which cause memory leaks to be isolated in an own process. Furthermore this is useful for runtimes or libraries that cannot be reinitialized in the same process after they have been used.</p>
<h3>Lookup with the Order Preserving Minimal Perfect Hash Map</h3>
<p>The <code>ksLookup (...)</code> has a new search algorithm, that acts as an alternative to the binary search. The Order Preserving Minimal Perfect Hash Map (OPMPHM) is a non-dynamic, randomized hash map and is very effective for mostly static configurations. The OPMPHM can be enabled for a search by passing the in <a href="https://github.com/ElektraInitiative/libelektra/blob/master/src/include/kdbproposal.h">kdbproposal.h</a> defined option <code>KDB_O_OPMPHM</code> to the lookup. Be aware that if the KeySet changes often using the OPMPHM might not be a good idea, read more about the <a href="https://github.com/ElektraInitiative/libelektra/blob/master/doc/dev/data-structures.md#order-preserving-minimal-perfect-hash-map-aka-opmphm">OPMPHM</a>.</p>
<p>When you are not sure if the OPMPHM will speed up you searches, wait for the next release, that one will include a hybrid search algorithm that combines the best properties of both search algorithms.</p>
<p>To disable OPMPHM (e.g. on systems with tight memory constraints), you can pass <code>-DENABLE_OPTIMIZATIONS=OFF</code></p>
<h2>Other New Features</h2>
<p>We added even more functionality, which could not make it to the highlights:</p>
<ul>
<li>The Web UI was greatly improved, thanks to Daniel Bugl The version of clusterd was increased from 1.0.0 to 1.1.0.</li>
<li>Elektra is now part of the official <a href="http://formulae.brew.sh/formula/elektra">Homebrew repository</a>. We still provide a <a href="http://github.com/ElektraInitiative/homebrew-elektra">tap</a>, if you want to install Elektra together with plugins or bindings that require additional libraries.</li>
<li>The building and linking of the haskell bindings and haskell plugins has been <a href="https://github.com/ElektraInitiative/libelektra/pull/1698">greatly improved</a>.</li>
<li>The invoke library can now <a href="https://github.com/ElektraInitiative/libelektra/pull/1801">report errors</a> upon opening/closing a plugin, thanks to Armin Wurzinger.</li>
<li>The <a href="https://www.libelektra.org/plugins/yamlcpp">YAML CPP plugin</a> does not require <a href="http://www.boost.org">Boost</a> anymore, if you installed <a href="https://github.com/jbeder/yaml-cpp/releases/tag/yaml-cpp-0.6.0">yaml-cpp 0.6</a>.</li>
<li>Improved colored output in <code>kdb</code> tool.</li>
<li>We added two build jobs: <a href="https://build.libelektra.org/job/test-docker/">docker</a> and <a href="https://build.libelektra.org/job/elektra-haskell/">haskell</a>. Thanks to Bernhard Denner and Armin Wurzinger.</li>
<li><a href="https://www.libelektra.org/plugins/yamlcpp">YAML CPP</a> does not write binary data to a config file, if you forget to load the <a href="https://www.libelektra.org/plugins/base64">Base64 plugin</a>.</li>
<li><a href="https://www.libelektra.org/plugins/yamlcpp">YAML CPP</a> now encodes empty binary keys as NULL values (<code>~</code>), and also adds the meta key <code>binary</code> for such values automatically.</li>
</ul>
<h2>Documentation</h2>
<p>We improved the documentation in the following ways:</p>
<ul>
<li>We have https://github.com/ElektraInitiative/libelektra/tree/master/doc/docker/jenkinsnode/README.md "documented how you can setup a build node for Jenkins using a Docker container" We also provide an example Dockerfile based on Debian Stretch for that purpose, thanks to Armin Wurzinger.</li>
<li>Document how <code>rlwrap</code> might be used for <code>kdb shell</code>.</li>
<li>Fixed docu in <code>hosts</code> plugin.</li>
<li>Greatly improved the <a href="https://git.libelektra.org/blob/debian/debian/copyright">license documentation</a> in <code>debian/copyright</code> in the <code>debian</code> branch, thanks to Thomas Wahringer.</li>
<li>Various fixes in doc/METADATA.ini</li>
</ul>
<h2>Compatibility</h2>
<p>As always, the ABI and API of kdb.h is fully compatible, i.e. programs compiled against an older 0.8 version of Elektra will continue to work (ABI) and you will be able to recompile programs without errors (API).</p>
<p>We executed old test cases against the latest Elektra version and all tests passed.</p>
<p>In <code>kdbinvoke.h</code> we changed the API so that <code>elektraInvokeOpen</code> and <code>elektraInvokeClose</code> can yield error messages.</p>
<p>We added:</p>
<ul>
<li>the public headerfiles <code><a class="el" href="kdbnotification_8h.html" title="Elektra-Notification structures and declarations for application developers. ">kdbnotification.h</a></code>, <code><a class="el" href="kdbio_8h.html" title="Elektra-I/O structures for I/O bindings, plugins and applications. ">kdbio.h</a></code>, <code><a class="el" href="kdbiotest_8h.html" title="Elektra-I/O functions and declarations for the I/O binding test suite. ">kdbiotest.h</a></code>.</li>
<li>the private headerfiles <code><a class="el" href="kdbnotificationplugin_8h.html" title="Elektra-Notification structures and declarations for developing notification plugins. ">kdbnotificationplugin.h</a></code>, <code><a class="el" href="kdbioprivate_8h.html" title="Private Elektra-IO structures for I/O bindings, plugins and applications. ">kdbioprivate.h</a></code>.</li>
</ul>
<h2>Portability</h2>
<ul>
<li>Fix bash shebang of bash scripts, thanks to Jakub Jirutka</li>
<li>Remove unportable unneeded asm, thanks to Timo Teräs and Jakub Jirutka</li>
<li>Fixed syntax in shell recorder, thanks to René Schwaiger</li>
<li>Used <code>mktemp</code> in <code>check_distribution.sh</code> to allow parallel run of test cases, thanks to Armin Wurzinger.</li>
</ul>
<h2>Notes for Maintainer</h2>
<p>These notes are of interest for people maintaining packages of Elektra:</p>
<ul>
<li><code>dini</code> is no longer experimental.</li>
<li>CMake: <code>BINDINGS</code> now behaves like <code>PLUGINS</code> By default now all MAINTAINED bindings except EXPERIMENTAL and DEPRECATED are included. For more details see https://github.com/ElektraInitiative/libelektra/tree/master/doc/COMPILE.md "/doc/COMPILE.md". To include both intercept bindings, you now need to write <code>INTERCEPT</code>, to only include getenv interception <code>intercept_env</code>. <code>intercept</code> in lower-case does not work anymore.</li>
</ul>
<p>The following files are new:</p>
<ul>
<li>Libs: <code>libelektra-notification.so</code>, <code>libelektra-io.so</code>, <code>libelektra-io-uv.so</code>, <code>libelektra-pluginprocess.so</code></li>
<li>Headers: <code>kdbgetenv.h</code>, <code><a class="el" href="kdbio_8h.html" title="Elektra-I/O structures for I/O bindings, plugins and applications. ">kdbio.h</a></code>, <code>kdbpluginprocess.h</code></li>
<li>Plugins: <code>base64/Base64.pdf</code></li>
<li>Binaries: <code>getenv</code>, <code>test_context</code>, <code>test_fork</code>, <code>test_getenv</code>, <code>test_ks_opmphm</code>, <code>test_opmphm</code></li>
<li>Other: <code>elektra-io.pc</code></li>
</ul>
<p>The following files were removed:</p>
<ul>
<li>Tests: <code>testmod_semlock</code></li>
</ul>
<h2>Notes for Elektra's Developers</h2>
<p>These notes are of interest for people developing Elektra:</p>
<ul>
<li>We now use <code>clang-reformat-5.0</code> for formatting. Please upgrade your clang.</li>
<li>Build Agent <code>ryzen v2</code> was added to speed up <code>jenkins build all please</code>, thanks to Armin Wurzinger.</li>
<li>Travis maintenance (Qt 5 and other problems), thanks to René Schwaiger.</li>
<li><code>BINDINGS</code> was greatly improved and the CMake functions were simplified. Bindings now also have a <code>README.md</code> with meta data. A big thanks to Thomas Wahringer.</li>
<li>Decision: Logging with <code>ELEKTRA_LOG</code> is only for C/C++.</li>
<li>Including <code>kdberrors.h</code> in a C++ files now also works, if you do not add the statement</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceckdb.html">ckdb</a>;</div></div><!-- fragment --><p>before you import <code>kdberrors.h</code>.</p><ul>
<li>The CMake code for Elektra’s <a href="https://www.libelektra.org/tools/qt-gui">Qt-GUI</a> now detects the location of Qt 5 automatically if you installed Qt via Homebrew.</li>
<li>All Shell Recorder tests should not now correctly restore your old configuration after you execute them, thanks to René Schwaiger.</li>
<li>The <a href="https://www.libelektra.org/plugins/base64">Base64 plugin</a> does not encode empty binary values in meta mode anymore. This update allows plugins such as YAML CPP to handle empty keys properly.</li>
</ul>
<h2>Fixes</h2>
<p>Many problems were resolved with the following fixes:</p>
<ul>
<li><code>kdb global-umount</code> also removed other mountpoints</li>
<li>We fixed <a href="https://github.com/ElektraInitiative/libelektra/pull/1761">internal inconsistency</a> in the CMake code of the <a href="https://www.libelektra.org/plugins/augeas">Augeas plugin</a></li>
<li>We fixed the <a href="https://github.com/ElektraInitiative/libelektra/pull/1787">haskell bindings and plugins on Debian Stretch</a> and added a <a href="https://build.libelektra.org/job/elektra-haskell/">new build server job</a> to test that in the future.</li>
<li>Cleanup in list plugin, thanks to Thomas Wahringer</li>
<li>The Shell Recorder now exports and imports the root of a mountpoint instead of the mountpoint itself. This change makes sure that Shell Recorder test do not change the configuration directly below the specified mountpoint.</li>
</ul>
<h2>Get It!</h2>
<p>You can download the release from <a href="https://www.libelektra.org/ftp/elektra/releases/elektra-0.8.22.tar.gz">here</a> or <a href="https://github.com/ElektraInitiative/ftp/blob/master/releases/elektra-0.8.22.tar.gz?raw=true">GitHub</a></p>
<p>The <a href="https://github.com/ElektraInitiative/ftp/blob/master/releases/elektra-0.8.22.tar.gz.hashsum?raw=true">hashsums are:</a></p>
<p>&lt;&lt;<code>scripts/generate-hashsums</code>&gt;&gt;</p>
<p>The release tarball is also available signed by me using GnuPG from <a href="https://www.libelektra.org/ftp/elektra/releases/elektra-0.8.22.tar.gz.gpg">here</a> or <a href="https://github.com/ElektraInitiative/ftp/blob/master/releases//elektra-0.8.22.tar.gz.gpg?raw=true">GitHub</a></p>
<p>Already built API-Docu can be found <a href="https://doc.libelektra.org/api/0.8.22/html/">online</a> or <a href="https://github.com/ElektraInitiative/doc/tree/master/api/0.8.22">GitHub</a>.</p>
<h2>Stay tuned!</h2>
<p>Subscribe to the <a href="https://www.libelektra.org/news/feed.rss">RSS feed</a> to always get the release notifications.</p>
<p>For any questions and comments, please contact the issue tracker <a href="http://issues.libelektra.org">on GitHub</a> or me by email using <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'ma'+'rku'+'s-'+'raa'+'b.'+'org'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@m<span style="display: none;">.nosp@m.</span>arkus<span style="display: none;">.nosp@m.</span>-raa<span style="display: none;">.nosp@m.</span>b.org</a>.</p>
<p><a href="https://www.libelektra.org/news/0.8.22-release">Permalink to this NEWS entry</a></p>
<p>For more information, see <a href="https://libelektra.org">https://libelektra.org</a></p>
<p>Best regards, <a href="https://www.libelektra.org/developers/authors">Elektra Initiative</a> </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
