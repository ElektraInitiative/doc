<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: elektra-spec(7) -- spec namespace</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.21</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">elektra-spec(7) -- spec namespace </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>spec is a special namespace that describes via metadata the semantics of individual keys.</p>
<p>Most importantly it:</p>
<ol type="1">
<li>describes which keys are of interest to the application</li>
<li>describes the metadata to be copied to every key</li>
<li>describes how the cascading lookup works</li>
<li>describes the mountpoints including the plugins needed for them</li>
</ol>
<p>It is, however, not limited to this but can express any other key database semantics (new plugins might be necessary, though).</p>
<h2>Application</h2>
<p>The most simple use is to enlist all keys that will be used by an application and maybe give a description for them (we use ini syntax in this document):</p>
<div class="fragment"><div class="line">[mykey]</div><div class="line"></div><div class="line">[folder/anotherkey]</div><div class="line">description = set this key if you want another behavior</div></div><!-- fragment --><p>So Keys in <code>spec</code> allow us to specify which keys are read by the application. The description key will be copied (referred to) to <code>folder/anotherkey</code> of any namespace, so that it can easily be accessed.</p>
<h2>Cascading Lookup</h2>
<p>Other features are directly implemented in <code>ksLookup</code>. When cascading keys (those starting with <code>/</code>) are used following features are now available (in the metadata of respective <code>spec</code>-keys):</p>
<ul>
<li><code>override/#</code>: use these keys <em>in favor</em> of the key itself (note that <code>#</code> is the syntax for arrays, e.g. <code>#0</code> for the first element, <code>#_10</code> for the 11th and so on)</li>
<li><code>namespace/#</code>: instead of using all namespaces in the predefined order, one can specify which namespaces should be searched in which order</li>
<li><code>fallback/#</code>: when no key was found in any of the (specified) namespaces the <code>fallback</code>-keys will be searched</li>
<li><code>default</code>: this value will be used if nothing else was found</li>
</ul>
<p>E.g.</p>
<div class="fragment"><div class="line">[promise]</div><div class="line">default=20</div><div class="line">fallback/#0=/somewhere/else</div><div class="line">namespace/#0=user</div></div><!-- fragment --><ol type="1">
<li>When this file is mounted to <code>spec/sw/app/#0</code> we specify, that for the key <code>/sw/app/#0/promise</code> only the namespace <code>user</code> should be used.</li>
<li>If this key was not found, but <code>/somewhere/else</code> is present, we will use this key instead. The <code>fallback</code> technique is very powerful: it allows us to have (recursive) links between applications. In the example above, the application is tricked in receiving e.g. the key <code>user/somewhere/else</code> when <code>promise</code> was not available.</li>
<li>The value <code>20</code> will be used as default, even if no configuration file is found.</li>
</ol>
<p>Note that the fallback, override and cascading works on <em>key level</em>, and not like most other systems have implemented, on configuration <em>file level</em>.</p>
<h2>Validation</h2>
<p>You can tag any key using the <code>check</code> metadata so that it will be validated.</p>
<p>For example:</p>
<div class="fragment"><div class="line">[folder/anotherkey]</div><div class="line">check/validation = abc.*</div><div class="line">check/validation/message = def does not start with abc</div></div><!-- fragment --><h2>Mounting</h2>
<p>In the spec namespace you can also specify mountpoints. First you need the metakey <code>mountpoint</code> and a configuration file name. Otherwise, it basically works in the same way as the contracts in plugins using <code>infos</code> and <code>config</code>:</p>
<div class="fragment"><div class="line">[]</div><div class="line">mountpoint=file.abc</div><div class="line">config/plugin/code/escape = 40</div><div class="line">config/plugin/lua#abc/script = abc_storage.lua</div><div class="line">infos/author = Markus Raab</div><div class="line">infos/needs = resolver_abc rename code lua#abc</div><div class="line">infos/recommends = hexcode</div></div><!-- fragment --><h2>SEE ALSO</h2>
<ul>
<li><a class="el" href="doc_tutorials_application-integration_md.html">see application integration tutorial (towards end)</a></li>
<li><a class="el" href="doc_tutorials_namespaces_md.html">see namespaces tutorial</a></li>
<li><a class="el" href="md_doc_help_elektra-namespaces.html#doc_help_elektra-namespaces_md">elektra-namespaces(7)</a></li>
<li><a class="el" href="md_doc_help_elektra-cascading.html#doc_help_elektra-cascading_md">elektra-cascading(7)</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
