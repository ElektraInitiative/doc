<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: mini</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.9.12</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Plugin: mini </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the mini plugin is in keys below</li>
<li>infos/author = Ren√© Schwaiger <a href="#" onclick="location.href='mai'+'lto:'+'san'+'ss'+'eco'+'ur'+'s@m'+'e.'+'com'; return false;">sanss<span style="display: none;">.nosp@m.</span>ecou<span style="display: none;">.nosp@m.</span>rs@me<span style="display: none;">.nosp@m.</span>.com</a></li>
<li>infos/licence = BSD</li>
<li>infos/needs = ccode</li>
<li>infos/provides = storage/properties</li>
<li>infos/recommends =</li>
<li>infos/placements = getstorage setstorage</li>
<li>infos/status = shelltest unittest nodep limited</li>
<li>infos/metadata =</li>
<li>infos/description = A minimal plugin for properties files</li>
</ul>
<h1><a class="anchor" id="src_plugins_mini_README_md"></a>
mINI</h1>
<p>The ‚Äúmaybe this is not INI‚Äù plugin (<code>mini</code>) is a very simple storage plugin loosely based on the <a href="https://en.wikipedia.org/wiki/INI_file">INI</a> file format. Since this plugin <b>does not support sections</b> it might be more appropriate to say that it is based on the <a href="https://en.wikipedia.org/wiki/.properties">.properties</a> format, used in many Java applications.</p>
<h2><a class="anchor" id="autotoc_md340"></a>
Examples</h2>
<h3><a class="anchor" id="autotoc_md341"></a>
Basic Usage</h3>
<p>The following example shows basic usage of the <code>mini</code> plugin.</p>
<div class="fragment"><div class="line"># Mount mini plugin to `user:/tests/mini`</div>
<div class="line">sudo kdb mount mini.ini user:/tests/mini mini</div>
<div class="line"> </div>
<div class="line"># Add two key value pairs to the database</div>
<div class="line">kdb set user:/tests/mini/key value</div>
<div class="line">#&gt; Create a new key user:/tests/mini/key with string &quot;value&quot;</div>
<div class="line">kdb set user:/tests/mini/mi/mi/mr beaker</div>
<div class="line">#&gt; Create a new key user:/tests/mini/mi/mi/mr with string &quot;beaker&quot;</div>
<div class="line"> </div>
<div class="line"># Export our current configuration</div>
<div class="line">kdb export user:/tests/mini mini</div>
<div class="line">#&gt; key=value</div>
<div class="line">#&gt; mi/mi/mr=beaker</div>
<div class="line"> </div>
<div class="line"># Manually add some values</div>
<div class="line">echo &quot;üîë = ü¶Ñ&quot;           &gt;&gt; `kdb file user:/tests/mini`</div>
<div class="line">echo &quot;level1/level2 = üëæ&quot; &gt;&gt; `kdb file user:/tests/mini`</div>
<div class="line"> </div>
<div class="line"># Now `user:/tests/mini` contains four key value pairs</div>
<div class="line">kdb ls user:/tests/mini</div>
<div class="line">#&gt; user:/tests/mini/key</div>
<div class="line">#&gt; user:/tests/mini/level1/level2</div>
<div class="line">#&gt; user:/tests/mini/mi/mi/mr</div>
<div class="line">#&gt; user:/tests/mini/üîë</div>
<div class="line"> </div>
<div class="line"># Let us check if `user:/tests/mini/üîë` contains the correct value</div>
<div class="line">kdb get &quot;user:/tests/mini/üîë&quot;</div>
<div class="line">#&gt; ü¶Ñ</div>
<div class="line"> </div>
<div class="line"># Undo modifications to the key database</div>
<div class="line">kdb rm -r user:/tests/mini</div>
<div class="line">sudo kdb umount user:/tests/mini</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md342"></a>
Escaping</h3>
<p>As with most configuration file formats, some characters carry special meaning. In the case of the <code>mini</code> plugin that character are</p>
<ol type="1">
<li>the <code>=</code> sign, which separates keys from values and</li>
<li><code>#</code> and <code>;</code>, the characters that denote a comment.</li>
</ol>
<p>In case of <b>key values</b> you do not need to care about the special meaning of these characters most of the time, since the plugin handles escaping and unescaping of them for you. Since mINI use the backslash character (<code>\</code>) to escape values, the backspace character will be escaped too (<code>\\</code>). The following example shows the escaping behavior.</p>
<div class="fragment"><div class="line">sudo kdb mount mini.ini user:/tests/mini mini</div>
<div class="line"> </div>
<div class="line"># Store a value containing special characters</div>
<div class="line">kdb set user:/tests/mini/key &#39;;#=\&#39;</div>
<div class="line">#&gt; Create a new key user:/tests/mini/key with string &quot;;#=\&quot;</div>
<div class="line"> </div>
<div class="line"># The actual file contains escaped version of the characters</div>
<div class="line">kdb file user:/tests/mini | xargs cat</div>
<div class="line">#&gt; key=\;\#\=\\</div>
<div class="line"> </div>
<div class="line"># However, if you retrieve the value you do not have to care</div>
<div class="line"># about the escaped characters</div>
<div class="line">kdb get user:/tests/mini/key</div>
<div class="line">#&gt; ;#=\</div>
<div class="line"> </div>
<div class="line"># If we do not escape the `;` and `#` characters, then they</div>
<div class="line"># donate a comment.</div>
<div class="line">echo &#39;background = \#0F0F0F ; Background color&#39; &gt;&gt; `kdb file user:/tests/mini`</div>
<div class="line">echo &#39;foreground = \#FFFFFF # Foreground color&#39; &gt;&gt; `kdb file user:/tests/mini`</div>
<div class="line">kdb get user:/tests/mini/background</div>
<div class="line">#&gt; #0F0F0F</div>
<div class="line">kdb get user:/tests/mini/foreground</div>
<div class="line">#&gt; #FFFFFF</div>
<div class="line"> </div>
<div class="line"># Undo modifications to the key database</div>
<div class="line">kdb rm -r user:/tests/mini</div>
<div class="line">sudo kdb umount user:/tests/mini</div>
</div><!-- fragment --><p>In the case of <b>key names</b> you <b>must not use any of the characters mentioned above</b> (<code>;</code>, <code>#</code> and <code>=</code>) at all. Otherwise the behavior of the plugin will be <b>undefined</b>.</p>
<h2><a class="anchor" id="autotoc_md343"></a>
Limitations</h2>
<p>This plugin only supports simple key-value based properties files without sections. mINI also does not support metadata. If you want a more feature complete plugin, then please take a look at the toml plugin. The example below shows some of the limitations of the plugin.</p>
<div class="fragment"><div class="line">sudo kdb mount mini.ini user:/tests/mini mini</div>
<div class="line"> </div>
<div class="line"># The plugin does not support sections or multi-line values</div>
<div class="line">echo   &#39;[section]&#39;         &gt;&gt; `kdb file user:/tests/mini`</div>
<div class="line">printf &#39;key=&quot;multi\nline&quot;&#39; &gt;&gt; `kdb file user:/tests/mini`</div>
<div class="line"> </div>
<div class="line"># mINI only reads the first line of the value with the name `key`, since</div>
<div class="line"># the plugin assigns no special meaning to double or single quotes.</div>
<div class="line">kdb ls user:/tests/mini 2&gt; stderr.txt</div>
<div class="line">#&gt; user:/tests/mini/key</div>
<div class="line"> </div>
<div class="line"># As we can see in the first two line of the standard error output below,</div>
<div class="line"># mINI will inform us about lines it was unable to parse.</div>
<div class="line">cat stderr.txt | grep -oE &#39;Line [[:digit:]]+.*&#39; | sed &#39;s/^[[:space:]]*//&#39;</div>
<div class="line">#&gt; Line 1: &#39;[section]&#39; is not a valid key value pair</div>
<div class="line">#&gt; Line 3: &#39;line&quot;&#39; is not a valid key value pair</div>
<div class="line"> </div>
<div class="line"># Unlike the `ini` and `ni` plugin, mINI does not support metadata.</div>
<div class="line">kdb meta-set user:/tests/mini foo bar</div>
<div class="line"># RET: 5</div>
<div class="line"> </div>
<div class="line">kdb meta-ls user:/tests/mini</div>
<div class="line"># RET: 1</div>
<div class="line"> </div>
<div class="line"># The value of `key` also contains the double quote symbol, since mINI does</div>
<div class="line"># not assign special meaning to quote characters.</div>
<div class="line">kdb get user:/tests/mini/key</div>
<div class="line">#&gt; &quot;multi</div>
<div class="line"> </div>
<div class="line"># Undo modifications</div>
<div class="line">rm stderr.txt</div>
<div class="line">kdb rm -r user:/tests/mini</div>
<div class="line">sudo kdb umount user:/tests/mini</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
