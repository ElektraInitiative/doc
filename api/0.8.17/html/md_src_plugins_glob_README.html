<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Elektra: Plugin: glob</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.17</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin: glob </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about glob plugin is in keys below</li>
<li>infos/author = Felix Berlakovich <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'be'+'rla'+'ko'+'vic'+'h.'+'net'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@b<span style="display: none;">.nosp@m.</span>erlak<span style="display: none;">.nosp@m.</span>ovic<span style="display: none;">.nosp@m.</span>h.net</a></li>
<li>infos/licence = BSD</li>
<li>infos/provides =</li>
<li>infos/needs =</li>
<li>infos/recommends =</li>
<li>infos/ordering = check keytometa</li>
<li>infos/stacking = no</li>
<li>infos/placements = presetstorage postgetstorage</li>
<li>infos/status = nodep libc configurable difficult</li>
<li>infos/description = copies metadata to keys with the help of globbing</li>
</ul>
<p>The glob plugin provides coping metadata given by the plugin's configuration to keys identified using <em>glob expressions</em>. Globbing resembles regular expressions. They do not have the same expressive power, but are easier to use. The semantics are more suitable to match path names:</p>
<ul>
<li><code>*</code> matches any key name of just one hierarchy. This means it complies with any character except slash or null.</li>
<li><code>?</code> satisfies single characters with the same exclusions.</li>
<li>Additionally, there are ranges and character classes. They can also be inverted.</li>
</ul>
<p>So this plugin adds metadata to keys identified by globbing expressions. The plugin copies the metadata of the corresponding globbing keys in its configuration. Globbing can be applied in get and set direction or both.</p>
<h2>GLOBBING KEYS</h2>
<p>The plugin is configured with globbing keys in its configuration. Each key below the configuration is interpreted as a globbing key. The value of the key contains the globbing expression. When a key matching the glob expression contained in one of the globbing keys is found, the metakeys of the corresponding globbing key are copied.</p>
<h3>GLOBBING DIRECTION</h3>
<p>Globbing keys located directly below the configuration (e.g <code>config/glob/#1</code>) are applied in both directions (get and set). Keys below "get" (e.g. <code>config/glob/get/#1</code>) are applied only in the get direction and keys below set (e.g. <code>config/glob/set/#1</code>) are applied only in the set direction.</p>
<p>So the glob plugin iterates over a list of glob expressions for every key. Metadata is applied only for the first expression that matches. So later expressions can be used as default values.</p>
<h3>GLOBBING FLAGS</h3>
<p>Globbing keys may contain a subkey named "flags". This optional key contains the flags to be passed to the globbing function (currently fnmatch). If the key does not exist or if the value of the key cannot be converted into a number, FNM_PATHNAME is used as a default (see fnmatch(3) for more details).</p>
<h2>Contracts</h2>
<p>Glob statements are very useful together with contracts. Storage plugins can request the glob plugin to fill up metadata before they receive the keys in <code>elektraPluginSet()</code>. In <code>config/needs</code>, the plugin declares which keys should obtain which metadata. If the glob expression starts with a slash, the contract checker will automatically prepend the mount point.</p>
<p>For example, the hosts plugin contract contains: </p><pre class="fragment">    keyNew ("system/elektra/modules/hosts/config/needs/glob/#1",
            KEY_VALUE, "/*",
            KEY_META, "check/ipaddr", "", /* Preferred way to check */
                    /* Can be checked additionally */
            KEY_META, "check/validation", "^[0-9.:]+$",
            KEY_META, "check/validation/message",
                    "Character present not suitable for ip address",
            KEY_END),
    keyNew ("system/elektra/modules/hosts/config/needs/glob/#2",
            KEY_VALUE, "/*/*",
                    /* Strict character validation */
            KEY_META, "check/validation", "^[0-9a-zA-Z.:]+$",
            KEY_META, "check/validation/message",
                    "Character present not suitable for host address",
            KEY_END),
</pre><p>We see that the <code>hosts</code> plugin adds two glob statements with the clause <code>config/needs</code>. The first one matches with hostnames, the second with aliases.</p>
<p>The glob plugin only fills the metadata in <code><a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a></code>. This makes a difference compared with adding the metadata already in <code><a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way. ">kdbGet()</a></code>. Using the glob plugin, the user will not see the metadata, but later plugins in <code><a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way. ">kdbSet()</a></code> will.</p>
<p>To sum up, the glob plugin replenishes the keys with metadata. The plugin applies metadata in a flexible way. This metadata can be used for later checks. Limited configuration storage plugins, like the <code>hosts</code> plugin, use this feature. They need it because they are not able to store metadata themselves. It is obviously not possible to apply values to non-existing keys. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
