<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: elektra-namespaces(7) &ndash; namespaces</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.10.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">elektra-namespaces(7) &ndash; namespaces </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_help_elektra_namespaces"></a> </p>
<h1><a class="anchor" id="autotoc_md2790"></a>
INTRODUCTION</h1>
<p>Every key in Elektra needs a unique name so that administrators can refer to them unambiguously. Sometimes, multiple keys denote the same configuration item from different sources, e.g.:</p>
<ul>
<li>by a commandline argument</li>
<li>by a configuration file found relative to the current directory</li>
<li>by a configuration file found relative to the home directory</li>
<li>by a configuration file found below <code>/</code> etc</li>
</ul>
<p>To allow such keys to exist in parallel, Elektra uses namespaces.</p>
<p>A namespace has the following properties:</p>
<ul>
<li>in-memory Keys start with one of the namespaces</li>
<li>keys within a namespace are known to stem from a specific configuration source. For example files from the <code>user</code> namespace are from the users home directory, <b>even if</b> an absolute configuration file name was used.</li>
<li><code><a class="el" href="group__keyset.html#ga60f1ddcf23272f2b29b90e92ebe9b56f" title="Look for a Key contained in ks that matches the name of the key.">ksLookup()</a></code> uses multiple namespaces in a specific default order unless specified otherwise (cascading lookup)</li>
</ul>
<p>Following parts of Elektra source code are affected by namespaces:</p>
<ul>
<li>the key name validation in <code><a class="el" href="group__keyname.html#ga7699091610e7f3f43d2949514a4b35d9" title="Set a new name to a Key.">keySetName()</a></code></li>
<li><code><a class="el" href="group__keyname.html#gafc3ca03ed10f87eb59bdc02cf2a0de8d" title="Returns the elektraNamespace for a Key.">keyGetNamespace()</a></code> which enumerates all namespaces</li>
<li><code>_Backend</code> and <code>split.c</code> for correct distribution to plugins (note that not all namespaces actually are distributed to configuration files)</li>
<li><code>mount.c</code> for cascading and root backends</li>
<li>and of course many unit tests</li>
</ul>
<p>In the rest of this document all currently available namespaces in the default order are described.</p>
<h1><a class="anchor" id="autotoc_md2791"></a>
spec</h1>
<p>Unlike the other namespaces, the specification namespace does not contain values of the keys, but instead metadata as described in <a href="/home/jenkins/workspace/libelektra-release/doc/METADATA.ini"><code>METADATA.ini</code></a>.</p>
<p>When a cascading key is looked up, keys from the spec-namespace are the first to be searched. When a spec-key is found, the rest of the lookup will be done as specified, probably in a different order than the namespaces enlisted here.</p>
<p>Usually, the spec-keys do not directly contribute to the value, with one notable exception: the default value (metadata <code>default</code>, see in cascading below) might be used if every other way as specified in the spec-key failed.</p>
<p>Spec-keys typically include an explanation and description for the key itself (but not comments which are specific for individual keys).</p>
<p>The spec configuration files are below <code>CMAKE_INSTALL_PREFIX/KDB_DB_SPEC</code>.</p>
<p>spec is not part of cascading mounts, because the specifications often are written in different syntax than the configuration files.</p>
<h1><a class="anchor" id="autotoc_md2792"></a>
proc</h1>
<p>Derived from the process (e.g. by parsing <code>/proc/self</code> or by arguments passed from the main method):</p>
<ul>
<li>program name</li>
<li>arguments</li>
<li>environment</li>
</ul>
<p>Keys in the namespace proc can not be stored by their nature. Thus they are ignored by <code>kdbGet</code> and <code>kdbSet</code>. They might be different for every invocation of an application.</p>
<h1><a class="anchor" id="autotoc_md2793"></a>
dir</h1>
<p>Keys from the namespace <code>dir</code> are derived from a directory special to the user starting/using the application, e.g.:</p>
<ul>
<li>the current working directory for project specific settings, e.g. <code>.git</code></li>
<li>the directory a server wants to present to the user, e.g. <code>.htaccess</code></li>
</ul>
<p>Note that Elektra only supports a single special directory per KDB instance. Start a new KDB instance if you need different special directories for different parts of your application. How to change the directory may be different dependent on the resolver, e.g. by using chdir or by setting the environment variable <code>PWD</code>.</p>
<h1><a class="anchor" id="autotoc_md2794"></a>
user</h1>
<p>On multi-user operating systems obviously every user wants her/his own configuration. The user configuration is located in the users home directory typically below the folder <code>KDB_DB_USER.</code> Other paths below the home directory are possible too (absolute path for resolver).</p>
<p>Note that Elektra only supports a user directory per KDB instance. Start a new KDB instance if you need different user configuration for different parts of your application. How to change the user may be different dependent on the resolver, e.g. by <code>seteuid()</code> or by environment variables like <code>HOME</code>, <code>USER</code></p>
<h1><a class="anchor" id="autotoc_md2795"></a>
system</h1>
<p>The system configuration is the same for every chroot.</p>
<p>The configuration is typically located below <code>KDB_DB_SYSTEM</code>. Other absolute paths, e.g. below <code>/opt</code> or <code>/usr/local/etc</code> are possible too.</p>
<h1><a class="anchor" id="autotoc_md2796"></a>
Cascading</h1>
<p>Keys that are not in a namespace (i.e. start with an <code>/</code>) are called cascading keys. Cascading keys do not stem from a configuration source, but are used by applications to lookup a key in different namespaces. So, multiple keys can contribute to each cascading key name.</p>
<p>Cascading is the same as a name resolution and provides a namespace unification as described in <a href="https://dl.acm.org/doi/10.1145/1138041.1138045">Versatility and Unix semantics in namespace unification</a>.</p>
<p>Keys without a namespace can not be stored by their nature. So they are transient: after a restart they are forgotten.</p>
<p>Keys of that namespace are only used by ksLookup when no other suitable key was found. So they have the lowest possible priority, even fallback keys are preferred.</p>
<p><a class="el" href="doc_help_elektra-cascading_md.html">Read more about cascading.</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
