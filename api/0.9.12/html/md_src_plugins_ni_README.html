<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: ni</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.9.12</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Plugin: ni </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about ni plugin is in keys below</li>
<li>infos/author = Markus Raab <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'li'+'bel'+'ek'+'tra'+'.o'+'rg'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@l<span style="display: none;">.nosp@m.</span>ibele<span style="display: none;">.nosp@m.</span>ktra<span style="display: none;">.nosp@m.</span>.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/provides = storage/ini</li>
<li>infos/needs =</li>
<li>infos/placements = getstorage setstorage</li>
<li>infos/status = maintained unittest libc nodep</li>
<li>infos/metadata =</li>
<li>infos/description = Reads and writes the nickel ini format</li>
</ul>
<h1><a class="anchor" id="src_plugins_ni_README_md"></a>
Introduction</h1>
<p>This plugin uses the nickel library in order to read/write <a class="el" href="doc_help_elektra-metadata_md.html">metakeys</a> in the nickel ini format. Its purpose is to be used in the <code>spec</code>-namespace or when any metadata should be stored.</p>
<p>For configuration itself you should prefer the <a class="el" href="md_src_plugins_toml_README.html#src_plugins_toml_README_md">toml plugin</a>.</p>
<h1><a class="anchor" id="autotoc_md382"></a>
Usage</h1>
<p>To mount the ni plugin you can simply use:</p>
<div class="fragment"><div class="line">kdb mount file.ini spec:/ni ni</div>
</div><!-- fragment --><p>The strength of this plugin is that it supports arbitrary meta data and the file format is still human-readable. For example the following lines:</p>
<div class="fragment"><div class="line">[key]</div>
<div class="line">meta=foo</div>
</div><!-- fragment --><p>specify that <code>key</code> has a metadata key <code>meta</code> containing the metavalue <code>foo</code>:</p>
<div class="fragment"><div class="line">kdb meta-get user:/ni/key meta</div>
<div class="line">#&gt; foo</div>
</div><!-- fragment --><p>For the metadata of the parent key use the following syntax:</p>
<div class="fragment"><div class="line">[]</div>
<div class="line">meta=foo</div>
</div><!-- fragment --><p>Line continuation works by ending the line with <code>\\</code> (a single backslash). If you want a line break at the end of the line, use <code>\\n\\</code>.</p>
<p>To export a <code>KeySet</code> in the nickel format use:</p>
<div class="fragment"><div class="line">kdb export spec:/ni ni &gt; example.ni</div>
</div><!-- fragment --><p>For in-detail explanation of the syntax (nested keys are not supported by the plugin) <a href="/home/jenkins/workspace/libelektra-release/src/plugins/ni/nickel-1.1.0/include/bohr/ni.h">see /src/plugins/ni/nickel-1.1.0/include/bohr/ni.h</a></p>
<h1><a class="anchor" id="autotoc_md383"></a>
Examples</h1>
<div class="fragment"><div class="line"># Mount the `ni` plugin at `spec:/tests/ni`</div>
<div class="line">sudo kdb mount file.ini spec:/tests/ni ni</div>
<div class="line"> </div>
<div class="line"># Add some metadata</div>
<div class="line">kdb meta-set spec:/tests/ni/key metakey metavalue</div>
<div class="line">kdb meta-set spec:/tests/ni/key check/type char</div>
<div class="line"> </div>
<div class="line"># Retrieve metadata</div>
<div class="line">kdb meta-ls spec:/tests/ni/key</div>
<div class="line">#&gt; check/type</div>
<div class="line">#&gt; metakey</div>
<div class="line">kdb meta-get spec:/tests/ni/key metakey</div>
<div class="line">#&gt; metavalue</div>
<div class="line"> </div>
<div class="line"># Add and retrieve key values</div>
<div class="line">kdb get spec:/tests/ni/key</div>
<div class="line">#&gt;</div>
<div class="line">kdb set spec:/tests/ni/key value</div>
<div class="line">kdb set spec:/tests/ni/key/to nothing</div>
<div class="line">kdb get spec:/tests/ni/key</div>
<div class="line">#&gt; value</div>
<div class="line">kdb get spec:/tests/ni/key/to</div>
<div class="line">#&gt; nothing</div>
<div class="line"> </div>
<div class="line"># Undo modifications</div>
<div class="line">kdb rm -r spec:/tests/ni</div>
<div class="line">sudo kdb umount spec:/tests/ni</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md384"></a>
Limitations</h1>
<ul>
<li>Supports most KeySets, but <code>kdb test</code> currently reports some errors (likely because of the UTF-8 handling happening within ni).</li>
<li>Keys have a random order when written out.</li>
<li>Comments are not preserved, they are simply removed.</li>
<li>Parse errors simply result in ignoring (and removing) these parts.</li>
</ul>
<h1><a class="anchor" id="autotoc_md385"></a>
Nickel</h1>
<p>This plugin is based on the Nickel Library written by author: <a href="#" onclick="location.href='mai'+'lto:'+'cha'+'rl'+'es@'+'ch'+'aos'+'li'+'zar'+'d.'+'org'; return false;">charl<span style="display: none;">.nosp@m.</span>es@c<span style="display: none;">.nosp@m.</span>haosl<span style="display: none;">.nosp@m.</span>izar<span style="display: none;">.nosp@m.</span>d.org</a></p>
<p>Nickel (Ni) has its strength in building up a hierarchical recursive Node structure which is perfect for parsing and generating ini files. With them arbitrary deep nested hierarchy are possible, but limited in a keyname of a fixed size.</p>
<p>The API of nickel is very suited for elektra, it can use <code>FILE*</code> pointers (using that elektra could open and lock files), the node-hierarchy can be transformed to keysets, but it lacks many features like comments and types.</p>
<p>The format is more general than the kde-ini format, it can handle their configuration well, when the section names do not exceed the specified length. Nesting is only required in the first depth, any deeper is not understood by kde config parser.</p>
<p>The memory footprint is for a 190.000 (reduced to 35.000 when rewrote first ) line ini file with 1.1MB size is 16.88 MB. The sort order is not stable, even not with the same file rewritten again. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
