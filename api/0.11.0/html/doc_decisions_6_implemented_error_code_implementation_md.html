<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Error Code Implementation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.11.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Error Code Implementation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_decisions_6_implemented_error_code_implementation"></a> </p>
<h1><a class="anchor" id="autotoc_md2378"></a>
Problem</h1>
<p>In the previous error concept it was very useful to generate macros as we often added new errors. The code generation itself, however, was not ideal for cross compilation.</p>
<h1><a class="anchor" id="autotoc_md2379"></a>
Constraints</h1>
<h1><a class="anchor" id="autotoc_md2380"></a>
Assumptions</h1>
<ul>
<li>Error codes do not change very often</li>
</ul>
<h1><a class="anchor" id="autotoc_md2381"></a>
Considered Alternatives</h1>
<ul>
<li>Migrate to a more modern and easier way to generate code with our mustache system, and let this generate the (mapping) code for all compiled languages (C, C++, Java, Rust, Go). All we get out of this is the removal of <code>std::cout &lt;&lt; ...</code> code from C++ but not much more.</li>
<li>Migrate to CMake code that generates such macros/classes. Mustache templates have to be supplied with the input data somehow. Either we have to use a custom executable that is compiled at build time. In that case we would just get rid of the <code>std::cout &lt;&lt; ...</code> in the C++ code, but not much else would change. The other option is to use the default mustache executable, which is a Ruby script and therefore requires Ruby to be installed. Also <code>kdb gen</code> cannot be reused, since that would require compiling kdb first, which needs <a class="el" href="kdberrors_8h.html" title="Provides all macros and definitions which are used for emitting error or warnings.">kdberrors.h</a>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2382"></a>
Decision</h1>
<p>Write down the few macros manually, and also manually write down exceptions for the language bindings (and also the mappings from Elektra's internal errors to nice errors specific for the languages).</p>
<p>Since error codes and crucial parts Elektra's core implementation will not often change this is the best approach with minimal effort.</p>
<p>The existing code will be refactored so that error macros directly call macros.</p>
<p>When adding a new error code, language bindings have to be adapted accordingly such as the Rust or Java Binding.</p>
<h1><a class="anchor" id="autotoc_md2383"></a>
Rationale</h1>
<ul>
<li>Updates to error codes will imply syncing every binding. This though should happen in very rare circumstances.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2384"></a>
Implications</h1>
<ul>
<li>The current bindings stay untouched.</li>
<li>Tutorial on how to write a binding should be written.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2385"></a>
Related Decisions</h1>
<h1><a class="anchor" id="autotoc_md2386"></a>
Notes</h1>
<ul>
<li>See also <a href="https://issues.libelektra.org/2814">Issue #2814</a></li>
<li>See also <a href="https://issues.libelektra.org/2871">Issue #2871</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
