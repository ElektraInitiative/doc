<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Commit Function</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.11</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Commit Function </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_decisions_commit_function"></a> </p>
<h1><a class="anchor" id="autotoc_md1741"></a>
Problem</h1>
<p>When <code><a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set Keys to a Key database in an atomic and universal way.">kdbSet()</a></code> is called, plugins implementing the commit role need to track their state to distinguish between carrying out that role and carrying out potential other roles (commit and setresolver for the resolver plugin, for example). This limits the possibilities of plugin reuse and the ways plugins can be combined.</p>
<h1><a class="anchor" id="autotoc_md1742"></a>
Constraints</h1>
<ul>
<li>It should be possible for all existing plugins to run normally</li>
</ul>
<h1><a class="anchor" id="autotoc_md1743"></a>
Assumptions</h1>
<h1><a class="anchor" id="autotoc_md1744"></a>
Considered Alternatives</h1>
<h1><a class="anchor" id="autotoc_md1745"></a>
Decision</h1>
<p>Committing will no longer be done by <code><a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set Keys to a Key database in an atomic and universal way.">kdbSet()</a></code>. Instead, the functionality will be implemented by its own function, <code>kdbCommit()</code>.</p>
<h1><a class="anchor" id="autotoc_md1746"></a>
Rationale</h1>
<p>The implementation of this function is a prerequisite for a future improvement to backends, which will enable greater amounts of plugins in a single backend and plugin statelessness.</p>
<p>Currently, plugins combining the <code>commit</code> role with a different role (such as resolver plugins which combine the <code>setresolver</code> and <code>commit</code> roles) need to distinguish between these roles and track their state.</p>
<h1><a class="anchor" id="autotoc_md1747"></a>
Implications</h1>
<h1><a class="anchor" id="autotoc_md1748"></a>
Related Decisions</h1>
<h1><a class="anchor" id="autotoc_md1749"></a>
Notes</h1>
<p><a href="https://issues.libelektra.org/2798">https://issues.libelektra.org/2798</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
