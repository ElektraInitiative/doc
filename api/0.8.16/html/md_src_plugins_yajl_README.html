<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Elektra: Plugin: yajl</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.16</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin: yajl </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about YAIL plugin is in keys below</li>
<li>infos/author = Markus Raab <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'li'+'bel'+'ek'+'tra'+'.o'+'rg'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@l<span style="display: none;">.nosp@m.</span>ibele<span style="display: none;">.nosp@m.</span>ktra<span style="display: none;">.nosp@m.</span>.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/provides = storage</li>
<li>infos/needs =</li>
<li>infos/recommends = rebase directoryvalue comment type</li>
<li>infos/placements = getstorage setstorage</li>
<li>infos/status = maintained coverage unittest</li>
<li>infos/description = JSON using YAIL</li>
</ul>
<p>This is a plugin reading and writing json files using the library <a href="http://lloyd.github.com/yajl/">yail</a></p>
<p>The plugin was tested with yajl version 1.0.8-1 from Debian 6 and yajl version 2.0.4-2 from Debian 7.</p>
<p>Examples of files which are used for testing can be found below the folder in "src/plugins/yajl/examples".</p>
<p>The json grammar can be found <a href="http://www.ietf.org/rfc/rfc4627.txt">here</a>.</p>
<p>A validator can be found <a href="http://jsonlint.com/">here</a>.</p>
<p>Supports every KeySet except when arrays are intermixed with other keys. Has only limited support for metadata.</p>
<h2>Dependencies</h2>
<ul>
<li><code>libyajl-dev</code> (version 1 and 2 should work)</li>
</ul>
<h2>Types</h2>
<p>My metadata <code>type</code> the used types can be chosen:</p>
<ul>
<li><code>string</code>: The JSON string type.</li>
<li><code>boolean</code>: The JSON boolean type (true or false)</li>
<li><code>double</code>: For JSON numbers.</li>
</ul>
<p>If no metadata <code>type</code> is given, the type is either:</p>
<ul>
<li><code>null</code> on binary null-key</li>
<li><code>string</code> otherwise</li>
</ul>
<p>Any other type/value will still be treated as string, but the warning <code>#78</code> will be added because of the potential data loss.</p>
<h2>Special values</h2>
<p>In json it is possible to have empty arrays and objects. In Elektra this is mapped using the special names </p><pre class="fragment">    ###empty_array
</pre><p>and </p><pre class="fragment">    ___empty_map
</pre><p>Arrays are mapped to Elektra's array convention #0, #1,..</p>
<h2>Restrictions</h2>
<ul>
<li>Everything is string if not tagged by meta key "type" Only valid json types can be used in type, otherwise there are some fall backs to string but warnings are produced.</li>
<li>Values in non-leaves are discarded.</li>
<li>Arrays will be normalized (to #0, #1, ..)</li>
<li>Comments of various json-dialects are discarded.</li>
</ul>
<p>Because of these potential problems a type checker, comments filter and directory value filter are highly recommended.</p>
<h2>OpenICC Device Config</h2>
<p>This plugin was specifically designed and tested for the <code>OpenICC_device_config_DB</code> although it is of course not limited to it.</p>
<p>Mount the plugin: </p><pre class="fragment">    kdb mount --resolver=resolver_fm_xhp_x color/settings/openicc-devices.json /org/freedesktop/openicc yajl rename cut=org/freedesktop/openicc
</pre><p>or: </p><pre class="fragment">    kdb mount-openicc
</pre><p>Then you can copy the OpenICC_device_config_DB.json to systemwide or user config, e.g. </p><pre class="fragment">    cp src/plugins/yajl/examples/OpenICC_device_config_DB.json /etc/xdg
    cp src/plugins/yajl/examples/OpenICC_device_config_DB.json ~/.config

    kdb ls system/org/freedesktop/openicc
</pre><p>prints out then all device entries available in the config </p><pre class="fragment">    kdb get system/org/freedesktop/openicc/device/camera/0/EXIF_manufacturer
</pre><p>prints out "Glasshuette" with the example config in souce</p>
<p>You can export the whole system openicc config to ini with: </p><pre class="fragment">    kdb export system/org/freedesktop/openicc simpleini &gt; dump.ini
</pre><p>or import it: </p><pre class="fragment">    kdb import system/org/freedesktop/openicc ini &lt; dump.ini</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
