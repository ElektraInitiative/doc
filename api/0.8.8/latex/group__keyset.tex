\hypertarget{group__keyset}{\section{Key\-Set}
\label{group__keyset}\index{Key\-Set@{Key\-Set}}
}


Methods to manipulate Key\-Sets.  


\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__keyset_ga98a3d6a4016c9dad9cbd1a99a9c2a45a}{option\-\_\-t} \{ \\*
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa00738455e0ae843c8720809d8287f370}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-N\-E} = 0, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa66a5380c120f25f28f49848c4a863ead}{K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L} = 1, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa52fb5f2cc86773d393da62bebebf7984}{K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P} = 1$<$$<$1, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa1a70738b2126badb8db7b012c8a1c610}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R} = 1$<$$<$2, 
\\*
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa131e99d60253d0b887a1e5886f8aa96c}{K\-D\-B\-\_\-\-O\-\_\-\-D\-I\-R\-O\-N\-L\-Y} = 1$<$$<$3, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa7649f575c2eb0adeaf2c9173ae16e0e6}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E} = 1$<$$<$6, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaf6ed09cee8aa8cf0d6a0e318a7105440}{K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y} = 1$<$$<$7, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa789926d8a8e15b029cf7dded4154bcda}{K\-D\-B\-\_\-\-O\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E} = 1$<$$<$8, 
\\*
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaa7d5265eacbb1590982b718f35443e2e}{K\-D\-B\-\_\-\-O\-\_\-\-S\-Y\-N\-C} = 1$<$$<$9, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aad9d03b36ee88ca5a774cc01b190c99b8}{K\-D\-B\-\_\-\-O\-\_\-\-S\-O\-R\-T} = 1$<$$<$10, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa6adaa17b267027ce50e670bf8cc6e824}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-C\-U\-R\-S\-I\-V\-E} = 1$<$$<$11, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaa5586d229e048f816bf7982765442b86}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E} = 1$<$$<$12, 
\\*
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aab2ff402f5de9aa67b7f786fb715a7a31}{K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R} = 1$<$$<$13, 
\hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aae8dd1961707e7d0c27228a3f98b0a94d}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L} = 1$<$$<$14
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
Key\-Set $\ast$ \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New} (size\-\_\-t alloc,...)
\item 
Key\-Set $\ast$ \hyperlink{group__keyset_ga4ff760f56693b51ab785ed7ce628e649}{ks\-V\-New} (size\-\_\-t alloc, va\-\_\-list va)
\begin{DoxyCompactList}\small\item\em \end{DoxyCompactList}\item 
Key\-Set $\ast$ \hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup} (const Key\-Set $\ast$source)
\item 
int \hyperlink{group__keyset_gaba1f1dbea191f4d7e7eb3e4296ae7d5e}{ks\-Copy} (Key\-Set $\ast$dest, const Key\-Set $\ast$source)
\begin{DoxyCompactList}\small\item\em \end{DoxyCompactList}\item 
int \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del} (Key\-Set $\ast$ks)
\item 
int \hyperlink{group__keyset_gab8b30dfabb0867bd6899e60e7bd193a2}{elektra\-Key\-Cmp\-Order} (const Key $\ast$ka, const Key $\ast$kb)
\item 
ssize\-\_\-t \hyperlink{group__keyset_ga7474ad6b0a0fa969dbdf267ba5770eee}{ks\-Get\-Size} (const Key\-Set $\ast$ks)
\item 
ssize\-\_\-t \hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ks\-Append\-Key} (Key\-Set $\ast$ks, Key $\ast$to\-Append)
\begin{DoxyCompactList}\small\item\em \end{DoxyCompactList}\item 
ssize\-\_\-t \hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ks\-Append} (Key\-Set $\ast$ks, const Key\-Set $\ast$to\-Append)
\begin{DoxyCompactList}\small\item\em \end{DoxyCompactList}\item 
Key\-Set $\ast$ \hyperlink{group__keyset_ga6b00cf82b59af4d883a9bad6cf4a4a4a}{ks\-Cut} (Key\-Set $\ast$ks, const Key $\ast$cutpoint)
\item 
Key $\ast$ \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop} (Key\-Set $\ast$ks)
\item 
int \hyperlink{group__keyset_gac3e995819383f904369c260f212125f5}{elektra\-Ks\-To\-Mem\-Array} (Key\-Set $\ast$ks, Key $\ast$$\ast$buffer)
\item 
int \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind} (Key\-Set $\ast$ks)
\item 
Key $\ast$ \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next} (Key\-Set $\ast$ks)
\item 
Key $\ast$ \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current} (const Key\-Set $\ast$ks)
\item 
Key $\ast$ \hyperlink{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}{ks\-Head} (const Key\-Set $\ast$ks)
\item 
Key $\ast$ \hyperlink{group__keyset_gadca442c4ab43cf532b15091d7711559e}{ks\-Tail} (const Key\-Set $\ast$ks)
\item 
cursor\-\_\-t \hyperlink{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{ks\-Get\-Cursor} (const Key\-Set $\ast$ks)
\item 
Key $\ast$ \hyperlink{group__keyset_ga3604cc41505f7e19db945cece67190b6}{ks\-At\-Cursor} (Key\-Set $\ast$ks, cursor\-\_\-t pos)
\begin{DoxyCompactList}\small\item\em return key at given cursor position \end{DoxyCompactList}\item 
int \hyperlink{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}{ks\-Set\-Cursor} (Key\-Set $\ast$ks, cursor\-\_\-t cursor)
\item 
Key $\ast$ \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup} (Key\-Set $\ast$ks, Key $\ast$key, \hyperlink{group__keyset_ga98a3d6a4016c9dad9cbd1a99a9c2a45a}{option\-\_\-t} options)
\item 
Key $\ast$ \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ks\-Lookup\-By\-Name} (Key\-Set $\ast$ks, const char $\ast$name, \hyperlink{group__keyset_ga98a3d6a4016c9dad9cbd1a99a9c2a45a}{option\-\_\-t} options)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Methods to manipulate Key\-Sets. A Key\-Set is a sorted set of keys. So the correct name actually would be Key\-Map.

With \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()} you can create a new Key\-Set.

You can add keys with \hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ks\-Append\-Key()} in the keyset. Using \hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ks\-Append()} you can append a whole keyset.

\begin{DoxyNote}{Note}
Because the key is not copied, also the pointer to the current metadata \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{key\-Next\-Meta()} will be shared. 
\end{DoxyNote}


\hyperlink{group__keyset_ga7474ad6b0a0fa969dbdf267ba5770eee}{ks\-Get\-Size()} tells you the current size of the keyset.

With \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()} and \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} you can navigate through the keyset. Don't expect any particular order, but it is assured that you will get every key of the set.

Key\-Sets have an \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{internal cursor }. This is used for \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} and \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()}.

Key\-Set has a fundamental meaning inside elektra. It makes it possible to get and store many keys at once inside the database. In addition to that the class can be used as high level datastructure in applications. With \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ks\-Lookup\-By\-Name()} it is possible to fetch easily specific keys out of the list of keys.

You can easily create and iterate keys\-: 
\begin{DoxyCode}
\textcolor{preprocessor}{#include <kdb.h>}

\textcolor{comment}{// create a new keyset with 3 keys}
\textcolor{comment}{// with a hint that about 20 keys will be inside}
KeySet *myConfig = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(20,
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/name1"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/name2"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/name3"}, 0),
        KS\_END);
\textcolor{comment}{// append a key in the keyset}
\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ksAppendKey}(myConfig, \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"user/name4"}, 0));

Key *current;
\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ksRewind}(myConfig);
\textcolor{keywordflow}{while} ((current=\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ksNext}(myConfig))!=0)
\{
        printf(\textcolor{stringliteral}{"Key name is %s.\(\backslash\)n"}, \hyperlink{group__keyname_ga8e805c726a60da921d3736cda7813513}{keyName} (current));
\}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (myConfig); \textcolor{comment}{// delete keyset and all keys appended}
\end{DoxyCode}
 

\subsection{Enumeration Type Documentation}
\hypertarget{group__keyset_ga98a3d6a4016c9dad9cbd1a99a9c2a45a}{\index{Key\-Set@{Key\-Set}!option\-\_\-t@{option\-\_\-t}}
\index{option\-\_\-t@{option\-\_\-t}!KeySet@{Key\-Set}}
\subsubsection[{option\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf option\-\_\-t}}}\label{group__keyset_ga98a3d6a4016c9dad9cbd1a99a9c2a45a}
Options to change the default behavior of \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} functions.

These options can be O\-Red. That is the $|$-\/\-Operator in C.

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()}, \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} 
\end{DoxySeeAlso}
\begin{Desc}
\item[Enumerator\-: ]\par
\begin{description}
\index{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-N\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-N\-E}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-N\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-N\-E}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa00738455e0ae843c8720809d8287f370}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-N\-E}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa00738455e0ae843c8720809d8287f370}
}]No Option set. Will be recursive with no inactive keys.

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()}, \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()}, \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L@{K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L@{K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa66a5380c120f25f28f49848c4a863ead}{K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa66a5380c120f25f28f49848c4a863ead}
}]Delete parent\-Key key in \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()}, \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} or \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()}.

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()}, \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P@{K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P@{K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa52fb5f2cc86773d393da62bebebf7984}{K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa52fb5f2cc86773d393da62bebebf7984}
}]Pop Parent out of keyset key in \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()}.

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()}. 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa1a70738b2126badb8db7b012c8a1c610}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa1a70738b2126badb8db7b012c8a1c610}
}]Exclude keys containing other keys in result.

Only return leaves.

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_gac0a10c602d52a35f81347e8a32312017}{key\-Is\-Dir()} 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-D\-I\-R\-O\-N\-L\-Y@{K\-D\-B\-\_\-\-O\-\_\-\-D\-I\-R\-O\-N\-L\-Y}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-D\-I\-R\-O\-N\-L\-Y@{K\-D\-B\-\_\-\-O\-\_\-\-D\-I\-R\-O\-N\-L\-Y}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa131e99d60253d0b887a1e5886f8aa96c}{K\-D\-B\-\_\-\-O\-\_\-\-D\-I\-R\-O\-N\-L\-Y}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa131e99d60253d0b887a1e5886f8aa96c}
}]Retrieve only directory keys (keys containing other keys). This will give you an skeleton without leaves. This must not be used together with K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-D\-I\-R. \begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_gac0a10c602d52a35f81347e8a32312017}{key\-Is\-Dir()} 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa7649f575c2eb0adeaf2c9173ae16e0e6}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa7649f575c2eb0adeaf2c9173ae16e0e6}
}]Don't remove any keys. This must not be used together with K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y. \index{K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y@{K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y@{K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaf6ed09cee8aa8cf0d6a0e318a7105440}{K\-D\-B\-\_\-\-O\-\_\-\-R\-E\-M\-O\-V\-E\-O\-N\-L\-Y}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaf6ed09cee8aa8cf0d6a0e318a7105440}
}]Only remove keys. This must not be used together with K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-M\-O\-V\-E. \index{K\-D\-B\-\_\-\-O\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E@{K\-D\-B\-\_\-\-O\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E@{K\-D\-B\-\_\-\-O\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa789926d8a8e15b029cf7dded4154bcda}{K\-D\-B\-\_\-\-O\-\_\-\-I\-N\-A\-C\-T\-I\-V\-E}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa789926d8a8e15b029cf7dded4154bcda}
}]Do not ignore inactive keys (that name begins with .). \begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_gaa25f699f592031c1a0abc1504d14e13e}{key\-Is\-Inactive()} 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-S\-Y\-N\-C@{K\-D\-B\-\_\-\-O\-\_\-\-S\-Y\-N\-C}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-S\-Y\-N\-C@{K\-D\-B\-\_\-\-O\-\_\-\-S\-Y\-N\-C}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaa7d5265eacbb1590982b718f35443e2e}{K\-D\-B\-\_\-\-O\-\_\-\-S\-Y\-N\-C}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaa7d5265eacbb1590982b718f35443e2e}
}]Set keys independent of sync status. \begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_gaf247df0de7aca04b32ef80e39ef12950}{key\-Need\-Sync()} 
\end{DoxySeeAlso}
\index{K\-D\-B\-\_\-\-O\-\_\-\-S\-O\-R\-T@{K\-D\-B\-\_\-\-O\-\_\-\-S\-O\-R\-T}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-S\-O\-R\-T@{K\-D\-B\-\_\-\-O\-\_\-\-S\-O\-R\-T}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aad9d03b36ee88ca5a774cc01b190c99b8}{K\-D\-B\-\_\-\-O\-\_\-\-S\-O\-R\-T}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aad9d03b36ee88ca5a774cc01b190c99b8}
}]This option has no effect. Key\-Sets are always sorted. \begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000001}{Deprecated}]don't use \end{DoxyRefDesc}
\index{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-C\-U\-R\-S\-I\-V\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-C\-U\-R\-S\-I\-V\-E}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-C\-U\-R\-S\-I\-V\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-C\-U\-R\-S\-I\-V\-E}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa6adaa17b267027ce50e670bf8cc6e824}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-R\-E\-C\-U\-R\-S\-I\-V\-E}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa6adaa17b267027ce50e670bf8cc6e824}
}]Do not call \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} for every key containing other keys (\hyperlink{group__keytest_gac0a10c602d52a35f81347e8a32312017}{key\-Is\-Dir()}). \index{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaa5586d229e048f816bf7982765442b86}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aaa5586d229e048f816bf7982765442b86}
}]Ignore case. \index{K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R@{K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R@{K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aab2ff402f5de9aa67b7f786fb715a7a31}{K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aab2ff402f5de9aa67b7f786fb715a7a31}
}]Search with owner. \index{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L}!Key\-Set@{Key\-Set}}\index{Key\-Set@{Key\-Set}!K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L@{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L}}\item[{\em 
\hypertarget{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aae8dd1961707e7d0c27228a3f98b0a94d}{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L}\label{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aae8dd1961707e7d0c27228a3f98b0a94d}
}]Only search from start -\/$>$ cursor to cursor -\/$>$ end. \end{description}
\end{Desc}



\subsection{Function Documentation}
\hypertarget{group__keyset_gab8b30dfabb0867bd6899e60e7bd193a2}{\index{Key\-Set@{Key\-Set}!elektra\-Key\-Cmp\-Order@{elektra\-Key\-Cmp\-Order}}
\index{elektra\-Key\-Cmp\-Order@{elektra\-Key\-Cmp\-Order}!KeySet@{Key\-Set}}
\subsubsection[{elektra\-Key\-Cmp\-Order}]{\setlength{\rightskip}{0pt plus 5cm}int elektra\-Key\-Cmp\-Order (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{ka, }
\item[{const Key $\ast$}]{kb}
\end{DoxyParamCaption}
)}}\label{group__keyset_gab8b30dfabb0867bd6899e60e7bd193a2}
Compare the order metadata of two keys.

\begin{DoxyReturn}{Returns}
a number less than, equal to or greater than zero if the order of k1 is found, respectively, to be less than, to match, or be greater than the order of k2. If one key is N\-U\-L\-L, but the other isn't, the key which is not N\-U\-L\-L is considered to be greater. If both keys are N\-U\-L\-L, they are considered to be equal. If one key does have an order metadata but the other has not, the key with the metadata is considered greater. If no key has metadata, they are considered to be equal.
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em ka} & key to compare with \\
\hline
{\em kb} & other key to compare with \\
\hline
\end{DoxyParams}
\hypertarget{group__keyset_gac3e995819383f904369c260f212125f5}{\index{Key\-Set@{Key\-Set}!elektra\-Ks\-To\-Mem\-Array@{elektra\-Ks\-To\-Mem\-Array}}
\index{elektra\-Ks\-To\-Mem\-Array@{elektra\-Ks\-To\-Mem\-Array}!KeySet@{Key\-Set}}
\subsubsection[{elektra\-Ks\-To\-Mem\-Array}]{\setlength{\rightskip}{0pt plus 5cm}int elektra\-Ks\-To\-Mem\-Array (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{Key $\ast$$\ast$}]{buffer}
\end{DoxyParamCaption}
)}}\label{group__keyset_gac3e995819383f904369c260f212125f5}
Builds an array of pointers to the keys in the supplied keyset. The keys are not copied, calling key\-Del may remove them from the keyset.

The size of the buffer can be easily allocated via ks\-Get\-Size. Example\-: 
\begin{DoxyCode}
KeySet *ks = somekeyset;
Key **keyArray = calloc (\hyperlink{group__keyset_ga7474ad6b0a0fa969dbdf267ba5770eee}{ksGetSize}(ks), \textcolor{keyword}{sizeof} (Key *));
\hyperlink{group__keyset_gac3e995819383f904369c260f212125f5}{elektraKsToMemArray} (ks, keyArray);
... work with the array ...
free (keyArray);
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
{\em buffer} & the buffer to put the result into \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of elements in the array if successful 

a negative number on null pointers or if an error occurred 
\end{DoxyReturn}
\hypertarget{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{\index{Key\-Set@{Key\-Set}!ks\-Append@{ks\-Append}}
\index{ks\-Append@{ks\-Append}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Append}]{\setlength{\rightskip}{0pt plus 5cm}ssize\-\_\-t ks\-Append (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{const Key\-Set $\ast$}]{to\-Append}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}




Append all {\ttfamily to\-Append} contained keys to the end of the {\ttfamily ks}.

{\ttfamily to\-Append} Key\-Set will be left unchanged.

If a key is both in to\-Append and ks, the Key in ks will be overridden.

\begin{DoxyNote}{Note}
Because the key is not copied, also the pointer to the current metadata \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{key\-Next\-Meta()} will be shared. 
\end{DoxyNote}


\begin{DoxyPostcond}{Postcondition}
Sorted Key\-Set ks with all keys it had before and additionally the keys from to\-Append 
\end{DoxyPostcond}
\begin{DoxyReturn}{Returns}
the size of the Key\-Set after transfer 

-\/1 on N\-U\-L\-L pointers 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em ks} & the Key\-Set that will receive the keys \\
\hline
{\em to\-Append} & the Key\-Set that provides the keys that will be transferred \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ks\-Append\-Key()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{\index{Key\-Set@{Key\-Set}!ks\-Append\-Key@{ks\-Append\-Key}}
\index{ks\-Append\-Key@{ks\-Append\-Key}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Append\-Key}]{\setlength{\rightskip}{0pt plus 5cm}ssize\-\_\-t ks\-Append\-Key (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{Key $\ast$}]{to\-Append}
\end{DoxyParamCaption}
)}}\label{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}




Appends a Key to the end of {\ttfamily ks}.

A pointer to the key will be stored, and not a private copy. So a future \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} on {\ttfamily ks} may \hyperlink{group__key_ga3df95bbc2494e3e6703ece5639be5bb1}{key\-Del()} the {\ttfamily to\-Append} object, see \hyperlink{group__key_ga4aabc4272506dd63161db2bbb42de8ae}{key\-Get\-Ref()}.

The reference counter of the key will be incremented, and thus to\-Append is not const.

\begin{DoxyNote}{Note}
Because the key is not copied, also the pointer to the current metadata \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{key\-Next\-Meta()} will be shared. 
\end{DoxyNote}


If the keyname already existed, it will be replaced with the new key.

The Key\-Set internal cursor will be set to the new key.

It is save to use ks\-Append\-Key(ks, key\-New(..)).

\begin{DoxyReturn}{Returns}
the size of the Key\-Set after insertion 

-\/1 on N\-U\-L\-L pointers 

-\/1 if insertion failed, the key will be deleted then. 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em ks} & Key\-Set that will receive the key \\
\hline
{\em to\-Append} & Key that will be appended to ks or deleted \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ks\-Append()}, \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{key\-New()}, \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} 

\hyperlink{group__key_ga6970a6f254d67af7e39f8e469bb162f1}{key\-Inc\-Ref()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_ga3604cc41505f7e19db945cece67190b6}{\index{Key\-Set@{Key\-Set}!ks\-At\-Cursor@{ks\-At\-Cursor}}
\index{ks\-At\-Cursor@{ks\-At\-Cursor}!KeySet@{Key\-Set}}
\subsubsection[{ks\-At\-Cursor}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-At\-Cursor (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{cursor\-\_\-t}]{pos}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga3604cc41505f7e19db945cece67190b6}


return key at given cursor position 


\begin{DoxyParams}{Parameters}
{\em ks} & the keyset to pop key from \\
\hline
{\em pos} & where to get \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the key at the cursor position on success 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em N\-U\-L\-L} & on N\-U\-L\-L pointer, negative cursor position or a position that does not lie within the keyset \\
\hline
\end{DoxyRetVals}
\hypertarget{group__keyset_gaba1f1dbea191f4d7e7eb3e4296ae7d5e}{\index{Key\-Set@{Key\-Set}!ks\-Copy@{ks\-Copy}}
\index{ks\-Copy@{ks\-Copy}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Copy}]{\setlength{\rightskip}{0pt plus 5cm}int ks\-Copy (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{dest, }
\item[{const Key\-Set $\ast$}]{source}
\end{DoxyParamCaption}
)}}\label{group__keyset_gaba1f1dbea191f4d7e7eb3e4296ae7d5e}




Copy a keyset.

Most often you may want a duplicate of a keyset, see \hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup()} or append keys, see \hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ks\-Append()}. But in some situations you need to copy a keyset to a existing keyset, for that this function exists.

You can also use it to clear a keyset when you pass a N\-U\-L\-L pointer as {\ttfamily source}.

Note that all keys in {\ttfamily dest} will be deleted. Afterwards the content of the source will be added to the destination and the \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} is set properly in {\ttfamily dest}.

A flat copy is made, so the keys will not be duplicated, but there reference counter is updated, so both keysets need to be \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}.

\begin{DoxyNote}{Note}
Because the key is not copied, also the pointer to the current metadata \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{key\-Next\-Meta()} will be shared. 
\end{DoxyNote}



\begin{DoxyCode}
\textcolor{keywordtype}{int} f (KeySet *ks)
\{
        KeySet *c = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew} (20, ..., KS\_END);
        \textcolor{comment}{// c receives keys}
        \hyperlink{group__keyset_gaba1f1dbea191f4d7e7eb3e4296ae7d5e}{ksCopy} (ks, c); \textcolor{comment}{// pass the keyset to the caller}

        \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (c);
\}       \textcolor{comment}{// caller needs to ksDel (ks)}
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em source} & has to be an initialized source Key\-Set or N\-U\-L\-L \\
\hline
{\em dest} & has to be an initialized Key\-Set where to write the keys \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 on success 

0 if dest was cleared successfully (source is N\-U\-L\-L) 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()}, \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}, \hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup()} 

\hyperlink{group__key_ga6a12cbbe656a1ad9f41b8c681d7a2f92}{key\-Copy()} for copying keys 
\end{DoxySeeAlso}
\hypertarget{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{\index{Key\-Set@{Key\-Set}!ks\-Current@{ks\-Current}}
\index{ks\-Current@{ks\-Current}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Current}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Current (
\begin{DoxyParamCaption}
\item[{const Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}
Return the current Key.

The pointer is N\-U\-L\-L if you reached the end or after \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}.

\begin{DoxyNote}{Note}
You must not delete the key or change the key, use \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()} if you want to delete it.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to the Key pointed by {\ttfamily ks's} cursor 

0 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()}, \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_ga6b00cf82b59af4d883a9bad6cf4a4a4a}{\index{Key\-Set@{Key\-Set}!ks\-Cut@{ks\-Cut}}
\index{ks\-Cut@{ks\-Cut}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Cut}]{\setlength{\rightskip}{0pt plus 5cm}Key\-Set$\ast$ ks\-Cut (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{const Key $\ast$}]{cutpoint}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga6b00cf82b59af4d883a9bad6cf4a4a4a}
Cuts out a keyset at the cutpoint.

Searches for the cutpoint inside the Key\-Set ks. If found it cuts out everything which is below (see \hyperlink{group__keytest_ga03332b5d97c76a4fd2640aca4762b8df}{key\-Is\-Below()}) this key. These keys will be missing in the keyset {\ttfamily ks}. Instead, they will be moved to the returned keyset. If {\ttfamily cutpoint} is not found an empty keyset is returned and {\ttfamily ks} is not changed.

The cursor will stay at the same key as it was before. If the cursor was inside the region of cut (moved) keys, the cursor will be set to the key before the cutpoint.

If you use \hyperlink{group__keyset_ga6b00cf82b59af4d883a9bad6cf4a4a4a}{ks\-Cut()} on a keyset you got from \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} and plan to make a \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} later, make sure that you keep all keys that should not be removed permanently. You have to keep the Key\-Set that was returned and the Key\-Set {\ttfamily ks}.

\begin{DoxyParagraph}{Example\-:}

\end{DoxyParagraph}
You have the keyset {\ttfamily ks\-:} 
\begin{DoxyItemize}
\item {\ttfamily system/mountpoint/interest} 
\item {\ttfamily system/mountpoint/interest/folder} 
\item {\ttfamily system/mountpoint/interest/folder/key1} 
\item {\ttfamily system/mountpoint/interest/folder/key2} 
\item {\ttfamily system/mountpoint/other/key1} 
\end{DoxyItemize}

When you use 
\begin{DoxyCodeInclude}
        Key *parentKey = \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"system/mountpoint/interest"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END}
      );
        KDB *kdb = \hyperlink{group__kdb_ga6808defe5870f328dd17910aacbdc6ca}{kdbOpen}(parentKey);
        KeySet *ks = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(0, KS\_END);
        \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdbGet}(kdb, ks, parentKey);
        KeySet *returned = \hyperlink{group__keyset_ga6b00cf82b59af4d883a9bad6cf4a4a4a}{ksCut}(ks, parentKey);
        \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdbSet}(kdb, ks, parentKey); \textcolor{comment}{// all keys below cutpoint are now
       removed}
        \hyperlink{group__kdb_gadb54dc9fda17ee07deb9444df745c96f}{kdbClose}(kdb, parentKey);
\end{DoxyCodeInclude}
 Then in {\ttfamily returned} are\-:
\begin{DoxyItemize}
\item {\ttfamily system/mountpoint/interest} 
\item {\ttfamily system/mountpoint/interest/folder} 
\item {\ttfamily system/mountpoint/interest/folder/key1} 
\item {\ttfamily system/mountpoint/interest/folder/key2} 
\end{DoxyItemize}

And in {\ttfamily ks} are\-:
\begin{DoxyItemize}
\item {\ttfamily system/mountpoint/other/key1} 
\end{DoxyItemize}

So \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} permanently removes all keys below {\ttfamily system/mountpoint/interest}.

\begin{DoxySeeAlso}{See Also}
\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} for explanation why you might get more keys than you requested.
\end{DoxySeeAlso}
\begin{DoxyReturn}{Returns}
a new allocated Key\-Set which needs to deleted with \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}. The keyset consists of all keys (of the original keyset ks) below the cutpoint. If the key cutpoint exists, it will also be appended. 
\end{DoxyReturn}

\begin{DoxyRetVals}{Return values}
{\em 0} & on null pointers, no key name or allocation problems \\
\hline
\end{DoxyRetVals}

\begin{DoxyParams}{Parameters}
{\em ks} & the keyset to cut. It will be modified by removing all keys below the cutpoint. The cutpoint itself will also be removed. \\
\hline
{\em cutpoint} & the point where to cut out the keyset \\
\hline
\end{DoxyParams}
\hypertarget{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{\index{Key\-Set@{Key\-Set}!ks\-Del@{ks\-Del}}
\index{ks\-Del@{ks\-Del}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Del}]{\setlength{\rightskip}{0pt plus 5cm}int ks\-Del (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}
A destructor for Key\-Set objects.

Cleans all internal dynamic attributes, decrement all reference pointers to all keys and then \hyperlink{group__key_ga3df95bbc2494e3e6703ece5639be5bb1}{key\-Del()} all contained Keys, and free()s the release the Key\-Set object memory (that was previously allocated by \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()}).


\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 when the keyset was freed 

-\/1 on null pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gac59e4b328245463f1451f68d5106151c}{\index{Key\-Set@{Key\-Set}!ks\-Dup@{ks\-Dup}}
\index{ks\-Dup@{ks\-Dup}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Dup}]{\setlength{\rightskip}{0pt plus 5cm}Key\-Set$\ast$ ks\-Dup (
\begin{DoxyParamCaption}
\item[{const Key\-Set $\ast$}]{source}
\end{DoxyParamCaption}
)}}\label{group__keyset_gac59e4b328245463f1451f68d5106151c}
Return a duplicate of a keyset.

Objects created with \hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup()} must be destroyed with \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}.

Memory will be allocated as needed for dynamic properties, so you need to \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} the returned pointer.

A flat copy is made, so the keys will not be duplicated, but there reference counter is updated, so both keysets need \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}.


\begin{DoxyParams}{Parameters}
{\em source} & has to be an initialized source Key\-Set \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a flat copy of source on success 

0 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()}, \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} 

\hyperlink{group__key_gae6ec6a60cc4b8c1463fa08623d056ce3}{key\-Dup()} for \hyperlink{group__key}{Key} duplication 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{\index{Key\-Set@{Key\-Set}!ks\-Get\-Cursor@{ks\-Get\-Cursor}}
\index{ks\-Get\-Cursor@{ks\-Get\-Cursor}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Get\-Cursor}]{\setlength{\rightskip}{0pt plus 5cm}cursor\-\_\-t ks\-Get\-Cursor (
\begin{DoxyParamCaption}
\item[{const Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_gaffe507ab9281c322eb16c3e992075d29}
Get the Key\-Set internal cursor.

Use it to get the cursor of the actual position.

\begin{DoxyWarning}{Warning}
Cursors are getting invalid when the key was \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()}ed or \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} with K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P was used.
\end{DoxyWarning}
\hypertarget{group__keyset_readahead}{}\subsection{Read ahead}\label{group__keyset_readahead}
With the cursors it is possible to read ahead in a keyset\-:


\begin{DoxyCode}
cursor\_t jump;
\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ksRewind} (ks);
\textcolor{keywordflow}{while} ((key = \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{keyNextMeta} (ks))!=0)
\{
        \textcolor{comment}{// now mark this key}
        jump = \hyperlink{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{ksGetCursor}(ks);

        \textcolor{comment}{//code..}
        \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{keyNextMeta} (ks); \textcolor{comment}{// now browse on}
        \textcolor{comment}{// use ksCurrent(ks) to check the keys}
        \textcolor{comment}{//code..}

        \textcolor{comment}{// jump back to the position marked before}
        \hyperlink{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}{ksSetCursor}(ks, jump);
\}
\end{DoxyCode}
\hypertarget{group__keyset_restore}{}\subsection{Restoring state}\label{group__keyset_restore}
It can also be used to restore the state of a keyset in a function


\begin{DoxyCode}
\textcolor{keywordtype}{int} f (KeySet *ks)
\{
        cursor\_t state = \hyperlink{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{ksGetCursor}(ks);

        \textcolor{comment}{// work with keyset}

        \textcolor{comment}{// now bring the keyset to the state before}
        \hyperlink{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}{ksSetCursor} (ks, state);
\}
\end{DoxyCode}


It is of course possible to make the Key\-Set const and cast its const away to set the cursor. Another way to achieve the same is to \hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup()} the keyset, but it is not as efficient.

An invalid cursor will be returned directly after \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}. When you set an invalid cursor \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} is 0 and \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} == \hyperlink{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}{ks\-Head()}.

\begin{DoxyNote}{Note}
Only use a cursor for the same keyset which it was made for.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a valid cursor on success 

an invalid cursor on N\-U\-L\-L pointer or after \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()} 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()}, \hyperlink{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}{ks\-Set\-Cursor()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_ga7474ad6b0a0fa969dbdf267ba5770eee}{\index{Key\-Set@{Key\-Set}!ks\-Get\-Size@{ks\-Get\-Size}}
\index{ks\-Get\-Size@{ks\-Get\-Size}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Get\-Size}]{\setlength{\rightskip}{0pt plus 5cm}ssize\-\_\-t ks\-Get\-Size (
\begin{DoxyParamCaption}
\item[{const Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga7474ad6b0a0fa969dbdf267ba5770eee}
Return the number of keys that {\ttfamily ks} contains.


\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the number of keys that {\ttfamily ks} contains. 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
ks\-New(0, K\-S\-\_\-\-E\-N\-D), \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}{\index{Key\-Set@{Key\-Set}!ks\-Head@{ks\-Head}}
\index{ks\-Head@{ks\-Head}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Head}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Head (
\begin{DoxyParamCaption}
\item[{const Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}
Return the first key in the Key\-Set.

The Key\-Sets cursor will not be effected.

If \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()}==\hyperlink{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}{ks\-Head()} you know you are on the first key.


\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the first Key of a keyset 

0 on N\-U\-L\-L pointer or empty keyset 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gadca442c4ab43cf532b15091d7711559e}{ks\-Tail()} for the last \hyperlink{group__key}{Key} 

\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}, \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} and \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} for iterating over the \hyperlink{group__keyset}{Key\-Set} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{\index{Key\-Set@{Key\-Set}!ks\-Lookup@{ks\-Lookup}}
\index{ks\-Lookup@{ks\-Lookup}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Lookup}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Lookup (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{Key $\ast$}]{key, }
\item[{{\bf option\-\_\-t}}]{options}
\end{DoxyParamCaption}
)}}\label{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}
Look for a Key contained in {\ttfamily ks} that matches the name of the {\ttfamily key}.\hypertarget{group__keyset_Introduction}{}\subsection{Introduction}\label{group__keyset_Introduction}
{\ttfamily \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()}} is designed to let you work with entirely pre-\/loaded Key\-Sets, so instead of kdb\-Get\-Key(), key by key, the idea is to fully \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} for your application root key and process it all at once with {\ttfamily \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()}}.

This function is very efficient by using binary search. Together with \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} which can you load the whole configuration with only some communication to backends you can write very effective but short code for configuration.\hypertarget{group__keyset_Usage}{}\subsection{Usage}\label{group__keyset_Usage}
If found, {\ttfamily ks} internal cursor will be positioned in the matched key (also accessible by \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()}), and a pointer to the Key is returned. If not found, {\ttfamily ks} internal cursor will not move, and a N\-U\-L\-L pointer is returned.

Cascading is done if the first character is a /. This leads to ignoring the prefix like system/ and user/. 
\begin{DoxyCode}
\textcolor{keywordflow}{if} (\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdbGet}(handle, \textcolor{stringliteral}{"user/myapp"}, myConfig, 0 ) == -1)
        errorHandler (\textcolor{stringliteral}{"Could not get Keys"});

\textcolor{keywordflow}{if} (\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdbGet}(handle, \textcolor{stringliteral}{"system/myapp"}, myConfig, 0 ) == -1)
        errorHandler (\textcolor{stringliteral}{"Could not get Keys"});

\textcolor{keywordflow}{if} ((myKey = \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ksLookup}(myConfig, key, 0)) == NULL)
        errorHandler (\textcolor{stringliteral}{"Could not Lookup Key"});
\end{DoxyCode}


This is the way multi user Programs should get there configuration and search after the values. It is guaranteed that more namespaces can be added easily and that all values can be set by admin and user.\hypertarget{group__keyset_KDB_O_NOALL}{}\subsubsection{K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L}\label{group__keyset_KDB_O_NOALL}
When K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L is set the keyset will be only searched from \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} to \hyperlink{group__keyset_gadca442c4ab43cf532b15091d7711559e}{ks\-Tail()}. You need to \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()} the keyset yourself. \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} is always set properly after searching a key, so you can go on searching another key after the found key.

When K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L is not set the cursor will stay untouched and all keys are considered. A much more efficient binary search will be used then.\hypertarget{group__keyset_KDB_O_POP}{}\subsubsection{K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P}\label{group__keyset_KDB_O_POP}
When K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P is set the key which was found will be \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()}ed. \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} will not be changed, only iff \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} is the searched key, then the keyset will be \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}ed.

\begin{DoxyNote}{Note}
Like in \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()} the popped key always needs to be \hyperlink{group__key_ga3df95bbc2494e3e6703ece5639be5bb1}{key\-Del()} afterwards, even if it is appended to another keyset.
\end{DoxyNote}
\begin{DoxyWarning}{Warning}
All cursors on the keyset will be invalid iff you use K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P, so don't use this if you rely on a cursor, see \hyperlink{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{ks\-Get\-Cursor()}.
\end{DoxyWarning}
You can solve this problem by using K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L, risking you have to iterate n$^\wedge$2 instead of n.

The more elegant way is to separate the keyset you use for \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} and \hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ks\-Append\-Key()}\-: 
\begin{DoxyCode}
\textcolor{keywordtype}{int} f(KeySet *iterator, KeySet *lookup)
\{
        KeySet *append = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew} (\hyperlink{group__keyset_ga7474ad6b0a0fa969dbdf267ba5770eee}{ksGetSize}(lookup), KS\_END);
        Key *key;
        Key *current;

        \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ksRewind}(iterator);
        \textcolor{keywordflow}{while} (current=\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ksNext}(iterator))
        \{
                key = \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ksLookup} (lookup, current, \hyperlink{group__keyset_gga98a3d6a4016c9dad9cbd1a99a9c2a45aa52fb5f2cc86773d393da62bebebf7984}{KDB\_O\_POP});
                \textcolor{comment}{// do something...}
                \hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ksAppendKey}(append, key); \textcolor{comment}{// now append it to
       append, not lookup!}
                \hyperlink{group__key_ga3df95bbc2494e3e6703ece5639be5bb1}{keyDel} (key); \textcolor{comment}{// make sure to ALWAYS delete poped keys.}
        \}
        \hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ksAppend}(lookup, append);
        \textcolor{comment}{// now lookup needs to be sorted only once, append never}
        \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (append);
\}
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em ks} & where to look for \\
\hline
{\em key} & the key object you are looking for \\
\hline
{\em options} & some {\ttfamily K\-D\-B\-\_\-\-O\-\_\-$\ast$} option bits\-:
\begin{DoxyItemize}
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E} \par
 Lookup ignoring case.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R} \par
 Also consider correct owner.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L} \par
 Only search from \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} to end of keyset, see above text.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P} \par
 Pop the key which was found.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-D\-E\-L} \par
 Delete the passed key. 
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to the Key found, 0 otherwise 

0 on N\-U\-L\-L pointers 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ks\-Lookup\-By\-Name()} to search by a name given by a string 

\hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()}, \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}, \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} for iterating over a \hyperlink{group__keyset}{Key\-Set} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{\index{Key\-Set@{Key\-Set}!ks\-Lookup\-By\-Name@{ks\-Lookup\-By\-Name}}
\index{ks\-Lookup\-By\-Name@{ks\-Lookup\-By\-Name}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Lookup\-By\-Name}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Lookup\-By\-Name (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{const char $\ast$}]{name, }
\item[{{\bf option\-\_\-t}}]{options}
\end{DoxyParamCaption}
)}}\label{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}
Look for a Key contained in {\ttfamily ks} that matches {\ttfamily name}.

{\ttfamily \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ks\-Lookup\-By\-Name()}} is designed to let you work with entirely pre-\/loaded Key\-Sets, so instead of kdb\-Get\-Key(), key by key, the idea is to fully kdb\-Get\-By\-Name() for your application root key and process it all at once with {\ttfamily \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ks\-Lookup\-By\-Name()}}.

This function is very efficient by using binary search. Together with kdb\-Get\-By\-Name() which can you load the whole configuration with only some communication to backends you can write very effective but short code for configuration.

If found, {\ttfamily ks} internal cursor will be positioned in the matched key (also accessible by \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()}), and a pointer to the Key is returned. If not found, {\ttfamily ks} internal cursor will not move, and a N\-U\-L\-L pointer is returned. If requested to pop the key, the cursor will be rewinded.\hypertarget{group__keyset_cascading}{}\subsection{Cascading}\label{group__keyset_cascading}
Cascading is done if the first character is a /. This leads to ignoring the prefix like system/ and user/. 
\begin{DoxyCode}
\textcolor{keywordflow}{if} (\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdbGet}(handle, \textcolor{stringliteral}{"user/sw/myapp/current"}, myConfig, parentKey ) == -1)
        errorHandler (\textcolor{stringliteral}{"Could not get Keys"}, parentKey);

\textcolor{keywordflow}{if} (\hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdbGet}(handle, \textcolor{stringliteral}{"system/sw/myapp/current"}, myConfig, parentKey ) == -1
      )
        errorHandler (\textcolor{stringliteral}{"Could not get Keys"}, parentKey);

\textcolor{keywordflow}{if} ((myKey = \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ksLookupByName} (myConfig, \textcolor{stringliteral}{"/myapp/current/key"}, 0)) 
      == NULL)
        errorHandler (\textcolor{stringliteral}{"Could not Lookup Key"});
\end{DoxyCode}


This is the way multi user Programs should get there configuration and search after the values. It is guaranteed that more namespaces can be added easily and that all values can be set by admin and user.

It is up to the application to implement a sophisticated cascading algorithm, for e.\-g. a list of profiles (specific, group and fallback)\-: 
\begin{DoxyCode}
\textcolor{keywordflow}{if} ((myKey = \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ksLookupByName} (myConfig, \textcolor{stringliteral}{"
      /myapp/current/specific/key"}, 0)) == NULL)
        \textcolor{keywordflow}{if} ((myKey = \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ksLookupByName} (myConfig, \textcolor{stringliteral}{"
      /myapp/current/group/key"}, 0)) == NULL)
                \textcolor{keywordflow}{if} ((myKey = \hyperlink{group__keyset_gad2e30fb6d4739d917c5abb2ac2f9c1a1}{ksLookupByName} (myConfig, \textcolor{stringliteral}{"
      /myapp/current/fallback/key"}, 0)) == NULL)
                        errorHandler (\textcolor{stringliteral}{"All fallbacks failed to lookup key"});
\end{DoxyCode}


Note that for every profile both the user and the system key are searched. The first key found will be used.\hypertarget{group__keyset_fullsearch}{}\subsection{Full Search}\label{group__keyset_fullsearch}
When K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L is set the keyset will be only searched from \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} to \hyperlink{group__keyset_gadca442c4ab43cf532b15091d7711559e}{ks\-Tail()}. You need to \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()} the keyset yourself. \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} is always set properly after searching a key, so you can go on searching another key after the found key.

When K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L is not set the cursor will stay untouched and all keys are considered. A much more efficient binary search will be used then.


\begin{DoxyParams}{Parameters}
{\em ks} & where to look for \\
\hline
{\em name} & key name you are looking for \\
\hline
{\em options} & some {\ttfamily K\-D\-B\-\_\-\-O\-\_\-$\ast$} option bits\-:
\begin{DoxyItemize}
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-C\-A\-S\-E} \par
 Lookup ignoring case.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-W\-I\-T\-H\-O\-W\-N\-E\-R} \par
 Also consider correct owner.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-N\-O\-A\-L\-L} \par
 Only search from \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} to end of keyset, see above text.
\item {\ttfamily K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P} \par
 Pop the key which was found.
\end{DoxyItemize}\\
\hline
\end{DoxyParams}
Currently no options supported. \begin{DoxyReturn}{Returns}
pointer to the Key found, 0 otherwise 

0 on N\-U\-L\-L pointers 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_gab98168409d302fdb65692f6e26f17945}{key\-Compare()} for very powerful Key lookups in Key\-Sets 

\hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()}, \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}, \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{\index{Key\-Set@{Key\-Set}!ks\-New@{ks\-New}}
\index{ks\-New@{ks\-New}!KeySet@{Key\-Set}}
\subsubsection[{ks\-New}]{\setlength{\rightskip}{0pt plus 5cm}Key\-Set$\ast$ ks\-New (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{alloc, }
\item[{}]{...}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}
Allocate, initialize and return a new Key\-Set object.

Objects created with \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()} must be destroyed with \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}.

You can use a various long list of parameters to preload the keyset with a list of keys. Either your first and only parameter is 0 or your last parameter must be K\-E\-Y\-\_\-\-E\-N\-D.

So, terminate with ks\-New(0, K\-S\-\_\-\-E\-N\-D) or ks\-New(20, ..., K\-S\-\_\-\-E\-N\-D)

For most uses 
\begin{DoxyCode}
KeySet *keys = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(0, KS\_END);
\textcolor{comment}{// work with it}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (keys);
\end{DoxyCode}
 goes ok, the alloc size will be 16, defined in kdbprivate.\-h. The alloc size will be doubled whenever size reaches alloc size, so it also performs out large keysets.

But if you have any clue how large your keyset may be you should read the next statements.

If you want a keyset with length 15 (because you know of your application that you normally need about 12 up to 15 keys), use\-: 
\begin{DoxyCode}
KeySet * keys = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew} (15,
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key01"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value01"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key02"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value02"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key03"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value03"}, 0),
        \textcolor{comment}{// ...}
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key15"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value15"}, 0),
        KS\_END);
\textcolor{comment}{// work with it}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (keys);
\end{DoxyCode}


If you start having 3 keys, and your application needs approximately 200-\/500 keys, you can use\-: 
\begin{DoxyCode}
KeySet * config = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew} (500,
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key1"}, KEY\_SWITCH\_VALUE, \textcolor{stringliteral}{
      "value1"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key2"}, KEY\_SWITCH\_VALUE, \textcolor{stringliteral}{
      "value2"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key3"}, KEY\_SWITCH\_VALUE, \textcolor{stringliteral}{
      "value3"}, 0),
        KS\_END); \textcolor{comment}{// don't forget the KS\_END at the end!}
\textcolor{comment}{// work with it}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (config);
\end{DoxyCode}
 Alloc size is 500, the size of the keyset will be 3 after ks\-New. This means the keyset will reallocate when appending more than 497 keys.

The main benefit of taking a list of variant length parameters is to be able to have one C-\/\-Statement for any possible Key\-Set.

\begin{DoxyPostcond}{Postcondition}
the keyset is rewinded properly
\end{DoxyPostcond}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} to free the \hyperlink{group__keyset}{Key\-Set} afterwards 

\hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup()} to duplicate an existing \hyperlink{group__keyset}{Key\-Set} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em alloc} & gives a hint for the size how many Keys may be stored initially \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a ready to use Key\-Set object 

0 on memory error 
\end{DoxyReturn}
\hypertarget{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{\index{Key\-Set@{Key\-Set}!ks\-Next@{ks\-Next}}
\index{ks\-Next@{ks\-Next}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Next}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Next (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}
Returns the next Key in a Key\-Set.

Key\-Sets have an internal cursor that can be reset with \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}. Every time \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} is called the cursor is incremented and the new current Key is returned.

You'll get a N\-U\-L\-L pointer if the key after the end of the Key\-Set was reached. On subsequent calls of \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} it will still return the N\-U\-L\-L pointer.

The {\ttfamily ks} internal cursor will be changed, so it is not const.

\begin{DoxyNote}{Note}
You must not delete or change the key, use \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()} if you want to delete it.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the new current Key 

0 when the end is reached 

0 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}, \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gae42530b04defb772059de0600159cf69}{\index{Key\-Set@{Key\-Set}!ks\-Pop@{ks\-Pop}}
\index{ks\-Pop@{ks\-Pop}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Pop}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Pop (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_gae42530b04defb772059de0600159cf69}
Remove and return the last key of {\ttfamily ks}.

The reference counter will be decremented by one.

The Key\-Sets cursor will not be effected if it did not point to the popped key.

\begin{DoxyNote}{Note}
You need to \hyperlink{group__key_ga3df95bbc2494e3e6703ece5639be5bb1}{key\-Del()} the key afterwards, if you don't append it to another keyset. It has the same semantics like a key allocated with \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{key\-New()} or \hyperlink{group__key_gae6ec6a60cc4b8c1463fa08623d056ce3}{key\-Dup()}.
\end{DoxyNote}

\begin{DoxyCode}
ks1=\hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(0, KS\_END);
ks2=\hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(0, KS\_END);

k1=\hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"user/name"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END}); \textcolor{comment}{// ref counter 0}
\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ksAppendKey}(ks1, k1); \textcolor{comment}{// ref counter 1}
\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ksAppendKey}(ks2, k1); \textcolor{comment}{// ref counter 2}

k1=\hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ksPop} (ks1); \textcolor{comment}{// ref counter 1}
k1=\hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ksPop} (ks2); \textcolor{comment}{// ref counter 0, like after keyNew()}

\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ksAppendKey}(ks1, k1); \textcolor{comment}{// ref counter 1}

\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (ks1); \textcolor{comment}{// key is deleted too}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (ks2);
 *
\end{DoxyCode}


\begin{DoxyReturn}{Returns}
the last key of {\ttfamily ks} 

N\-U\-L\-L if {\ttfamily ks} is empty or on N\-U\-L\-L pointer 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em ks} & Key\-Set to work with \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ks\-Append\-Key()}, \hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ks\-Append()} 

command\-List() for an example 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{\index{Key\-Set@{Key\-Set}!ks\-Rewind@{ks\-Rewind}}
\index{ks\-Rewind@{ks\-Rewind}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Rewind}]{\setlength{\rightskip}{0pt plus 5cm}int ks\-Rewind (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}
Rewinds the Key\-Set internal cursor.

Use it to set the cursor to the beginning of the Key\-Set. \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} will then always return N\-U\-L\-L afterwards. So you want to \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} first.


\begin{DoxyCode}
\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ksRewind} (ks);
\textcolor{keywordflow}{while} ((key = \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ksNext} (ks))!=0) \{\}
\end{DoxyCode}



\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()}, \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}{\index{Key\-Set@{Key\-Set}!ks\-Set\-Cursor@{ks\-Set\-Cursor}}
\index{ks\-Set\-Cursor@{ks\-Set\-Cursor}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Set\-Cursor}]{\setlength{\rightskip}{0pt plus 5cm}int ks\-Set\-Cursor (
\begin{DoxyParamCaption}
\item[{Key\-Set $\ast$}]{ks, }
\item[{cursor\-\_\-t}]{cursor}
\end{DoxyParamCaption}
)}}\label{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}
Set the Key\-Set internal cursor.

Use it to set the cursor to a stored position. \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} will then be the position which you got with.

\begin{DoxyWarning}{Warning}
Cursors may get invalid when the key was \hyperlink{group__keyset_gae42530b04defb772059de0600159cf69}{ks\-Pop()}ed or \hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} was used together with K\-D\-B\-\_\-\-O\-\_\-\-P\-O\-P.
\end{DoxyWarning}

\begin{DoxyCode}
cursor\_t cursor;
..
\textcolor{comment}{// key now in any position here}
cursor = \hyperlink{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{ksGetCursor} (ks);
\textcolor{keywordflow}{while} ((key = \hyperlink{group__keymeta_ga4c88342f580a4291455a801af71ce048}{keyNextMeta} (ks))!=0) \{\}
\hyperlink{group__keyset_gad94c9ffaa3e8034564c0712fd407c345}{ksSetCursor} (ks, cursor); \textcolor{comment}{// reset state}
\hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ksCurrent}(ks); \textcolor{comment}{// in same position as before}
\end{DoxyCode}


An invalid cursor will set the keyset to its beginning like \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}. When you set an invalid cursor \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} is 0 and \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} == \hyperlink{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}{ks\-Head()}.


\begin{DoxyParams}{Parameters}
{\em cursor} & the cursor to use \\
\hline
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 when the keyset is \hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}ed 

1 otherwise 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()}, \hyperlink{group__keyset_gaffe507ab9281c322eb16c3e992075d29}{ks\-Get\-Cursor()} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_gadca442c4ab43cf532b15091d7711559e}{\index{Key\-Set@{Key\-Set}!ks\-Tail@{ks\-Tail}}
\index{ks\-Tail@{ks\-Tail}!KeySet@{Key\-Set}}
\subsubsection[{ks\-Tail}]{\setlength{\rightskip}{0pt plus 5cm}Key$\ast$ ks\-Tail (
\begin{DoxyParamCaption}
\item[{const Key\-Set $\ast$}]{ks}
\end{DoxyParamCaption}
)}}\label{group__keyset_gadca442c4ab43cf532b15091d7711559e}
Return the last key in the Key\-Set.

The Key\-Sets cursor will not be effected.

If \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()}==\hyperlink{group__keyset_gadca442c4ab43cf532b15091d7711559e}{ks\-Tail()} you know you are on the last key. \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} will return a N\-U\-L\-L pointer afterwards.


\begin{DoxyParams}{Parameters}
{\em ks} & the keyset object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the last Key of a keyset 

0 on N\-U\-L\-L pointer or empty keyset 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gae7dbf3aef70e67b5328475eb3d1f92f5}{ks\-Head()} for the first \hyperlink{group__key}{Key} 

\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ks\-Rewind()}, \hyperlink{group__keyset_ga4287b9416912c5f2ab9c195cb74fb094}{ks\-Current()} and \hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ks\-Next()} for iterating over the \hyperlink{group__keyset}{Key\-Set} 
\end{DoxySeeAlso}
\hypertarget{group__keyset_ga4ff760f56693b51ab785ed7ce628e649}{\index{Key\-Set@{Key\-Set}!ks\-V\-New@{ks\-V\-New}}
\index{ks\-V\-New@{ks\-V\-New}!KeySet@{Key\-Set}}
\subsubsection[{ks\-V\-New}]{\setlength{\rightskip}{0pt plus 5cm}Key\-Set$\ast$ ks\-V\-New (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{alloc, }
\item[{va\-\_\-list}]{va}
\end{DoxyParamCaption}
)}}\label{group__keyset_ga4ff760f56693b51ab785ed7ce628e649}




Allocate, initialize and return a new Key\-Set object.

Objects created with \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ks\-New()} must be destroyed with \hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()}.

You can use a various long list of parameters to preload the keyset with a list of keys. Either your first and only parameter is 0 or your last parameter must be K\-E\-Y\-\_\-\-E\-N\-D.

So, terminate with ks\-New(0, K\-S\-\_\-\-E\-N\-D) or ks\-New(20, ..., K\-S\-\_\-\-E\-N\-D)

For most uses 
\begin{DoxyCode}
KeySet *keys = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(0, KS\_END);
\textcolor{comment}{// work with it}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (keys);
\end{DoxyCode}
 goes ok, the alloc size will be 16, defined in kdbprivate.\-h. The alloc size will be doubled whenever size reaches alloc size, so it also performs out large keysets.

But if you have any clue how large your keyset may be you should read the next statements.

If you want a keyset with length 15 (because you know of your application that you normally need about 12 up to 15 keys), use\-: 
\begin{DoxyCode}
KeySet * keys = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew} (15,
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key01"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value01"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key02"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value02"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key03"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value03"}, 0),
        \textcolor{comment}{// ...}
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key15"}, KEY\_SWITCH\_VALUE,
       \textcolor{stringliteral}{"value15"}, 0),
        KS\_END);
\textcolor{comment}{// work with it}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (keys);
\end{DoxyCode}


If you start having 3 keys, and your application needs approximately 200-\/500 keys, you can use\-: 
\begin{DoxyCode}
KeySet * config = \hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew} (500,
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key1"}, KEY\_SWITCH\_VALUE, \textcolor{stringliteral}{
      "value1"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key2"}, KEY\_SWITCH\_VALUE, \textcolor{stringliteral}{
      "value2"}, 0),
        \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/app/fixedConfiguration/key3"}, KEY\_SWITCH\_VALUE, \textcolor{stringliteral}{
      "value3"}, 0),
        KS\_END); \textcolor{comment}{// don't forget the KS\_END at the end!}
\textcolor{comment}{// work with it}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel} (config);
\end{DoxyCode}
 Alloc size is 500, the size of the keyset will be 3 after ks\-New. This means the keyset will reallocate when appending more than 497 keys.

The main benefit of taking a list of variant length parameters is to be able to have one C-\/\-Statement for any possible Key\-Set.

\begin{DoxyPostcond}{Postcondition}
the keyset is rewinded properly
\end{DoxyPostcond}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ks\-Del()} to free the \hyperlink{group__keyset}{Key\-Set} afterwards 

\hyperlink{group__keyset_gac59e4b328245463f1451f68d5106151c}{ks\-Dup()} to duplicate an existing \hyperlink{group__keyset}{Key\-Set} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em alloc} & gives a hint for the size how many Keys may be stored initially \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
a ready to use Key\-Set object 

0 on memory error 
\end{DoxyReturn}


\begin{DoxyPrecond}{Precondition}
caller must call va\-\_\-start and va\-\_\-end 
\end{DoxyPrecond}
\begin{DoxyParagraph}{va the list of arguments}

\end{DoxyParagraph}

\begin{DoxyParams}{Parameters}
{\em alloc} & the allocation size \\
\hline
{\em va} & the list of variable arguments \\
\hline
\end{DoxyParams}
