<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: mini</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Plugin: mini </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the mini plugin is in keys below</li>
<li>infos/author = Ren√© Schwaiger <a href="#" onclick="location.href='mai'+'lto:'+'san'+'ss'+'eco'+'ur'+'s@m'+'e.'+'com'; return false;">sanss<span style="display: none;">.nosp@m.</span>ecou<span style="display: none;">.nosp@m.</span>rs@me<span style="display: none;">.nosp@m.</span>.com</a></li>
<li>infos/licence = BSD</li>
<li>infos/needs = ccode</li>
<li>infos/provides = storage/ini</li>
<li>infos/recommends =</li>
<li>infos/placements = getstorage setstorage</li>
<li>infos/status = maintained shelltest unittest nodep limited</li>
<li>infos/metadata =</li>
<li>infos/description = A minimal plugin for simple INI files</li>
</ul>
<h1><a class="anchor" id="src_plugins_mini_README_md"></a>
mINI</h1>
<p>The ‚Äúmaybe this is not INI‚Äù plugin (<code>mini</code>) is a very simple storage plugin loosely based on the <a href="https://en.wikipedia.org/wiki/INI_file">INI</a> file format. Since this plugin <b>does not support sections</b> it might be more appropriate to say that it is based on the <a href="https://en.wikipedia.org/wiki/.properties">.properties</a> format, used in many Java applications.</p>
<h2><a class="anchor" id="autotoc_md405"></a>
Examples</h2>
<h3><a class="anchor" id="autotoc_md406"></a>
Basic Usage</h3>
<p>The following example shows basic usage of the <code>mini</code> plugin.</p>
<p>``<code> @section autotoc_md407 Mount mini plugin to</code>user/tests/mini` sudo kdb mount mini.ini user/tests/mini mini</p>
<h1><a class="anchor" id="autotoc_md408"></a>
Add two key value pairs to the database</h1>
<p>kdb set user/tests/mini/key value #&gt; Create a new key user/tests/mini/key with string "value" kdb set user/tests/mini/mi/mi/mr beaker #&gt; Create a new key user/tests/mini/mi/mi/mr with string "beaker"</p>
<h1><a class="anchor" id="autotoc_md409"></a>
Export our current configuration</h1>
<p>kdb export user/tests/mini mini #&gt; key=value #&gt; mi/mi/mr=beaker</p>
<h1><a class="anchor" id="autotoc_md410"></a>
Manually add some values</h1>
<p>echo "üîë = ü¶Ñ" &gt;&gt; <code>kdb file user/tests/mini</code> echo "level1/level2 = üëæ" &gt;&gt; <code>kdb file user/tests/mini</code></p>
<h1><a class="anchor" id="autotoc_md411"></a>
Now &lt;tt&gt;user/tests/mini&lt;/tt&gt; contains four key value pairs</h1>
<p>kdb ls user/tests/mini #&gt; user/tests/mini/key #&gt; user/tests/mini/level1/level2 #&gt; user/tests/mini/mi/mi/mr #&gt; user/tests/mini/üîë</p>
<h1><a class="anchor" id="autotoc_md412"></a>
Let us check if &lt;tt&gt;user/tests/mini/üîë&lt;/tt&gt; contains the correct value</h1>
<p>kdb get "user/tests/mini/üîë" #&gt; ü¶Ñ</p>
<h1><a class="anchor" id="autotoc_md413"></a>
Undo modifications to the key database</h1>
<p>kdb rm -r user/tests/mini sudo kdb umount user/tests/mini </p><div class="fragment"><div class="line">### Escaping</div>
<div class="line"> </div>
<div class="line">As with most configuration file formats, some characters carry special meaning. In the case of the `mini` plugin that character are</div>
<div class="line"> </div>
<div class="line">1. the `=` sign, which separates keys from values and</div>
<div class="line">2. `#` and `;`, the characters that denote a comment.</div>
<div class="line"> </div>
<div class="line">In case of **key values** you do not need to care about the special meaning of these characters most of the time, since the plugin handles escaping and unescaping of them for you. Since mINI use the backslash character (`\`) to escape values, the backspace character will be escaped too (`\\`). The following example shows the escaping behavior.</div>
</div><!-- fragment --><p>sudo kdb mount mini.ini user/tests/mini mini</p>
<h1><a class="anchor" id="autotoc_md414"></a>
Store a value containing special characters</h1>
<p>kdb set user/tests/mini/key ';#=\' #&gt; Create a new key user/tests/mini/key with string ";#=\"</p>
<h1><a class="anchor" id="autotoc_md415"></a>
The actual file contains escaped version of the characters</h1>
<p>kdb file user/tests/mini | xargs cat #&gt; key=\;#=\</p>
<h1><a class="anchor" id="autotoc_md416"></a>
However, if you retrieve the value you do not have to care</h1>
<h1><a class="anchor" id="autotoc_md417"></a>
about the escaped characters</h1>
<p>kdb get user/tests/mini/key #&gt; ;#=\</p>
<h1><a class="anchor" id="autotoc_md418"></a>
If we do not escape the &lt;tt&gt;;&lt;/tt&gt; and &lt;tt&gt;#&lt;/tt&gt; characters, then they</h1>
<h1><a class="anchor" id="autotoc_md419"></a>
donate a comment.</h1>
<p>echo 'background = #0F0F0F ; Background color' &gt;&gt; <code>kdb file user/tests/mini</code> echo 'foreground = #FFFFFF # Foreground color' &gt;&gt; <code>kdb file user/tests/mini</code> kdb get user/tests/mini/background #&gt; #0F0F0F kdb get user/tests/mini/foreground #&gt; #FFFFFF</p>
<h1><a class="anchor" id="autotoc_md420"></a>
Undo modifications to the key database</h1>
<p>kdb rm -r user/tests/mini sudo kdb umount user/tests/mini </p><div class="fragment"><div class="line">In the case of **key names** you **must not use any of the characters mentioned above** (`;`, `#` and `=`) at all. Otherwise the behavior of the plugin will be **undefined**.</div>
<div class="line"> </div>
<div class="line">## Limitations</div>
<div class="line"> </div>
<div class="line">This plugin only supports simple key-value based properties files without sections. mINI also does not support metadata. If you want a more feature complete plugin, then please take a look at the [ini plugin](@ref src_plugins_ini_README_md). The example below shows some of the limitations of the plugin.</div>
</div><!-- fragment --><p>sudo kdb mount mini.ini user/tests/mini mini</p>
<h1><a class="anchor" id="autotoc_md421"></a>
The plugin does not support sections or multi-line values</h1>
<p>echo '[section]' &gt;&gt; <code>kdb file user/tests/mini</code> printf 'key="multi\nline"' &gt;&gt; <code>kdb file user/tests/mini</code></p>
<h1><a class="anchor" id="autotoc_md422"></a>
mINI only reads the first line of the value with the name &lt;tt&gt;key&lt;/tt&gt;, since</h1>
<h1><a class="anchor" id="autotoc_md423"></a>
the plugin assigns no special meaning to double or single quotes.</h1>
<p>kdb ls user/tests/mini 2&gt; stderr.txt #&gt; user/tests/mini/key</p>
<h1><a class="anchor" id="autotoc_md424"></a>
As we can see in the first two line of the standard error output below,</h1>
<h1><a class="anchor" id="autotoc_md425"></a>
mINI will inform us about lines it was unable to parse.</h1>
<p>cat stderr.txt | grep -oE 'Line [[:digit:]]+.*' | sed 's/^[[:space:]]*//' #&gt; Line 1: '[section]' is not a valid key value pair #&gt; Line 3: 'line"' is not a valid key value pair</p>
<h1><a class="anchor" id="autotoc_md426"></a>
Unlike the &lt;tt&gt;ini&lt;/tt&gt; and &lt;tt&gt;ni&lt;/tt&gt; plugin, mINI does not support metadata.</h1>
<p>kdb meta-ls user/tests/mini </p>
<h1><a class="anchor" id="autotoc_md427"></a>
RET: 1</h1>
<h1><a class="anchor" id="autotoc_md428"></a>
The value of &lt;tt&gt;key&lt;/tt&gt; also contains the double quote symbol, since mINI does</h1>
<h1><a class="anchor" id="autotoc_md429"></a>
not assign special meaning to quote characters.</h1>
<p>kdb get user/tests/mini/key #&gt; "multi</p>
<h1><a class="anchor" id="autotoc_md430"></a>
Undo modifications</h1>
<p>rm stderr.txt kdb rm -r user/tests/mini sudo kdb umount user/tests/mini ``` </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
