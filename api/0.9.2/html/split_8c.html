<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: split.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_87a455bccb09a92130c26a11a880c98a.html">libs</a></li><li class="navelem"><a class="el" href="dir_e0dd646c39a393cc8e6d3e5e227334a6.html">elektra</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">split.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Interna of splitting functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="kdbassert_8h.html">kdbassert.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="kdberrors_8h.html">kdberrors.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="kdbinternal_8h.html">kdbinternal.h</a>&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for split.c:</div>
<div class="dyncontent">
<div class="center"><img src="split_8c__incl.png" border="0" usemap="#split_8c" alt=""/></div>
<map name="split_8c" id="split_8c">
<area shape="rect" title="Interna of splitting functionality." alt="" coords="153,5,215,32"/>
<area shape="rect" href="kdbassert_8h.html" title="Assertions macros." alt="" coords="21,229,120,256"/>
<area shape="rect" href="kdberrors_8h.html" title="Provides all macros and definitions which are used for emitting error or warnings." alt="" coords="136,155,232,181"/>
<area shape="rect" href="kdbinternal_8h.html" title="Includes most internal header files." alt="" coords="1010,80,1118,107"/>
<area shape="rect" title=" " alt="" coords="57,304,156,331"/>
<area shape="rect" href="kdbmacros_8h.html" title="Macros by Elektra." alt="" coords="216,379,323,405"/>
<area shape="rect" title=" " alt="" coords="1363,379,1421,405"/>
<area shape="rect" href="kdbhelper_8h.html" title="Helper for memory management." alt="" coords="405,229,504,256"/>
<area shape="rect" href="kdblogger_8h.html" title="Logger Interface." alt="" coords="144,229,243,256"/>
<area shape="rect" title=" " alt="" coords="806,379,901,405"/>
<area shape="rect" title=" " alt="" coords="332,304,407,331"/>
<area shape="rect" title=" " alt="" coords="431,304,505,331"/>
<area shape="rect" href="kdbextension_8h.html" title="Extension functionality." alt="" coords="1711,229,1833,256"/>
<area shape="rect" href="kdbproposal_8h.html" title="Proposed declarations." alt="" coords="1601,304,1716,331"/>
<area shape="rect" href="kdbmodule_8h.html" title=" " alt="" coords="1479,229,1585,256"/>
<area shape="rect" href="kdbplugin_8h.html" title="Methods for plugin programing." alt="" coords="681,304,780,331"/>
<area shape="rect" href="kdbobsolete_8h.html" title="Obsolete/Deprecated API." alt="" coords="1768,155,1883,181"/>
<area shape="rect" href="kdbprivate_8h.html" title="Private declarations." alt="" coords="1012,155,1116,181"/>
<area shape="rect" href="kdbmeta_8h.html" title="metadata functions" alt="" coords="1741,304,1833,331"/>
<area shape="rect" title=" " alt="" coords="611,379,679,405"/>
<area shape="rect" title=" " alt="" coords="703,379,774,405"/>
<area shape="rect" href="elektra_8h.html" title="Elektra High Level API." alt="" coords="868,229,948,256"/>
<area shape="rect" href="error_8h.html" title="Elektra error." alt="" coords="1164,304,1279,331"/>
<area shape="rect" href="kdbio_8h.html" title="Elektra&#45;I/O structures for I/O bindings, plugins and applications." alt="" coords="1455,304,1526,331"/>
<area shape="rect" href="kdbnotificationinternal_8h.html" title="Elektra&#45;Notification structures and declarations for developing notification and transport plugins...." alt="" coords="973,229,1155,256"/>
<area shape="rect" href="kdbglobal_8h.html" title="Defines for global plugins." alt="" coords="695,229,793,256"/>
<area shape="rect" title=" " alt="" coords="1231,229,1302,256"/>
<area shape="rect" title=" " alt="" coords="1180,379,1263,405"/>
<area shape="rect" href="kdbnotification_8h.html" title="Elektra&#45;Notification structures and declarations for application developers." alt="" coords="1007,304,1139,331"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa17259b07015cf6c06f14814f52d01fb"><td class="memItemLeft" align="right" valign="top">Split *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#aa17259b07015cf6c06f14814f52d01fb">splitNew</a> (void)</td></tr>
<tr class="memdesc:aa17259b07015cf6c06f14814f52d01fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocates a new split object.  <a href="split_8c.html#aa17259b07015cf6c06f14814f52d01fb">More...</a><br /></td></tr>
<tr class="separator:aa17259b07015cf6c06f14814f52d01fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a455004883f0e5afccc5c78308060d70d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a455004883f0e5afccc5c78308060d70d">splitDel</a> (Split *keysets)</td></tr>
<tr class="memdesc:a455004883f0e5afccc5c78308060d70d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete a split object.  <a href="split_8c.html#a455004883f0e5afccc5c78308060d70d">More...</a><br /></td></tr>
<tr class="separator:a455004883f0e5afccc5c78308060d70d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fff7d9e737c42074ab661a1cd136b4c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a1fff7d9e737c42074ab661a1cd136b4c">splitRemove</a> (Split *split, size_t where)</td></tr>
<tr class="memdesc:a1fff7d9e737c42074ab661a1cd136b4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove one part of split.  <a href="split_8c.html#a1fff7d9e737c42074ab661a1cd136b4c">More...</a><br /></td></tr>
<tr class="separator:a1fff7d9e737c42074ab661a1cd136b4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa0850f1eb48f9f3cf6298c588b92246"><td class="memItemLeft" align="right" valign="top">ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#afa0850f1eb48f9f3cf6298c588b92246">splitAppend</a> (Split *split, Backend *backend, Key *parentKey, int syncbits)</td></tr>
<tr class="memdesc:afa0850f1eb48f9f3cf6298c588b92246"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the size of split and appends a new empty keyset.  <a href="split_8c.html#afa0850f1eb48f9f3cf6298c588b92246">More...</a><br /></td></tr>
<tr class="separator:afa0850f1eb48f9f3cf6298c588b92246"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad04a357eb6e46aa889e7f72f063e0263"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ad04a357eb6e46aa889e7f72f063e0263">splitBuildup</a> (Split *split, KDB *kdb, Key *parentKey)</td></tr>
<tr class="memdesc:ad04a357eb6e46aa889e7f72f063e0263"><td class="mdescLeft">&#160;</td><td class="mdescRight">Walks through kdb-&gt;split and adds all backends below parentKey to split.  <a href="split_8c.html#ad04a357eb6e46aa889e7f72f063e0263">More...</a><br /></td></tr>
<tr class="separator:ad04a357eb6e46aa889e7f72f063e0263"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4fcdbb3d58fb0baba1459e0d8b0a94b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ae4fcdbb3d58fb0baba1459e0d8b0a94b">splitDivide</a> (Split *split, KDB *handle, KeySet *ks)</td></tr>
<tr class="memdesc:ae4fcdbb3d58fb0baba1459e0d8b0a94b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Splits up the keysets and search for a sync bit in every key.  <a href="split_8c.html#ae4fcdbb3d58fb0baba1459e0d8b0a94b">More...</a><br /></td></tr>
<tr class="separator:ae4fcdbb3d58fb0baba1459e0d8b0a94b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5bcc3cf34af26d3d8c69bb3cc9dadb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a9c5bcc3cf34af26d3d8c69bb3cc9dadb">splitUpdateFileName</a> (Split *split, KDB *handle, Key *key)</td></tr>
<tr class="memdesc:a9c5bcc3cf34af26d3d8c69bb3cc9dadb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the (configuration) file name for the parent key.  <a href="split_8c.html#a9c5bcc3cf34af26d3d8c69bb3cc9dadb">More...</a><br /></td></tr>
<tr class="separator:a9c5bcc3cf34af26d3d8c69bb3cc9dadb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd8e79fdbec5faf611bbd26df137343e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#abd8e79fdbec5faf611bbd26df137343e">splitAppoint</a> (Split *split, KDB *handle, KeySet *ks)</td></tr>
<tr class="memdesc:abd8e79fdbec5faf611bbd26df137343e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Appoints all keys from ks to yet unsynced splits.  <a href="split_8c.html#abd8e79fdbec5faf611bbd26df137343e">More...</a><br /></td></tr>
<tr class="separator:abd8e79fdbec5faf611bbd26df137343e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbeff288abf59244ddd44d82cb8d93d2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#afbeff288abf59244ddd44d82cb8d93d2">splitGet</a> (Split *split, Key *warningKey, KDB *handle)</td></tr>
<tr class="memdesc:afbeff288abf59244ddd44d82cb8d93d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does some work after getting of backends is finished.  <a href="split_8c.html#afbeff288abf59244ddd44d82cb8d93d2">More...</a><br /></td></tr>
<tr class="separator:afbeff288abf59244ddd44d82cb8d93d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e1938ac64ef0c120c69c6c8c3943080"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a7e1938ac64ef0c120c69c6c8c3943080">splitUpdateSize</a> (Split *split)</td></tr>
<tr class="memdesc:a7e1938ac64ef0c120c69c6c8c3943080"><td class="mdescLeft">&#160;</td><td class="mdescRight">Also update sizes after <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> to recognize multiple <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> attempts.  <a href="split_8c.html#a7e1938ac64ef0c120c69c6c8c3943080">More...</a><br /></td></tr>
<tr class="separator:a7e1938ac64ef0c120c69c6c8c3943080"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40883cc9699f727c1a31ba283b1d67ae"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#a40883cc9699f727c1a31ba283b1d67ae">splitMergeBackends</a> (Split *split, KeySet *dest)</td></tr>
<tr class="memdesc:a40883cc9699f727c1a31ba283b1d67ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges together the backend based parts of split into dest, but bypasses the default split.  <a href="split_8c.html#a40883cc9699f727c1a31ba283b1d67ae">More...</a><br /></td></tr>
<tr class="separator:a40883cc9699f727c1a31ba283b1d67ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad79a6dc0ae814dad704b7b442394287d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#ad79a6dc0ae814dad704b7b442394287d">splitMergeDefault</a> (Split *split, KeySet *dest)</td></tr>
<tr class="memdesc:ad79a6dc0ae814dad704b7b442394287d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Merges the default split into dest.  <a href="split_8c.html#ad79a6dc0ae814dad704b7b442394287d">More...</a><br /></td></tr>
<tr class="separator:ad79a6dc0ae814dad704b7b442394287d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6fb30481571a63cfb7745adaa02d526"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#af6fb30481571a63cfb7745adaa02d526">splitSync</a> (Split *split)</td></tr>
<tr class="memdesc:af6fb30481571a63cfb7745adaa02d526"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add sync bits everywhere keys were removed/added.  <a href="split_8c.html#af6fb30481571a63cfb7745adaa02d526">More...</a><br /></td></tr>
<tr class="separator:af6fb30481571a63cfb7745adaa02d526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8a0571065ace2b371e017cabdb9eca7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="split_8c.html#af8a0571065ace2b371e017cabdb9eca7">splitPrepare</a> (Split *split)</td></tr>
<tr class="memdesc:af8a0571065ace2b371e017cabdb9eca7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares for <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> mainloop afterwards.  <a href="split_8c.html#af8a0571065ace2b371e017cabdb9eca7">More...</a><br /></td></tr>
<tr class="separator:af8a0571065ace2b371e017cabdb9eca7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interna of splitting functionality. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>BSD License (see LICENSE.md or <a href="https://www.libelektra.org">https://www.libelektra.org</a>) </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="afa0850f1eb48f9f3cf6298c588b92246"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa0850f1eb48f9f3cf6298c588b92246">&#9670;&nbsp;</a></span>splitAppend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ssize_t splitAppend </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Backend *&#160;</td>
          <td class="paramname"><em>backend</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>parentKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>syncbits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increases the size of split and appends a new empty keyset. </p>
<p>Initializes the element with the given parameters at size-1 to be used.</p>
<p>Will automatically resize split if needed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">backend</td><td>the backend which should be appended </td></tr>
    <tr><td class="paramname">parentKey</td><td>the parentKey which should be appended </td></tr>
    <tr><td class="paramname">syncbits</td><td>the initial syncstate which should be appended</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">-1</td><td>if no split is found </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the position of the new element: size-1 </dd></dl>

</div>
</div>
<a id="abd8e79fdbec5faf611bbd26df137343e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd8e79fdbec5faf611bbd26df137343e">&#9670;&nbsp;</a></span>splitAppoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitAppoint </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>ks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Appoints all keys from ks to yet unsynced splits. </p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="split_8c.html#ad04a357eb6e46aa889e7f72f063e0263" title="Walks through kdb-&gt;split and adds all backends below parentKey to split.">splitBuildup()</a> need to be executed before.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">handle</td><td>to determine to which backend a key belongs </td></tr>
    <tr><td class="paramname">ks</td><td>the keyset to appoint to split</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>if no backend was found for a key </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad04a357eb6e46aa889e7f72f063e0263"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad04a357eb6e46aa889e7f72f063e0263">&#9670;&nbsp;</a></span>splitBuildup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitBuildup </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>kdb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>parentKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Walks through kdb-&gt;split and adds all backends below parentKey to split. </p>
<p>Sets syncbits to 2 if it is a default or root backend (which needs splitting). The information is copied from kdb-&gt;split.</p>
<dl class="section pre"><dt>Precondition</dt><dd>split needs to be empty, directly after creation with <a class="el" href="split_8c.html#aa17259b07015cf6c06f14814f52d01fb" title="Allocates a new split object.">splitNew()</a>.</dd>
<dd>
there needs to be a valid defaultBackend but its ok not to have a trie inside KDB.</dd>
<dd>
parentKey must be a valid key! (could be implemented more generally, but that would require splitting up of keysets of the same backend)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>will get all backends appended </td></tr>
    <tr><td class="paramname">kdb</td><td>the handle to get information about backends </td></tr>
    <tr><td class="paramname">parentKey</td><td>the information below which key the backends are from interest</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>always </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a455004883f0e5afccc5c78308060d70d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a455004883f0e5afccc5c78308060d70d">&#9670;&nbsp;</a></span>splitDel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splitDel </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>keysets</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete a split object. </p>
<p>Will free all allocated resources of a split keyset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keysets</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae4fcdbb3d58fb0baba1459e0d8b0a94b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4fcdbb3d58fb0baba1459e0d8b0a94b">&#9670;&nbsp;</a></span>splitDivide()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitDivide </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>ks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Splits up the keysets and search for a sync bit in every key. </p>
<p>It does not check if there were removed keys, see <a class="el" href="split_8c.html#af6fb30481571a63cfb7745adaa02d526" title="Add sync bits everywhere keys were removed/added.">splitSync()</a> for the next step.</p>
<p>It does not create new backends, this has to be done by buildup before.</p>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="split_8c.html#ad04a357eb6e46aa889e7f72f063e0263" title="Walks through kdb-&gt;split and adds all backends below parentKey to split.">splitBuildup()</a> need to be executed before.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">handle</td><td>to get information where the individual keys belong </td></tr>
    <tr><td class="paramname">ks</td><td>the keyset to divide</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if there were no sync bits </td></tr>
    <tr><td class="paramname">1</td><td>if there were sync bits </td></tr>
    <tr><td class="paramname">-1</td><td>if no backend was found for any key </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afbeff288abf59244ddd44d82cb8d93d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbeff288abf59244ddd44d82cb8d93d2">&#9670;&nbsp;</a></span>splitGet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitGet </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>warningKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Does some work after getting of backends is finished. </p>
<ul>
<li>Update sizes</li>
<li>Removal of wrong keys</li>
</ul>
<dl class="section pre"><dt>Precondition</dt><dd><a class="el" href="split_8c.html#abd8e79fdbec5faf611bbd26df137343e" title="Appoints all keys from ks to yet unsynced splits.">splitAppoint()</a> needs to be executed before.</dd></dl>
<ul>
<li>check if keys are in correct backend</li>
<li>remove syncbits</li>
<li>update sizes in the backends</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">warningKey</td><td>postcondition violations are reported here </td></tr>
    <tr><td class="paramname">handle</td><td>the handle to preprocess the keys </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>if no backend was found for a key or split-&gt;parents has invalid namespace </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a40883cc9699f727c1a31ba283b1d67ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40883cc9699f727c1a31ba283b1d67ae">&#9670;&nbsp;</a></span>splitMergeBackends()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitMergeBackends </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges together the backend based parts of split into dest, but bypasses the default split. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">dest</td><td>the destination keyset where all keysets are appended. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad79a6dc0ae814dad704b7b442394287d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad79a6dc0ae814dad704b7b442394287d">&#9670;&nbsp;</a></span>splitMergeDefault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitMergeDefault </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KeySet *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Merges the default split into dest. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">dest</td><td>the destination keyset where all keysets are appended. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>on success </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aa17259b07015cf6c06f14814f52d01fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa17259b07015cf6c06f14814f52d01fb">&#9670;&nbsp;</a></span>splitNew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Split* splitNew </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocates a new split object. </p>
<p>Splits up a keyset into multiple keysets where each of them will passed to the correct <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a>.</p>
<p>Initially the size is 0 and alloc is APPROXIMATE_NR_OF_BACKENDS.</p>
<dl class="section return"><dt>Returns</dt><dd>a fresh allocated split object</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="split_8c.html#a455004883f0e5afccc5c78308060d70d" title="Delete a split object.">splitDel()</a> </dd></dl>

</div>
</div>
<a id="af8a0571065ace2b371e017cabdb9eca7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8a0571065ace2b371e017cabdb9eca7">&#9670;&nbsp;</a></span>splitPrepare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splitPrepare </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares for <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> mainloop afterwards. </p>
<p>All splits which do not need sync are removed and a deep copy of the remaining keysets is done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1fff7d9e737c42074ab661a1cd136b4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fff7d9e737c42074ab661a1cd136b4c">&#9670;&nbsp;</a></span>splitRemove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splitRemove </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>where</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove one part of split. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
    <tr><td class="paramname">where</td><td>the position to cut away</td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>where must be within the size of the split </dd></dl>
<dl class="section post"><dt>Postcondition</dt><dd>split will be removed </dd></dl>

</div>
</div>
<a id="af6fb30481571a63cfb7745adaa02d526"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6fb30481571a63cfb7745adaa02d526">&#9670;&nbsp;</a></span>splitSync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitSync </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add sync bits everywhere keys were removed/added. </p>
<ul>
<li>checks if the size of a previous <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way.">kdbGet()</a> is unchanged.</li>
<li>checks if in correct state (<a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way.">kdbGet()</a> needs to be executed before)</li>
</ul>
<p>Only <a class="el" href="split_8c.html#ae4fcdbb3d58fb0baba1459e0d8b0a94b" title="Splits up the keysets and search for a sync bit in every key.">splitDivide()</a> together with this function can really decide if sync is needed or not.</p>
<dl class="section pre"><dt>Precondition</dt><dd>split needs to be processed with <a class="el" href="split_8c.html#ae4fcdbb3d58fb0baba1459e0d8b0a94b" title="Splits up the keysets and search for a sync bit in every key.">splitDivide()</a> before.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> is not needed </td></tr>
    <tr><td class="paramname">1</td><td>if <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> is needed </td></tr>
    <tr><td class="paramname">-1</td><td>on wrong keys (also has assert, should not happen) </td></tr>
    <tr><td class="paramname">-2</td><td>wrong spec state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way.">kdbGet()</a> was not executed before </td></tr>
    <tr><td class="paramname">-3</td><td>wrong dir state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way.">kdbGet()</a> was not executed before </td></tr>
    <tr><td class="paramname">-4</td><td>wrong user state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way.">kdbGet()</a> was not executed before </td></tr>
    <tr><td class="paramname">-5</td><td>wrong system state: <a class="el" href="group__kdb.html#ga28e385fd9cb7ccfe0b2f1ed2f62453a1" title="Retrieve keys in an atomic and universal way.">kdbGet()</a> was not executed before </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>user/system was split before. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split object to work with </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9c5bcc3cf34af26d3d8c69bb3cc9dadb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c5bcc3cf34af26d3d8c69bb3cc9dadb">&#9670;&nbsp;</a></span>splitUpdateFileName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void splitUpdateFileName </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">KDB *&#160;</td>
          <td class="paramname"><em>handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Key *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the (configuration) file name for the parent key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">split</td><td>the split to work with </td></tr>
    <tr><td class="paramname">handle</td><td>the handle to work with </td></tr>
    <tr><td class="paramname">key</td><td>the parentKey that should be updated (name must be correct) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7e1938ac64ef0c120c69c6c8c3943080"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e1938ac64ef0c120c69c6c8c3943080">&#9670;&nbsp;</a></span>splitUpdateSize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int splitUpdateSize </td>
          <td>(</td>
          <td class="paramtype">Split *&#160;</td>
          <td class="paramname"><em>split</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Also update sizes after <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> to recognize multiple <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a> attempts. </p>
<dl class="section warning"><dt>Warning</dt><dd>cant use the same code with splitGet because there is no default split part for <a class="el" href="group__kdb.html#ga11436b058408f83d303ca5e996832bcf" title="Set keys in an atomic and universal way.">kdbSet()</a>. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
