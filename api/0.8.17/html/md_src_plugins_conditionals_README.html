<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Elektra: Plugin: conditionals</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.17</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Plugin: conditionals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the conditionals plugin is in keys below</li>
<li>infos/author = Thomas Waser <a href="#" onclick="location.href='mai'+'lto:'+'tho'+'ma'+'s.w'+'as'+'er@'+'li'+'bel'+'ek'+'tra'+'.o'+'rg'; return false;">thoma<span style="display: none;">.nosp@m.</span>s.wa<span style="display: none;">.nosp@m.</span>ser@l<span style="display: none;">.nosp@m.</span>ibel<span style="display: none;">.nosp@m.</span>ektra<span style="display: none;">.nosp@m.</span>.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/provides =</li>
<li>infos/needs =</li>
<li>infos/recommends =</li>
<li>infos/placements = postgetstorage presetstorage</li>
<li>infos/status = maintained unittest nodep libc preview</li>
<li>infos/metadata = check/condition assign/condition condition/validsuffix</li>
<li>infos/description =</li>
</ul>
<p>This plugin uses if-then-else like conditions.</p>
<h2>Check Syntax</h2>
<p>Stored in the metakey <code>check/condition</code> to validate data is:</p>
<p><code>(IF-condition) ? (THEN-condition) : (ELSE-condition)</code> where the ELSE-condition is optional</p>
<p>Condition: <code>Key</code> <em>Operation</em> `('String' | '1234.56' | Key | '')`</p>
<p>Operations: <code>!=, ==, &lt;, &lt;=, =&gt;, &gt;, :=</code>, where:</p>
<ul>
<li><code>:=</code> is used to set a key value</li>
<li>others are for comparison as in C</li>
</ul>
<h3>Testing if Key exists</h3>
<p><code>(! a/key)</code> evaluates to true if the key <code>a/key</code> doesn't exist, to false if it exists.</p>
<h3>Assign Syntax</h3>
<p>`(IF-condition) ? ('ThenValue') : ('ElseValue')`</p>
<p>Depending on if the condition is met, either 'ThenValue' or 'ElseValue' will be assigned as key value if the metakey <code>assign/condition</code> is used.</p>
<h3>EXPERIMENTAL: Nested Conditions</h3>
<p>Multiple conditions can be nested and combined using parentheses and <code>&amp;&amp;</code> (logical AND) or <code>||</code> (logical OR). Additional parentheses must be used to form valid conditions again. <code>(</code> <code>(condition 1) &amp;&amp; (condition 2)</code> <code>)</code></p>
<h3>valid suffix</h3>
<p>The <code>condition/validsuffix</code> can be used to define a list of valid suffixes to numeric values. If two operants have the same valid suffix or one of them no suffix they will be treated by their numeric value ignoring their suffix. `condition/validsuffix = 'm', 'cm', 'km'<code>would treat</code>2.3m<code>just as the numeric value</code>2.3` when comparing to another value having the same or no suffix.</p>
<h2>Example</h2>
<p>`(this/key != 'value') ? (then/key == some/other/key) : (or/key &lt;= '125')`</p>
<p>Meaning: IF <code>this/key</code> NOT EQUAL TO <code>'value'</code> THEN <code>then/key</code> MUST EQUAL <code>some/other/key</code> ELSE <code>or/key</code> MUST BE LESS THAN <code>125</code></p>
<p>Another full example: </p><pre class="fragment">    kdb mount conditionals.dump /tmount/conditionals conditionals dump
    kdb set user/tmount/conditionals/fkey 3.0
    kdb set user/tmount/conditionals/hkey hello
    kdb setmeta user/tmount/conditionals/key check/condition "(hkey == 'hello') ? (fkey == '3.0')" # success
    kdb setmeta user/tmount/conditionals/key check/condition "(hkey == 'hello') ? (fkey == '5.0')" # fail
</pre><p>Assignment example: </p><pre class="fragment">    kdb mount conditionals.dump /tmount/conditionals conditionals dump
    kdb set user/tmount/conditionals/hkey Hello
    kdb setmeta user/tmount/conditionals/hkey assign/condition "(hkey == 'Hello') ? ('World')"
    kdb get user/tmount/conditionals/hkey # output: World</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
