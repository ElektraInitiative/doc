\hypertarget{group__keytest}{\section{Methods for Making Tests}
\label{group__keytest}\index{Methods for Making Tests@{Methods for Making Tests}}
}


Methods to do various tests on Keys.  


Collaboration diagram for Methods for Making Tests\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{group__keytest}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}{key\-Cmp} (const Key $\ast$k1, const Key $\ast$k2)
\item 
int \hyperlink{group__keytest_gaf247df0de7aca04b32ef80e39ef12950}{key\-Need\-Sync} (const Key $\ast$key)
\item 
int \hyperlink{group__keytest_gafe49cfb61c2accb3073131c23a56fb14}{key\-Is\-System} (const Key $\ast$key)
\item 
int \hyperlink{group__keytest_ga373acc20c6209357045891f4b0c70041}{key\-Is\-User} (const Key $\ast$key)
\item 
int \hyperlink{group__keytest_ga03332b5d97c76a4fd2640aca4762b8df}{key\-Is\-Below} (const Key $\ast$key, const Key $\ast$check)
\item 
int \hyperlink{group__keytest_ga4f175aafd98948ce6c774f3bd92b72ca}{key\-Is\-Direct\-Below} (const Key $\ast$key, const Key $\ast$check)
\item 
int \hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{key\-Rel} (const Key $\ast$key, const Key $\ast$check)
\item 
int \hyperlink{group__keytest_gaa25f699f592031c1a0abc1504d14e13e}{key\-Is\-Inactive} (const Key $\ast$key)
\item 
int \hyperlink{group__keytest_gac0a10c602d52a35f81347e8a32312017}{key\-Is\-Dir} (const Key $\ast$key)
\item 
int \hyperlink{group__keytest_ga9526b371087564e43e3dff8ad0dac949}{key\-Is\-Binary} (const Key $\ast$key)
\item 
int \hyperlink{group__keytest_gaea7670778abd07fee0fe8ac12a149190}{key\-Is\-String} (const Key $\ast$key)
\item 
\hyperlink{group__key_ga91fb3178848bd682000958089abbaf40}{keyswitch\-\_\-t} \hyperlink{group__keytest_gab98168409d302fdb65692f6e26f17945}{key\-Compare} (const Key $\ast$key1, const Key $\ast$key2)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Methods to do various tests on Keys. To use them\-: 
\begin{DoxyCode}
\textcolor{preprocessor}{#include <kdb.h>}
\end{DoxyCode}
 

\subsection{Function Documentation}
\hypertarget{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Cmp@{key\-Cmp}}
\index{key\-Cmp@{key\-Cmp}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Cmp}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Cmp (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{k1, }
\item[{const Key $\ast$}]{k2}
\end{DoxyParamCaption}
)}}\label{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}
Compare the name of two keys.

\begin{DoxyReturn}{Returns}
a number less than, equal to or greater than zero if k1 is found, respectively, to be less than, to match, or be greater than k2.
\end{DoxyReturn}
The comparison is based on a strcmp of the keynames, and iff they match a strcmp of the owner will be used to distuingish. If even this matches the keys are found to be exactly the same and 0 is returned. These two keys can't be used in the same Key\-Set.

\hyperlink{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}{key\-Cmp()} defines the sorting order for a Key\-Set.

The following 3 points are the rules for null values\-:


\begin{DoxyItemize}
\item A null pointer will be found to be smaller than every other key. If both are null pointers, 0 is returned.
\end{DoxyItemize}


\begin{DoxyItemize}
\item A null name will be found to be smaller than every other name. If both are null names, 0 is returned.
\end{DoxyItemize}

If the name is equal then\-:


\begin{DoxyItemize}
\item No owner will be found to be smaller then every other owner. If both don't have a owner, 0 is returned.
\end{DoxyItemize}

\begin{DoxyNote}{Note}
the owner will only be used if the names are equal.
\end{DoxyNote}
Often is enough to know if the other key is less then or greater then the other one. But Sometimes you need more precise information, see \hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{key\-Rel()}.

Given any Keys k1 and k2 constructed with \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{key\-New()}, following equation hold true\-:


\begin{DoxyCodeInclude}
\end{DoxyCodeInclude}
 Here are some more examples\-: 
\begin{DoxyCode}
Key *k1 = \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"user/a"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END});
Key *k2 = \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"user/b"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END});

\textcolor{comment}{// keyCmp(k1,k2) < 0}
\textcolor{comment}{// keyCmp(k2,k1) > 0}
\end{DoxyCode}


And even more\-: 
\begin{DoxyCode}
Key *k1 = \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"user/a"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40a77ca60362fa8daca8d5347db4385068b}{KEY\_OWNER}, \textcolor{stringliteral}{"markus"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END});
Key *k2 = \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew}(\textcolor{stringliteral}{"user/a"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40a77ca60362fa8daca8d5347db4385068b}{KEY\_OWNER}, \textcolor{stringliteral}{"max"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END});

\textcolor{comment}{// keyCmp(k1,k2) < 0}
\textcolor{comment}{// keyCmp(k2,k1) > 0}
\end{DoxyCode}


Do not strcmp the \hyperlink{group__keyname_ga8e805c726a60da921d3736cda7813513}{key\-Name()} yourself because the result differs from simple ascii comparison.


\begin{DoxyParams}{Parameters}
{\em k1} & the first key object to compare with \\
\hline
{\em k2} & the second key object to compare with\\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyset_gaa5a1d467a4d71041edce68ea7748ce45}{ks\-Append\-Key()}, \hyperlink{group__keyset_ga21eb9c3a14a604ee3a8bdc779232e7b7}{ks\-Append()} will compare keys when appending 

\hyperlink{group__keyset_gaa34fc43a081e6b01e4120daa6c112004}{ks\-Lookup()} will compare keys during searching 
\end{DoxySeeAlso}
\hypertarget{group__keytest_gab98168409d302fdb65692f6e26f17945}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Compare@{key\-Compare}}
\index{key\-Compare@{key\-Compare}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Compare}]{\setlength{\rightskip}{0pt plus 5cm}{\bf keyswitch\-\_\-t} key\-Compare (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key1, }
\item[{const Key $\ast$}]{key2}
\end{DoxyParamCaption}
)}}\label{group__keytest_gab98168409d302fdb65692f6e26f17945}
Compare 2 keys.

The returned flags bit array has 1s (differ) or 0s (equal) for each key meta info compared, that can be logically O\-Red using {\ttfamily \hyperlink{group__key_ga91fb3178848bd682000958089abbaf40}{keyswitch\-\_\-t}} flags. \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40ad6127fc38f96410bf7c8f6e93b0397da}{K\-E\-Y\-\_\-\-N\-A\-M\-E }, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40ac66e4a49d09212b79f5754ca6db5bd2e}{K\-E\-Y\-\_\-\-V\-A\-L\-U\-E }, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40a77ca60362fa8daca8d5347db4385068b}{K\-E\-Y\-\_\-\-O\-W\-N\-E\-R }, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40ac29427bb47cc31689d02912e36161ee3}{K\-E\-Y\-\_\-\-C\-O\-M\-M\-E\-N\-T }, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40a28f01a87d65f065172f734c9c9446c0e}{K\-E\-Y\-\_\-\-U\-I\-D }, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40ac0628bbaba7c837ca73323681393d15f}{K\-E\-Y\-\_\-\-G\-I\-D }, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40a1b0a91ff3a855d6993930ebf0abaa518}{K\-E\-Y\-\_\-\-M\-O\-D\-E } and

\begin{DoxyParagraph}{A very simple example would be}

\begin{DoxyCode}
Key *key1, *key;
uint32\_t changes;

\textcolor{comment}{// omited key1 and key2 initialization and manipulation}

changes=\hyperlink{group__keytest_gab98168409d302fdb65692f6e26f17945}{keyCompare}(key1,key2);

\textcolor{keywordflow}{if} (changes == 0) printf(\textcolor{stringliteral}{"key1 and key2 are identicall\(\backslash\)n"});

\textcolor{keywordflow}{if} (changes & KEY\_VALUE)
        printf(\textcolor{stringliteral}{"key1 and key2 have different values\(\backslash\)n"});
 
\textcolor{keywordflow}{if} (changes & KEY\_UID)
        printf(\textcolor{stringliteral}{"key1 and key2 have different UID\(\backslash\)n"});
\end{DoxyCode}

\end{DoxyParagraph}
\begin{DoxyParagraph}{Example of very powerful specific Key lookup in a Key\-Set\-:}

\begin{DoxyCode}
KDB *handle = \hyperlink{group__kdb_ga6808defe5870f328dd17910aacbdc6ca}{kdbOpen}();
KeySet *ks=\hyperlink{group__keyset_ga671e1aaee3ae9dc13b4834a4ddbd2c3c}{ksNew}(0, KS\_END);
Key *base = \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{keyNew} (\textcolor{stringliteral}{"user/sw/MyApp/something"}, \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40aa8adb6fcb92dec58fb19410eacfdd403}{KEY\_END});
Key *current;
uint32\_t match;
uint32\_t interests;


kdbGetByName(handle, ks, \textcolor{stringliteral}{"user/sw/MyApp"}, 0);

\textcolor{comment}{// we are interested only in key type and access permissions}
interests=(KEY\_TYPE | \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40a1b0a91ff3a855d6993930ebf0abaa518}{KEY\_MODE});

\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ksRewind}(ks);   \textcolor{comment}{// put cursor in the beginning}
\textcolor{keywordflow}{while} ((curren=\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ksNext}(ks))) \{
        match=\hyperlink{group__keytest_gab98168409d302fdb65692f6e26f17945}{keyCompare}(current,base);
        
        \textcolor{keywordflow}{if} ((~match & interests) == interests)
                printf(\textcolor{stringliteral}{"Key %s has same type and permissions of base key"},
      \hyperlink{group__keyname_ga8e805c726a60da921d3736cda7813513}{keyName}(current));

        \textcolor{comment}{// continue walking in the KeySet....}
\}

\textcolor{comment}{// now we want same name and/or value}
interests=(\hyperlink{group__key_gga91fb3178848bd682000958089abbaf40ad6127fc38f96410bf7c8f6e93b0397da}{KEY\_NAME} | \hyperlink{group__key_gga91fb3178848bd682000958089abbaf40ac66e4a49d09212b79f5754ca6db5bd2e}{KEY\_VALUE});

\textcolor{comment}{// we don't really need ksRewind(), since previous loop achieved end of KeySet}
\hyperlink{group__keyset_gabe793ff51f1728e3429c84a8a9086b70}{ksRewind}(ks);
\textcolor{keywordflow}{while} ((current=\hyperlink{group__keyset_ga317321c9065b5a4b3e33fe1c399bcec9}{ksNext}(ks))) \{
        match=\hyperlink{group__keytest_gab98168409d302fdb65692f6e26f17945}{keyCompare}(current,base);

        \textcolor{keywordflow}{if} ((~match & interests) == interests) \{
                printf(\textcolor{stringliteral}{"Key %s has same name, value, and sync status}
\textcolor{stringliteral}{                        of base key"},\hyperlink{group__keyname_ga8e805c726a60da921d3736cda7813513}{keyName}(current));
        \}
        \textcolor{comment}{// continue walking in the KeySet....}
\}

\hyperlink{group__key_ga3df95bbc2494e3e6703ece5639be5bb1}{keyDel}(base);
\hyperlink{group__keyset_ga27e5c16473b02a422238c8d970db7ac8}{ksDel}(ks);
\hyperlink{group__kdb_gadb54dc9fda17ee07deb9444df745c96f}{kdbClose} (handle);
\end{DoxyCode}

\end{DoxyParagraph}
\begin{DoxyReturn}{Returns}
a bit array pointing the differences 
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em key1} & first key \\
\hline
{\em key2} & second key \\
\hline
\end{DoxyParams}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__key_ga91fb3178848bd682000958089abbaf40}{keyswitch\-\_\-t} 
\end{DoxySeeAlso}
\hypertarget{group__keytest_ga03332b5d97c76a4fd2640aca4762b8df}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-Below@{key\-Is\-Below}}
\index{key\-Is\-Below@{key\-Is\-Below}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-Below}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-Below (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key, }
\item[{const Key $\ast$}]{check}
\end{DoxyParamCaption}
)}}\label{group__keytest_ga03332b5d97c76a4fd2640aca4762b8df}
Check if the key check is below the key key or not.

Example\-: \begin{DoxyVerb}key user/sw/app
check user/sw/app/key
\end{DoxyVerb}


returns true because check is below key

Example\-: \begin{DoxyVerb}key user/sw/app
check user/sw/app/folder/key
\end{DoxyVerb}


returns also true because check is indirect below key


\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
{\em check} & the key to find the relative position of \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if check is below key 

0 if it is not below or if it is the same key 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{key\-Set\-Name()}, \hyperlink{group__keyname_gab29a850168d9b31c9529e90cf9ab68be}{key\-Get\-Name()}, \hyperlink{group__keytest_ga4f175aafd98948ce6c774f3bd92b72ca}{key\-Is\-Direct\-Below()} 
\end{DoxySeeAlso}
\hypertarget{group__keytest_ga9526b371087564e43e3dff8ad0dac949}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-Binary@{key\-Is\-Binary}}
\index{key\-Is\-Binary@{key\-Is\-Binary}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-Binary}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-Binary (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_ga9526b371087564e43e3dff8ad0dac949}
Check if a key is binary type.

The function checks if the key is a binary. Opposed to string values binary values can have '\textbackslash{}0' inside the value and may not be terminated by a null character. Their disadvantage is that you need to pass their size.

Make sure to use this function and don't test the binary type another way to ensure compatibility and to write less error prone programs.

\begin{DoxyReturn}{Returns}
1 if it is binary 

0 if it is not 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyvalue_ga4c0d8a4a11174197699c231e0b5c3c84}{key\-Get\-Binary()}, \hyperlink{group__keyvalue_gaa50a5358fd328d373a45f395fa1b99e7}{key\-Set\-Binary()} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em key} & the key to check \\
\hline
\end{DoxyParams}
\hypertarget{group__keytest_gac0a10c602d52a35f81347e8a32312017}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-Dir@{key\-Is\-Dir}}
\index{key\-Is\-Dir@{key\-Is\-Dir}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-Dir}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-Dir (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_gac0a10c602d52a35f81347e8a32312017}
Check if the mode for the key has access privileges.

In the filesys backend a key represented through a file has the mode 664, but a key represented through a folder 775. \hyperlink{group__keytest_gac0a10c602d52a35f81347e8a32312017}{key\-Is\-Dir()} checks if all 3 executeable bits are set.

If any executable bit is set it will be recognized as a directory.

\begin{DoxyNote}{Note}
key\-Is\-Dir may return true even though you can't access the directory.
\end{DoxyNote}
To know if you can access the directory, you need to check, if your
\begin{DoxyItemize}
\item user I\-D is equal the key's user I\-D and the mode \& 100 is true
\item group I\-D is equal the key's group I\-D and the mode \& 010 is true
\item mode \& 001 is true
\end{DoxyItemize}

Accessing does not mean that you can get any value or comments below, see \hyperlink{group__keymeta_mode}{Modes} for more information.

\begin{DoxyNote}{Note}
currently mountpoints can only where \hyperlink{group__keytest_gac0a10c602d52a35f81347e8a32312017}{key\-Is\-Dir()} is true (0.\-7.\-0) but this is likely to change.
\end{DoxyNote}

\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if key is a directory, 0 otherwise 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keymeta_gaae575bd86a628a15ee45baa860522e75}{key\-Set\-Dir()}, \hyperlink{group__keymeta_ga8803037e35b9da1ce492323a88ff6bc3}{key\-Set\-Mode()} 
\end{DoxySeeAlso}
\hypertarget{group__keytest_ga4f175aafd98948ce6c774f3bd92b72ca}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-Direct\-Below@{key\-Is\-Direct\-Below}}
\index{key\-Is\-Direct\-Below@{key\-Is\-Direct\-Below}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-Direct\-Below}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-Direct\-Below (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key, }
\item[{const Key $\ast$}]{check}
\end{DoxyParamCaption}
)}}\label{group__keytest_ga4f175aafd98948ce6c774f3bd92b72ca}
Check if the key check is direct below the key key or not.

\begin{DoxyVerb}Example:
key user/sw/app
check user/sw/app/key

returns true because check is below key

Example:
key user/sw/app
check user/sw/app/folder/key

does not return true, because there is only a indirect relation
\end{DoxyVerb}



\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
{\em check} & the key to find the relative position of \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if check is below key 

0 if it is not below or if it is the same key 

-\/1 on null pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_ga03332b5d97c76a4fd2640aca4762b8df}{key\-Is\-Below()}, \hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{key\-Set\-Name()}, \hyperlink{group__keyname_gab29a850168d9b31c9529e90cf9ab68be}{key\-Get\-Name()} 
\end{DoxySeeAlso}
\hypertarget{group__keytest_gaa25f699f592031c1a0abc1504d14e13e}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-Inactive@{key\-Is\-Inactive}}
\index{key\-Is\-Inactive@{key\-Is\-Inactive}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-Inactive}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-Inactive (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_gaa25f699f592031c1a0abc1504d14e13e}
Check whether a key is inactive.

In Elektra terminology a hierarchy of keys is inactive if the rootkey's basename starts with '.'. So a key is also inactive if it is below an inactive key. For example, user/key/.hidden is inactive and so is user/.hidden/below.

Inactive keys should not have any meaning to applications, they are only a convention reserved for users and administrators. To automatically remove all inactive keys for an application, consider to use the hidden plugin.


\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em 1} & if the key is inactive \\
\hline
{\em 0} & if the key is active \\
\hline
{\em -\/1} & on N\-U\-L\-L pointer or when key has no name \\
\hline
\end{DoxyRetVals}
\hypertarget{group__keytest_gaea7670778abd07fee0fe8ac12a149190}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-String@{key\-Is\-String}}
\index{key\-Is\-String@{key\-Is\-String}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-String}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-String (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_gaea7670778abd07fee0fe8ac12a149190}
Check if a key is string type.

String values are null terminated and are not allowed to have any '\textbackslash{}0' characters inside the string.

Make sure to use this function and don't test the string type another way to ensure compatibility and to write less error prone programs.

\begin{DoxyReturn}{Returns}
1 if it is string 

0 if it is not 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keyvalue_ga41b9fac5ccddafe407fc0ae1e2eb8778}{key\-Get\-String()}, \hyperlink{group__keyvalue_ga622bde1eb0e0c4994728331326340ef2}{key\-Set\-String()} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em key} & the key to check \\
\hline
\end{DoxyParams}
\hypertarget{group__keytest_gafe49cfb61c2accb3073131c23a56fb14}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-System@{key\-Is\-System}}
\index{key\-Is\-System@{key\-Is\-System}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-System}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-System (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_gafe49cfb61c2accb3073131c23a56fb14}
Check whether a key is under the {\ttfamily system} namespace or not


\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if key name begins with {\ttfamily system}, 0 otherwise 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_ga373acc20c6209357045891f4b0c70041}{key\-Is\-User()}, \hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{key\-Set\-Name()}, \hyperlink{group__keyname_ga8e805c726a60da921d3736cda7813513}{key\-Name()} 
\end{DoxySeeAlso}
\hypertarget{group__keytest_ga373acc20c6209357045891f4b0c70041}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Is\-User@{key\-Is\-User}}
\index{key\-Is\-User@{key\-Is\-User}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Is\-User}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Is\-User (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_ga373acc20c6209357045891f4b0c70041}
Check whether a key is under the {\ttfamily user} namespace or not.


\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if key name begins with {\ttfamily user}, 0 otherwise 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__keytest_gafe49cfb61c2accb3073131c23a56fb14}{key\-Is\-System()}, \hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{key\-Set\-Name()}, \hyperlink{group__keyname_ga8e805c726a60da921d3736cda7813513}{key\-Name()} 
\end{DoxySeeAlso}
\hypertarget{group__keytest_gaf247df0de7aca04b32ef80e39ef12950}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Need\-Sync@{key\-Need\-Sync}}
\index{key\-Need\-Sync@{key\-Need\-Sync}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Need\-Sync}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Need\-Sync (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key}
\end{DoxyParamCaption}
)}}\label{group__keytest_gaf247df0de7aca04b32ef80e39ef12950}
Test if a key needs to be synced to backend storage.

If any key modification took place the key will be flagged with K\-E\-Y\-\_\-\-F\-L\-A\-G\-\_\-\-S\-Y\-N\-C so that \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} knows which keys were modified and which not.

After \hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{key\-New()} the flag will normally be set, but after \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} and \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()} the flag will be removed. When you modify the key the flag will be set again.

In your application you can make use of that flag to know if you changed something in a key after a \hyperlink{group__kdb_ga28e385fd9cb7ccfe0b2f1ed2f62453a1}{kdb\-Get()} or \hyperlink{group__kdb_ga11436b058408f83d303ca5e996832bcf}{kdb\-Set()}.

\begin{DoxyNote}{Note}
Note that also changes in the meta data will set that flag.
\end{DoxyNote}
\begin{DoxySeeAlso}{See Also}
\hyperlink{group__key_gad23c65b44bf48d773759e1f9a4d43b89}{key\-New()} 
\end{DoxySeeAlso}

\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
1 if {\ttfamily key} was changed in memory, 0 otherwise 

-\/1 on N\-U\-L\-L pointer 
\end{DoxyReturn}
\hypertarget{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{\index{Methods for Making Tests@{Methods for Making Tests}!key\-Rel@{key\-Rel}}
\index{key\-Rel@{key\-Rel}!Methods for Making Tests@{Methods for Making Tests}}
\subsubsection[{key\-Rel}]{\setlength{\rightskip}{0pt plus 5cm}int key\-Rel (
\begin{DoxyParamCaption}
\item[{const Key $\ast$}]{key, }
\item[{const Key $\ast$}]{check}
\end{DoxyParamCaption}
)}}\label{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}
Information about the relation in the hierarchy between two keys.

Unlike \hyperlink{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}{key\-Cmp()} the number gives information about hierarchical information.


\begin{DoxyItemize}
\item If the keys are the same 0 is returned. So it is the key itself. \begin{DoxyVerb}user/key
user/key
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyCode}
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (key, \textcolor{stringliteral}{"user/key/folder"});
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (check, \textcolor{stringliteral}{"user/key/folder"});
succeed\_if (\hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{keyRel} (key, check) == 0, \textcolor{stringliteral}{"should be same"});
 *
\end{DoxyCode}


\begin{DoxyNote}{Note}
this relation can be checked with \hyperlink{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}{key\-Cmp()} too.
\end{DoxyNote}

\begin{DoxyItemize}
\item If the key is direct below the other one 1 is returned. That means that, in terms of hierarchy, no other key is between them -\/ it is a direct child. \begin{DoxyVerb}user/key/folder
user/key/folder/child
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyCode}
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (key, \textcolor{stringliteral}{"user/key/folder"});
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (check, \textcolor{stringliteral}{"user/key/folder/child"});
succeed\_if (\hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{keyRel} (key, check) == 1, \textcolor{stringliteral}{"should be direct below"});
 *
\end{DoxyCode}



\begin{DoxyItemize}
\item If the key is below the other one, but not directly 2 is returned. This is also called grand-\/child. \begin{DoxyVerb}user/key/folder
user/key/folder/any/depth/deeper/grand-child
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyCode}
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (key, \textcolor{stringliteral}{"user/key/folder"});
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (check, \textcolor{stringliteral}{"user/key/folder/any/depth/deeper/grand-child"});
succeed\_if (\hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{keyRel} (key, check) >= 2, \textcolor{stringliteral}{"should be below (but not direct)"})
      ;
succeed\_if (\hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{keyRel} (key, check) > 0, \textcolor{stringliteral}{"should be below"});
succeed\_if (\hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{keyRel} (key, check) >= 0, \textcolor{stringliteral}{"should be the same or below"});
 *
\end{DoxyCode}



\begin{DoxyItemize}
\item If a invalid or null ptr key is passed, -\/1 is returned
\end{DoxyItemize}


\begin{DoxyItemize}
\item If the keys have no relations, but are not invalid, -\/2 is returned.
\end{DoxyItemize}


\begin{DoxyItemize}
\item If the keys are in the same hierarchy, a value smaller then -\/2 is returned. It means that the key is not below. \begin{DoxyVerb}user/key/myself
user/key/sibling
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyCode}
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (key, \textcolor{stringliteral}{"user/key/folder"});
\hyperlink{group__keyname_ga7699091610e7f3f43d2949514a4b35d9}{keySetName} (check, \textcolor{stringliteral}{"user/notsame/folder"});
succeed\_if (\hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{keyRel} (key, check) < -2, \textcolor{stringliteral}{"key is not below, but same
       namespace"});
\end{DoxyCode}



\begin{DoxyCode}
\end{DoxyCode}


T\-O\-D\-O Below is an idea how it could be extended\-: It could continue the search into the other direction if any (grand-\/)parents are equal.


\begin{DoxyItemize}
\item If the keys are direct below a key which is next to the key, -\/2 is returned. This is also called nephew. (T\-O\-D\-O not implemented) \begin{DoxyVerb}user/key/myself
user/key/sibling
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item If the keys are direct below a key which is next to the key, -\/2 is returned. This is also called nephew. (T\-O\-D\-O not implemented) \begin{DoxyVerb}user/key/myself
user/key/sibling/nephew
\end{DoxyVerb}

\end{DoxyItemize}


\begin{DoxyItemize}
\item If the keys are below a key which is next to the key, -\/3 is returned. This is also called grand-\/nephew. (T\-O\-D\-O not implemented) \begin{DoxyVerb}user/key/myself
user/key/sibling/any/depth/deeper/grand-nephew
\end{DoxyVerb}

\end{DoxyItemize}

The same holds true for the other direction, but with negative values. For no relation I\-N\-T\-\_\-\-M\-I\-N is returned.

\begin{DoxyNote}{Note}
to check if the keys are the same, you must use \hyperlink{group__keytest_gaf6e66e12fe04d535a5d1c8218ced803e}{key\-Cmp()} == 0! \hyperlink{group__keytest_ga6bb0f95ac34ce9c42d61bb35a76139d0}{key\-Rel()} does not give you the information if it did not find a relation or if it is the same key.
\end{DoxyNote}
\begin{DoxyReturn}{Returns}
dependend on the relation\-: 2.. if below 1.. if direct below 0.. if the same -\/1.. on null or invalid keys -\/2.. if none of any other relation -\/3.. if same hierarchy (none of those below) -\/4.. if sibling (in same hierarchy) -\/5.. if nephew (in same hierarchy)
\end{DoxyReturn}

\begin{DoxyParams}{Parameters}
{\em key} & the key object to work with \\
\hline
{\em check} & the second key object to check the relation with \\
\hline
\end{DoxyParams}
