<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="$langISO">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: Plugin: xerces</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
$darkmode
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<!-- Add mermaid.js -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo_color_doxygen.svg"/></td>
  <td id="projectalign">
   <div id="projectname">Elektra<span id="projectnumber">&#160;0.9.12</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Plugin: xerces </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>infos = Information about the xerces plugin is in keys below</li>
<li>infos/author = Armin Wurzinger <a href="#" onclick="location.href='mai'+'lto:'+'e15'+'28'+'532'+'@l'+'ibe'+'le'+'ktr'+'a.'+'org'; return false;">e1528<span style="display: none;">.nosp@m.</span>532@<span style="display: none;">.nosp@m.</span>libel<span style="display: none;">.nosp@m.</span>ektr<span style="display: none;">.nosp@m.</span>a.org</a></li>
<li>infos/licence = BSD</li>
<li>infos/provides = storage/xml</li>
<li>infos/needs =</li>
<li>infos/placements = getstorage setstorage</li>
<li>infos/status = recommended maintained unittest memleak</li>
<li>infos/metadata = xerces/rootname</li>
<li>infos/description = Storage in the XML format.</li>
</ul>
<h1><a class="anchor" id="src_plugins_xerces_README_md"></a>
Introduction</h1>
<p>This plugin is a storage plugin allowing Elektra to read and write XML formatted files. It uses a general format which:</p>
<ul>
<li>Maps key names to XML elements</li>
<li>Maps key values to textual content of XML elements</li>
<li>Maps metakeys to XML attributes. Metakey name = attribute name, Metakey value = attribute value</li>
<li>Ignores XML comments</li>
</ul>
<h1><a class="anchor" id="autotoc_md602"></a>
Installation</h1>
<p>See <a class="el" href="doc_INSTALL_md.html">installation</a>. The package is called <code>libelektra5-xerces</code>.</p>
<p>To include this plugin in a homebrew installation run <code>brew tap elektrainitiative/elektra</code> followed by <code>brew install elektrainitiative/elektra/elektra --with-xerces</code></p>
<h1><a class="anchor" id="autotoc_md603"></a>
Usage</h1>
<p>To mount an XML file we use:</p>
<div class="fragment"><div class="line">kdb mount file.xml user:/test/file xerces</div>
</div><!-- fragment --><p>The strength and usage of this plugin is that it supports arbitrary XML files and does not require a specific format. Given the following example of an XML file:</p>
<div class="fragment"><div class="line">&lt;?<span class="keyword">xml</span> <span class="keyword">version</span>=<span class="stringliteral">&quot;1.0&quot;</span> <span class="keyword">encoding</span>=<span class="stringliteral">&quot;UTF-8&quot;</span> <span class="keyword">standalone</span>=<span class="stringliteral">&quot;no&quot;</span> ?&gt;</div>
<div class="line">&lt;<span class="keywordtype">xerces</span>&gt;<span class="keyword">foo</span></div>
<div class="line">  &lt;<span class="keywordtype">bar</span> <span class="keyword">meta</span>=<span class="stringliteral">&quot;da_ta&quot;</span>&gt;<span class="keyword">bar</span>&lt;/<span class="keywordtype">bar</span>&gt;</div>
<div class="line">&lt;/<span class="keywordtype">xerces</span>&gt;</div>
</div><!-- fragment --><p>Please note that if the key name does not correspond to the root element of the xml file, the original name gets stored in a metakey called <code>xerces/rootname</code>. The content of the root element gets mapped to the mount point.</p>
<p>We can observe the following result after mounting:</p>
<div class="fragment"><div class="line">kdb get user:/test/file</div>
<div class="line">#&gt; foo</div>
<div class="line">kdb get user:/test/file/bar</div>
<div class="line">#&gt; bar</div>
<div class="line">kdb meta-get user:/test/file/bar meta</div>
<div class="line">#&gt; da_ta</div>
</div><!-- fragment --><p>To export an existing keyset to the XML format:</p>
<div class="fragment"><div class="line">kdb export user:/test/xerces xerces &gt; example.xml</div>
</div><!-- fragment --><p>The root element of the resulting XML file will be "xerces" again, restored via the metadata. If you don't want this behavior, delete the metadata <code>xerces/rootname</code> on the mount point, then it uses the mount point's name instead.</p>
<h1><a class="anchor" id="autotoc_md604"></a>
Dependencies</h1>
<ul>
<li><code>Xerces-C++ 3.0.0</code> or newer (<code>apt-get install libxerces-c-dev</code> or <code>brew install xerces-c</code> on macOS)</li>
<li>CMake 3.6 or a copy of <code>FindXercesC.cmake</code> in <code>/usr/share/cmake-3.0/Modules/</code></li>
</ul>
<h1><a class="anchor" id="autotoc_md605"></a>
Limitations</h1>
<p>This plugin is not able to handle key names which contain characters that are not allowed to appear as an XML element name. Consider using the rename plugin to take care about proper escaping.</p>
<p>The main rules of an XML element name are:</p>
<ul>
<li>Element names must start with a letter or underscore</li>
<li>Element names cannot start with the letters xml (or XML, or Xml, etc.)</li>
<li>Element names can contain letters, digits, hyphens, underscores, and periods</li>
<li>Element names cannot contain spaces</li>
</ul>
<p>The root key is not allowed to be an array, as this would correspond to multiple root elements in XML (see the <a href="https://github.com/ElektraInitiative/libelektra/issues/1451">GitHub issue</a>).</p>
<p>XSD transformations, schemas or DTDs are not supported yet.</p>
<h1><a class="anchor" id="autotoc_md606"></a>
Examples</h1>
<h2><a class="anchor" id="autotoc_md607"></a>
Mounting, setting a key and exporting</h2>
<div class="fragment"><div class="line"># Backup-and-Restore:user:/tests/xercesfile</div>
<div class="line"> </div>
<div class="line">sudo kdb mount xerces.xml user:/tests/xercesfile xerces</div>
<div class="line"> </div>
<div class="line">kdb set user:/tests/xercesfile foo</div>
<div class="line">kdb meta-set user:/tests/xercesfile xerces/rootname xerces</div>
<div class="line">kdb set user:/tests/xercesfile/bar bar</div>
<div class="line">kdb meta-set user:/tests/xercesfile/bar meta &quot;da_ta&quot;</div>
<div class="line"> </div>
<div class="line">kdb meta-get user:/tests/xercesfile xerces/rootname</div>
<div class="line">#&gt; xerces</div>
<div class="line"> </div>
<div class="line">kdb get user:/tests/xercesfile/bar</div>
<div class="line">#&gt; bar</div>
<div class="line"> </div>
<div class="line">kdb export user:/tests/xercesfile xerces</div>
<div class="line"># STDOUT-REGEX: &lt;bar meta=&quot;da_ta&quot;&gt;bar&lt;/bar&gt;</div>
<div class="line"> </div>
<div class="line">sudo kdb rm -r user:/tests/xercesfile</div>
<div class="line">sudo kdb umount user:/tests/xercesfile</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'dark'
  });
</script>
</body>
</html>
