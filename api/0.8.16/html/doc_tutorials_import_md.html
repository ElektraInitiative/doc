<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Elektra: How-To: kdb import</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.16</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">How-To: kdb import </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction</h2>
<p>The kdb tool allows users to interact with Elektra's Key Database via the command line. This tutorial explains the import function of kdb. This command lets you import Keys from the Elektra Key Database.</p>
<p>The command to use kdb import is: </p><pre class="fragment">kdb import [options] destination [format]
</pre><p>In this command, destination is where the imported Keys should be stored below. For instance, <code>kdb import system/imported</code> would store all the keys below system/imported. This command takes Keys from stdin to store them into the Elektra Key Database. Typically, it is used with a pipe to read in the Keys from a file.</p>
<h3>Format</h3>
<p>The format argument can be a very powerful option to use with kdb import. The format argument allows a user to specify which plug-in is used to import the Keys into the Key Database. The user can specify any storage plug-in to serve as the format for the Keys to be imported. For instance, if a user wanted to import a /etc/hosts file into KDB without mounting it, they could use the command <code>cat /etc/hosts | kdb import system/hosts hosts</code>. This command would essentially copy the current hosts file into KDB, like mounting it. Unlike mounting it, changes to the Keys would not be reflected in the hosts file and vise versa.</p>
<h4>Dump Format</h4>
<p>If no format is specified, the format <code>dump</code> will be used instead. The dump format is the standard way of expressing Keys and all their relevant information. This format is intended to be used only within Elektra. The dump format is a good means of backing up Keys from the Key Database for use with Elektra later such as reimporting them later. As of this writing, dump is the only way to fully preserve all parts of the KeySet.</p>
<p>It is very important to note that the dump does not rename keys by design. If a user exports a KeySet using dump using a command such as <code>kdb export system/backup &gt; backup.ecf</code>, they can only import that keyset back into system/backup using a command like <code>cat backup.ecf | kdb import system/backup</code>.</p>
<h2>Options</h2>
<p>The kdb import command only takes one special option: </p><pre class="fragment">    -s --strategy &lt;name&gt;            which is used to specify a strategy
</pre><h3>Strategies</h3>
<p>For kdb import, you can specify a strategy to use if Keys already exist in the specified destination</p>
<p>The current list of strategies are:</p>
<ul>
<li><code>preserve</code>: any keys already in the destination will not be overwritten</li>
<li><code>overwrite</code>: any keys already in the destination will be overwritten if a new key has the same name</li>
<li><code>cut</code>: all keys already in the destination will be removed, then new keys will be imported If no strategy is specified, the command defaults to the preserve strategy as to not be destructive to any previous keys.</li>
</ul>
<h2>Example</h2>
<pre class="fragment">    cat backup.ecf | kdb import system/backup
</pre><p>This command would import all keys stored in the file backup.ecf into the Key Database under system/backup.</p>
<p>In this example, backup.ecf was exported from the KeySet using the dump format by using the command: </p><pre class="fragment">    kdb export system/backup &gt; backup.ecf
</pre><p>backup.ecf contains all the information about the keys below system/backup: </p><pre class="fragment">    $cat backup.ecf
    kdbOpen 1
    ksNew 3
    keyNew 19 0
    system/backup/key1
    keyMeta 7 1
    binary
    keyEnd
    keyNew 19 0
    system/backup/key2
    keyMeta 7 1
    binary
    keyEnd
    keyNew 19 0
    system/backup/key3
    keyMeta 7 1
    binary
    keyEnd
    ksEnd
</pre><p>Before the import command, system/backup does not exists and no keys are contained there. After the import command, running the command <code>kdb ls system/backup</code> prints: </p><pre class="fragment">    system/backup/key1
    system/backup/key2
    system/backup/key3</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
