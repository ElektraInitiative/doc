<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: kdbopmphmpredictor.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.8.25</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">kdbopmphmpredictor.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines for the Order Preserving Minimal Perfect Hash Map Predictor.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for kdbopmphmpredictor.h:</div>
<div class="dyncontent">
<div class="center"><img src="kdbopmphmpredictor_8h__incl.png" border="0" usemap="#kdbopmphmpredictor_8h" alt=""/></div>
<map name="kdbopmphmpredictor_8h" id="kdbopmphmpredictor_8h">
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="kdbopmphmpredictor_8h__dep__incl.png" border="0" usemap="#kdbopmphmpredictor_8hdep" alt=""/></div>
<map name="kdbopmphmpredictor_8hdep" id="kdbopmphmpredictor_8hdep">
<area shape="rect" id="node2" href="opmphmpredictor_8c.html" title="The Order Preserving Minimal Perfect Hash Map Predictor. " alt="" coords="17,80,159,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af86a5206b22f957f33aba0f3d5207146"><td class="memItemLeft" align="right" valign="top">OpmphmPredictor *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#af86a5206b22f957f33aba0f3d5207146">opmphmPredictorNew</a> (void)</td></tr>
<tr class="memdesc:af86a5206b22f957f33aba0f3d5207146"><td class="mdescLeft">&#160;</td><td class="mdescRight">Basic functions.  <a href="#af86a5206b22f957f33aba0f3d5207146">More...</a><br /></td></tr>
<tr class="separator:af86a5206b22f957f33aba0f3d5207146"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e2b941eecc192cf894b2490fcfbf2b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#a8e2b941eecc192cf894b2490fcfbf2b5">opmphmPredictorDel</a> (OpmphmPredictor *op)</td></tr>
<tr class="memdesc:a8e2b941eecc192cf894b2490fcfbf2b5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the OpmphmPredictor.  <a href="#a8e2b941eecc192cf894b2490fcfbf2b5">More...</a><br /></td></tr>
<tr class="separator:a8e2b941eecc192cf894b2490fcfbf2b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fdf217cbfc0c6601113327cfdfc90ee"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#a0fdf217cbfc0c6601113327cfdfc90ee">opmphmPredictorCopy</a> (OpmphmPredictor *dest, OpmphmPredictor *source)</td></tr>
<tr class="memdesc:a0fdf217cbfc0c6601113327cfdfc90ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make a copy of the OpmphmPredictor.  <a href="#a0fdf217cbfc0c6601113327cfdfc90ee">More...</a><br /></td></tr>
<tr class="separator:a0fdf217cbfc0c6601113327cfdfc90ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c730ba754c0b164555b85e2bf9f097"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#af9c730ba754c0b164555b85e2bf9f097">opmphmPredictorWorthOpmphm</a> (size_t n)</td></tr>
<tr class="memdesc:af9c730ba754c0b164555b85e2bf9f097"><td class="mdescLeft">&#160;</td><td class="mdescRight">Heuristic function.  <a href="#af9c730ba754c0b164555b85e2bf9f097">More...</a><br /></td></tr>
<tr class="separator:af9c730ba754c0b164555b85e2bf9f097"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dab3e7c921f8adc655bd893cfbfb4cb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#a6dab3e7c921f8adc655bd893cfbfb4cb">opmphmPredictor</a> (OpmphmPredictor *op, size_t n)</td></tr>
<tr class="memdesc:a6dab3e7c921f8adc655bd893cfbfb4cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Predictor functions.  <a href="#a6dab3e7c921f8adc655bd893cfbfb4cb">More...</a><br /></td></tr>
<tr class="separator:a6dab3e7c921f8adc655bd893cfbfb4cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31b9dd2f3c89816f5674f2261faf6224"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#a31b9dd2f3c89816f5674f2261faf6224">opmphmPredictorIncCountOpmphm</a> (OpmphmPredictor *op)</td></tr>
<tr class="memdesc:a31b9dd2f3c89816f5674f2261faf6224"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the counter when the OPMPHM was used for the ksLookup (...) .  <a href="#a31b9dd2f3c89816f5674f2261faf6224">More...</a><br /></td></tr>
<tr class="separator:a31b9dd2f3c89816f5674f2261faf6224"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e4441629a4de43e45387560052066f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#a47e4441629a4de43e45387560052066f">opmphmPredictorIncCountBinarySearch</a> (OpmphmPredictor *op, size_t n)</td></tr>
<tr class="memdesc:a47e4441629a4de43e45387560052066f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increases the counter when the Binary Search was used for the ksLookup (...) .  <a href="#a47e4441629a4de43e45387560052066f">More...</a><br /></td></tr>
<tr class="separator:a47e4441629a4de43e45387560052066f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2609ca09a3d8479b15140795fe915f1e"><td class="memItemLeft" align="right" valign="top">const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#a2609ca09a3d8479b15140795fe915f1e">opmphmPredictorHistoryMask</a></td></tr>
<tr class="memdesc:a2609ca09a3d8479b15140795fe915f1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Order Preserving Minimal Perfect Hash Map Predictor.  <a href="#a2609ca09a3d8479b15140795fe915f1e">More...</a><br /></td></tr>
<tr class="separator:a2609ca09a3d8479b15140795fe915f1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca6e420bdc1b2730db1ed6685cc14519"><td class="memItemLeft" align="right" valign="top"><a id="aca6e420bdc1b2730db1ed6685cc14519"></a>
const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="kdbopmphmpredictor_8h.html#aca6e420bdc1b2730db1ed6685cc14519">opmphmPredictorActionLimit</a></td></tr>
<tr class="memdesc:aca6e420bdc1b2730db1ed6685cc14519"><td class="mdescLeft">&#160;</td><td class="mdescRight">The opmphmPredictorActionLimit define the minimum KeySet size necessary for predictor actions. <br /></td></tr>
<tr class="separator:aca6e420bdc1b2730db1ed6685cc14519"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines for the Order Preserving Minimal Perfect Hash Map Predictor. </p>
<dl class="section copyright"><dt>Copyright</dt><dd>BSD License (see doc/COPYING or <a href="https://www.libelektra.org">https://www.libelektra.org</a>) </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a6dab3e7c921f8adc655bd893cfbfb4cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6dab3e7c921f8adc655bd893cfbfb4cb">&#9670;&nbsp;</a></span>opmphmPredictor()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int opmphmPredictor </td>
          <td>(</td>
          <td class="paramtype">OpmphmPredictor *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Predictor functions. </p>
<p>Predictor functions.</p>
<p>Uses the opmphmPredictorWorthOpmphm (...) to check if the previous sequence of ksLookup (...) invocations without alteration was worth using the OPMPHM. Updates the state with the predictionAutomata and the worth information of the previous history. Alters the history with the worth information and makes the prediction for the next sequence of ksLookup (...) invocations.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>the Predictor </td></tr>
    <tr><td class="paramname">n</td><td>the number of elements in the KeySet</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>it is worth using the OPMPHM </td></tr>
    <tr><td class="paramname">0</td><td>it is not worth using the OPMPHM </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0fdf217cbfc0c6601113327cfdfc90ee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fdf217cbfc0c6601113327cfdfc90ee">&#9670;&nbsp;</a></span>opmphmPredictorCopy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opmphmPredictorCopy </td>
          <td>(</td>
          <td class="paramtype">OpmphmPredictor *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">OpmphmPredictor *&#160;</td>
          <td class="paramname"><em>source</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make a copy of the OpmphmPredictor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">source</td><td>the OpmphmPredictor source </td></tr>
    <tr><td class="paramname">dest</td><td>the OpmphmPredictor destination </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a8e2b941eecc192cf894b2490fcfbf2b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e2b941eecc192cf894b2490fcfbf2b5">&#9670;&nbsp;</a></span>opmphmPredictorDel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void opmphmPredictorDel </td>
          <td>(</td>
          <td class="paramtype">OpmphmPredictor *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deletes the OpmphmPredictor. </p>
<p>Clears and frees all memory in OpmphmPredictor.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>the OpmphmPredictor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a47e4441629a4de43e45387560052066f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e4441629a4de43e45387560052066f">&#9670;&nbsp;</a></span>opmphmPredictorIncCountBinarySearch()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int opmphmPredictorIncCountBinarySearch </td>
          <td>(</td>
          <td class="paramtype">OpmphmPredictor *&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the counter when the Binary Search was used for the ksLookup (...) . </p>
<p>Prevents also a endless Binary Search usage by a simple heuristic.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>the Predictor </td></tr>
    <tr><td class="paramname">n</td><td>the number of elements in the KeySet</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>it is worth using the OPMPHM </td></tr>
    <tr><td class="paramname">0</td><td>it is not worth using the OPMPHM </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a31b9dd2f3c89816f5674f2261faf6224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31b9dd2f3c89816f5674f2261faf6224">&#9670;&nbsp;</a></span>opmphmPredictorIncCountOpmphm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void opmphmPredictorIncCountOpmphm </td>
          <td>(</td>
          <td class="paramtype">OpmphmPredictor *&#160;</td>
          <td class="paramname"><em>op</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Increases the counter when the OPMPHM was used for the ksLookup (...) . </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">op</td><td>the Predictor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af86a5206b22f957f33aba0f3d5207146"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af86a5206b22f957f33aba0f3d5207146">&#9670;&nbsp;</a></span>opmphmPredictorNew()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">OpmphmPredictor* opmphmPredictorNew </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Basic functions. </p>
<p>Basic functions.</p>
<p>Reserves for all possible values of opmphmPredictorHistoryMask two bits to store all 4 states of the Prediction Automata A2. Sets the initial state to 0.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">OpmphmPredictor</td><td>* success </td></tr>
    <tr><td class="paramname">NULL</td><td>memory error </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af9c730ba754c0b164555b85e2bf9f097"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c730ba754c0b164555b85e2bf9f097">&#9670;&nbsp;</a></span>opmphmPredictorWorthOpmphm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t opmphmPredictorWorthOpmphm </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Heuristic function. </p>
<p>Heuristic function.</p>
<p>This easy and fast computable heuristic function tells how many ksLookup (...) invocations without alteration of the KeySet need to be made to justify the OPMPHM usage. This heuristic function is developed and measured by benchmarks.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">n</td><td>the number of elements in the KeySet</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">size_t</td><td>the heuristic value </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2609ca09a3d8479b15140795fe915f1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2609ca09a3d8479b15140795fe915f1e">&#9670;&nbsp;</a></span>opmphmPredictorHistoryMask</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint16_t opmphmPredictorHistoryMask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Order Preserving Minimal Perfect Hash Map Predictor. </p>
<p>A modified Global History Register and Global Pattern History Table branch prediction algorithm from</p>
<p>Tse-Yu Yeh and Yale N. Patt "Alternative Implementations of Two-Level Adaptive Branch Prediction" In: The 19th Annual International Symposium on Computer Architecture (1992), pp. 124-134</p>
<p>Maps the event of branch taken or not to a sequence of ksLookup (...) invocations without KeySet alteration that is worth using the OPMPHM or not. The predictor looks at past events to predict the future, to keep track of past events the <code>lookupCount</code> and the <code>ksSize</code> must be stored. opmphmPredictorHistoryMask defines the length and extraction mask of the global history register interpreted binary it must be a series of 1, with a minimum value of 0x3 and a maximum value of 0x7FFF.</p>
<p>Order Preserving Minimal Perfect Hash Map Predictor. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
