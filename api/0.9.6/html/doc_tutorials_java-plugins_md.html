<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: How-To: Write a Java Plugin</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.6</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">How-To: Write a Java Plugin </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_doc_tutorials_java_plugins"></a> This file serves as a tutorial on how to get started with writing a java plugin.</p>
<h1><a class="anchor" id="autotoc_md3589"></a>
Basics</h1>
<p>If you want to know more about plugins in general, please check out the <a class="el" href="doc_tutorials_plugins_md.html">How-To: Write a Plugin</a> page. If you need a tutorial for java, please check out the <a class="el" href="doc_tutorials_java-kdb_md.html">How-To: Java kdb</a> page.</p>
<h1><a class="anchor" id="autotoc_md3590"></a>
Two Types of Java Plugins</h1>
<p>Before we will take a look into how to write a plugin in Java, it is important to note, that there are two ways of doing that:</p>
<ul>
<li>using JNI plugin</li>
<li>using JNA binding</li>
</ul>
<p>If you would like to write a plugin in Java and look into the documentation, then you will definitely meet two notions like <code>JNI Plugin</code> and <code>JNA Binding</code>, so let's clarify, what they are.</p>
<h2><a class="anchor" id="autotoc_md3591"></a>
JNI Plugin</h2>
<p>Java Native Interface is a framework, which allows Java code to execute or to be executed by programms, written in other languages like C, C++ and Assembly. Most of Elektra’s plugins are written in C and C++. Developer can use the JNI plugin, which was created specifically for Elektra to write plugins using Java code. For more information on JNI plugins, please take a look <a class="el" href="md_src_plugins_jni_README.html#src_plugins_jni_README_md">here</a>.</p>
<p>In order to use <code>jni</code> in Elektra, the library <code>jni.h</code> must be provided for it. This file is used by the JNI Plugin, which has to be enabled, while installing Elektra. More information on how to install the JNI plugin can be found <a class="el" href="md_src_plugins_jni_README.html#src_plugins_jni_README_md">here</a>. Please read carefully and follow instructions in the “Installation” and “Enabling the Plugin” sections. If you don't have the <code>jni.h</code> file, it can be easily downloaded and placed under this path:</p>
<ul>
<li><code>/path/to/SDK/include</code></li>
</ul>
<p>or you can reinstall the Java SDK.</p>
<h2><a class="anchor" id="autotoc_md3592"></a>
JNA Binding</h2>
<p>Java Native Access is Java technology (library), which like JNI allows a developer to run native code using only Java by providing access to native shared libraries. In order to use the JNA binding, it should be installed first. You can find more information on <a href="https://github.com/java-native-access/jna">JNA’s GitHub page</a>.</p>
<p>Generally speaking, <code>JNI</code> and <code>JNA</code> are both different Java technologies that could be used to bind Java code and code written in C and C++. <code>JNI</code> gives developers the ability to integrate Java code into C too. That is not possible with <code>JNA</code>.</p>
<p>Here we will look into, how can we write Java Plugins using - <code>JNA Binding</code>.</p>
<h2><a class="anchor" id="autotoc_md3593"></a>
Writing a Plugin</h2>
<p>Under the the following path you can find the examples of already existing plugins and you can look into libelektra Java library, which is used for communication with the configuration database.</p>
<p>In order to write a new Java Plugin, the new class has to be created under the <code>plugin</code> folder. It has also to extend the <code>Plugin.java</code> interface, which contains all required methods to communicate with Elektra’s database. You can leave some of the methods unimplemented, if there is no need for them.</p>
<p>The <code>Plugin.java</code> interface contains methods for the five basic functions of plugins:</p>
<ul>
<li><a href="https://doc.libelektra.org/api/latest/html/group__plugin.html#ga23c2eb3584e38a4d494eb8f91e5e3d8d"><code>elektraPluginOpen</code></a>,</li>
<li><a href="https://doc.libelektra.org/api/latest/html/group__plugin.html#gacb69f3441c6d84241b4362f958fbe313"><code>elektraPluginGet</code></a>,</li>
<li><a href="https://doc.libelektra.org/api/latest/html/group__plugin.html#gae65781a1deb34efc79c8cb9d9174842c"><code>elektraPluginSet</code></a>,</li>
<li><a href="https://doc.libelektra.org/api/latest/html/group__plugin.html#gad74b35f558ac7c3262f6069c5c47dc79"><code>elektraPluginError</code></a>, and</li>
<li><a href="https://doc.libelektra.org/api/latest/html/group__plugin.html#ga1236aefe5b2baf8b7bf636ba5aa9ea29"><code>elektraPluginClose</code></a></li>
</ul>
<p>It is expected that each method returns -1 if an error occurred or 0 if everything worked as expected.</p>
<h2><a class="anchor" id="autotoc_md3594"></a>
Usage of Plugin</h2>
<p>To use the binding in a Java project, you have to include the jar file <code>libelektra-$VERSION.jar</code> in the project. The version number is the same one as used for Elektra. This jar is created upon build, if you enable the JNA binding. If you are going to use a build tool supporting dependency resolution (e.g. Gradle, Maven, ...), you can fetch the Java binding from maven central with group id <code><a class="el" href="namespaceorg_1_1libelektra.html" title="JNA based proxy for native libelektra.">org.libelektra</a></code> and artefact id <code>libelektra</code> using the desired version number. You can also install the jar into your local maven repository. See JNA binding for more information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
