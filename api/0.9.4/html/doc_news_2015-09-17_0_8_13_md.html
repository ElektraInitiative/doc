<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Elektra: 0.8.13 Release</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Elektra
   &#160;<span id="projectnumber">0.9.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">0.8.13 Release </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>guid: 3c00a5f1-c017-4555-92b5-a2cf6e0803e3</li>
<li>author: Markus Raab</li>
<li>pubDate: Thu, 17 Sep 2015 17:32:16 +0200</li>
<li>shortDesc: adds elektrify-getenv &amp; other improvements</li>
</ul>
<p>Again we managed to release with many new features, many fixes and also other improvements.</p>
<p>getenv(3) is one of the most popular ways to retrieve configuration, even though it has many known problems:</p>
<ul>
<li>no standard way to modify it</li>
<li>relogin (or restart of shell) necessary</li>
<li>names are flat (no hierarchical structure)</li>
<li>cannot be set for individual applications</li>
<li>different in at, cron and similar scripts</li>
</ul>
<p>With elektrify-getenv we wrote a solution which solves most of the problems. We use the <code>LD_PRELOAD</code> technique to <em>additionally</em> retrieve values from Elektra, and not only the environment.</p>
<p>You simply can do:</p>
<div class="fragment"><div class="line">kdb set user/env/override/HTTP_PROXY &quot;http://my.proxy:8080&quot;</div></div><!-- fragment --><p>This will set the <code>HTTP_PROXY</code> environment variable to <code><a href="http://my.proxy:8080">http://my.proxy:8080</a></code>. Configuration can be retrieved with <code>kdb get</code>:</p>
<div class="fragment"><div class="line">kdb get user/env/override/HTTP_PROXY</div><div class="line">lynx   # or start another www-browser with the newly set HTTP_PROXY</div></div><!-- fragment --><p>Or using the man pages:</p>
<div class="fragment"><div class="line">kdb elektrify-getenv man man --elektra:MANWIDTH=40</div></div><!-- fragment --><p>Will use MANWIDTH 40 for this invocation of man man. This feature is handy, if an option is only available by environment, but not by command-line arguments, because sometimes environment variables are not trivial to set (e.g. in Makefiles).</p>
<p>Some more examples:</p>
<div class="fragment"><div class="line">kdb set user/env/override/MANOPT -- &quot;--regex -LC&quot;</div><div class="line">kdb elektrify-getenv getenv MANOPT   # to check if it is set as expected</div><div class="line">kdb getenv MANOPT   # if /etc/ld.so.preload is active</div></div><!-- fragment --><p>So is this the final solution for configuration and manual elektrification of applications is not needed anymore?</p>
<p>The answer is: no and yes.</p>
<p>It is quite satisfactory for configuration that is inherently sharable (not different from one application to another) <em>and</em> needs the environment semantics, i.e. some subprocesses should have different configuration than others, e.g. in a specific terminal.</p>
<p>But it might not be a good solution for your own application, because libgetenv(3) implies many architectural decision, that other elektrified applications would decide differently, e.g.:</p>
<ul>
<li>it uses global variables (getenv(3) has no handle)</li>
<li>it uses mutex for multi-threading safety</li>
<li>the API getenv(3) only returns <code>char*</code> and has no support for other data types</li>
</ul>
<p>For more information see https://git.libelektra.org/blob/master/src/libs/getenv/README.md "src/libgetenv/README.md"</p>
<p>As always, the API and API is fully forward-compatible, i.e. programs compiled against an older 0.8 versions of Elektra will continue to work.</p>
<p>Because <code>keyUnescapedName</code> and <code>keyGetUnescapedNameSize</code> is added in this release, it is not backward-compatible, i.e. programs compiled against 0.8.13, might <em>not</em> work with older 0.8 libraries.</p>
<p>The function <code>keyUnescapedName</code> provides access to an unescaped name, i.e. one where <code>/</code> and <code>\\</code> are literal symbols and do not have any special meaning. <code>NULL</code> characters are used as path separators. This function makes it trivial and efficient to iterate over all path names, as already exploited in all bindings:</p>
<ul>
<li><a href="https://git.libelektra.org/blob/master/src/bindings/jna/HelloElektra.java">jna (java)</a></li>
<li><a href="https://git.libelektra.org/blob/master/src/bindings/swig/lua/tests/test_key.lua">lua</a></li>
<li>python2</li>
<li><a href="https://git.libelektra.org/blob/master/src/bindings/swig/python/tests/test_key.py">python3</a></li>
</ul>
<p>Other small changes/additions in bindings:</p>
<ul>
<li>fix key constructor, thanks to Manuel Mausz</li>
<li>add copy and deepcopy in python (+examples,+test cases), thanks to Manuel Mausz</li>
<li>dup() in python3 returned wrong type (SWIG wrapper), thanks to Toscano Pino for reporting, thanks to Manuel Mausz for fixing it</li>
</ul>
<p>Doxygen 1.8.8 is preferred and the configfile was updated to this version.</p>
<p>The symbols of nickel (for the ni plugin) do not longer leak from the Elektra library. As such, old versions of testmod_ni won't work with Elektra 0.8.13. A version-script is now in use to only export following symbols:</p>
<ul>
<li><code>kdb*</code></li>
<li><code>key*</code></li>
<li><code>ks*</code></li>
<li><code>libelektra*</code> for module loading system</li>
<li><code>elektra*</code> for proposed and other functions (no ABI/API compatibility here!)</li>
</ul>
<p>In this release, ENABLE_CXX11 was changed to <code>ON</code> by default.</p>
<p>Note that in the next release 0.8.14 there will be two changes:</p>
<ul>
<li>According to <a href="https://git.libelektra.org/issues/262">issue #262</a>, we plan to remove the option ENABLE_CXX11 and require the compiler to be C++11 compatible. If you have any system you are not able to build Elektra with -DENABLE_CXX11=ON (which is the default for 0.8.13) please report that immediately.</li>
<li>the python3 bindings will be renamed to python</li>
</ul>
<p>By not having to care for pre-C++11 compilers, we hope to attract more developers. The core part is still in C99 so that Elektra can be used on systems where libc++ is not available. Many new plugins are still written in C99, also with the purpose of not depending on C++.</p>
<p>A technical preview of <a href="https://git.libelektra.org/blob/master/src/plugins/python">python3</a> and python2 plugins has been added.</p>
<p>With them its possible to write any plugin with python scripts.</p>
<p>Note, they are a technical preview. They might have severe bugs and the API might change in the future. Nevertheless, it is already possible to, e.g. develop storage plugins with it.</p>
<p>They are not included in <code>ALL</code> plugins. To use it, you have to specify it:</p>
<div class="fragment"><div class="line">-PLUGINS=&quot;ALL;python;python2&quot;</div></div><!-- fragment --><p>Thanks to Manuel Mausz for to this work on the plugins and the patience in all the last minute fixes!</p>
<p>The GUI was improved and the most annoying bugs are fixed:</p>
<ul>
<li>only reload and write config files if something has changed</li>
<li>use merging in a way that only a conflict free merge will be written, thanks to Felix Berlakovich</li>
<li>made sure keys can only be renamed if the new name/value/metadata is different from the existing ones</li>
<li>fixed 1) and 2) of #233</li>
<li>fixed #235</li>
<li>fixed qml warning when deleting key</li>
<li>fixed qml typerror when accepting an edit</li>
</ul>
<p>A big thanks to Raffael Pancheri!</p>
<p>The commandline tool <code>kdb</code> also got some improvements. Most noteworthy is that <code>kdb get -v</code> now gives a complete trace for every key that was tried. This is very handy if you have a complex specification with many fallback and override links.</p>
<p>It also shows default values and warnings in the case of context-oriented features.</p>
<p>Furthermore:</p>
<ul>
<li>Add <code>-v</code> for setmeta</li>
<li>Copy will warn when it won't overwrite another key (behaviour did not change)</li>
<li>improve help text, thanks to Ian Donnelly</li>
</ul>
<p>As Michael Haberler from <a href="http://www.machinekit.io/">machinekit</a> pointed out it was certainly not easy for someone to get started with Elektra. With the documentation initiative we are going to change that.</p>
<ul>
<li>The discussion in <a href="https://git.libelektra.org/issues">github issues</a> should clarify many things</li>
<li>We start writing man pages in ronn-format(7), thanks to Ian Donnelly for current work</li>
<li>Kurt Micheli is woring on improved doxygen docu + pdf generation</li>
<li>Daniel Bugl already restructed the main page</li>
<li>Daniel Bugl also improved formatting</li>
<li>doc: use <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">more,thanks</td><td>to Pino Toscano</td></tr>
  </table>
  </dd>
</dl>
</li>
<li>doxygen: fix template to use <code>@</code> and not <code>\\</code>.</li>
<li>SVG logo is preferred, thanks to Daniel Bugl</li>
<li>doc: use <dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">more,thanks</td><td>to Pino Toscano</td></tr>
  </table>
  </dd>
</dl>
</li>
<li>many typo fixes, thanks to Pino Toscano</li>
<li>fix broken links, thanks to Manuel Mausz, Daniel Bugl and Michael Haberler</li>
</ul>
<p>Any further help is very welcome! This call is especially addressed to beginners in Elektra because they obviously know best which documentation is lacking and what they would need.</p>
<p><code>kdb-full</code> and <code>kdb-static</code> work fine now for Windows 64bit, thanks to Manuel Mausz. The wresolver is now more relaxed with unset environment.</p>
<p>All issues for macOS were resolved. With the exception of elektrify-getenv everything should work now, thanks to Mihael Pranjic:</p>
<ul>
<li>fix mktemp</li>
<li>testscripts</li>
<li>recursive mutex simplification</li>
<li>clearenv ifdef</li>
</ul>
<p>and thanks to Daniel Bugl:</p>
<ul>
<li>RPATH fixed, so that <code>kdb</code> works</li>
</ul>
<p>furthermore:</p>
<ul>
<li>fix <code>__FUNCTION__</code> to <code>__func__</code> (C99), thanks to Pino Toscano</li>
<li>avoid compilation error when JNI_VERSION_1_8 is missing</li>
<li>fix (twice, because of an accidental revert) the TARGET_CMAKE_FOLDER, thanks to Pino Toscano</li>
</ul>
<p>Thanks to Manuel Mausz for to testing and improving portability!</p>
<ul>
<li><a href="https://packages.qa.debian.org/e/elektra/news/20150726T155000Z.html">0.8.12 packaged+migrated to testing</a>, thanks to Pino Toscano</li>
<li>fix build with external gtest, thanks to Pino Toscano</li>
<li>switch from FindElektra.cmake to ElektraConfig.cmake, thanks to Pino Toscano</li>
<li>use <code>cmake_parse_arguments</code> instead of <code>parse_arguments</code>, thanks to Manuel Mausz</li>
</ul>
<ul>
<li>Key::release() will also work when Key holds a null-pointer</li>
<li>Key::getName() avoids std::string exception</li>
<li>support for copy module was introduced, thanks to Manuel Mausz</li>
<li>be more POSIX compatible in shell scripts (<code>type</code> to <code>command -v</code> and avoid <code>echo -e</code>) thanks to Pino Toscano</li>
<li>fix vararg type for KEY_FLAGS, thanks to Pino Toscano</li>
<li>fix crash of example, thanks to Pino Toscano</li>
<li>add proper licence file for Modules (COPYING-CMAKE-SCRIPTS), thanks to Pino Toscano</li>
<li>fix XDG resolver issue when no given path in XDG_CONFIG_DIRS is valid</li>
<li>make dbus example work again</li>
<li>fix compiler warnings for gcc and clang</li>
<li>fix Valgrind suppressions</li>
<li>Installation of GI binding is fixed, thanks to Dāvis</li>
<li>make uninstall is fixed and docu improved</li>
</ul>
<p>There are some misconceptions about Elektra and semi structured data (like XML, JSON). Elektra is a key-value storage, that internally represents everything with key and values. Even though, Elektra can use XML and JSON files elegantly, there are limitations what XML and JSON can represent. XML, e.g., cannot have holes within its structure, while this is obviously easily possible with key-value. And JSON, e.g., cannot have non-array entries within an array. This is a more general issue of that configuration files in general are constrained in what they are able to express. The solution to this problem is validation, i.e. keys that does not fit in the underlying format are rejected. Note there is no issue the other way round: special characteristics of configuration files can always be captured in Elektra’s metadata.</p>
<p>You can download the release from <a href="https://www.libelektra.org/ftp/elektra/releases/elektra-0.8.13.tar.gz">here</a> and now also <a href="https://github.com/ElektraInitiative/ftp/tree/master/releases/elektra-0.8.13.tar.gz">here on github</a></p>
<ul>
<li>name: elektra-0.8.13.tar.gz</li>
<li>size: 2141758</li>
<li>md5sum: 6e7640338f440e67aba91bd64b64f613</li>
<li>sha1: ca58524d78e5d39a540a4db83ad527354524db5e</li>
<li>sha256: f5c672ef9f7826023a577ca8643d0dcf20c3ad85720f36e39f98fe61ffe74637</li>
</ul>
<p>This release tarball now is also available <a href="https://www.libelektra.org/ftp/elektra/releases/elektra-0.8.13.tar.gz.gpg">signed by me using gpg</a></p>
<p>already built API-Docu can be found <a href="https://doc.libelektra.org/api/0.8.13/html/">here</a></p>
<p>Subscribe to the <a href="https://doc.libelektra.org/news/feed.rss">RSS feed</a> to always get the release notifications.</p>
<p>For any questions and comments, please contact the <a href="https://lists.sourceforge.net/lists/listinfo/registry-list">Mailing List</a> the issue tracker <a href="https://git.libelektra.org/issues">on github</a> or by mail <a href="#" onclick="location.href='mai'+'lto:'+'ele'+'kt'+'ra@'+'ma'+'rku'+'s-'+'raa'+'b.'+'org'; return false;">elekt<span style="display: none;">.nosp@m.</span>ra@m<span style="display: none;">.nosp@m.</span>arkus<span style="display: none;">.nosp@m.</span>-raa<span style="display: none;">.nosp@m.</span>b.org</a>.</p>
<p><a href="https://doc.libelektra.org/news/3c00a5f1-c017-4555-92b5-a2cf6e0803e3.html">Permalink to this NEWS entry</a></p>
<p>For more information, see <a href="https://libelektra.org">https://libelektra.org</a></p>
<p>Best regards, Markus </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
